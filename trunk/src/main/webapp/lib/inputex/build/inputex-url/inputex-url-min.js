YUI.add("inputex-url",function(c){var b=c.Lang,a=c.inputEx;a.UrlField=function(d){a.UrlField.superclass.constructor.call(this,d)};c.extend(a.UrlField,a.StringField,{setOptions:function(d){a.UrlField.superclass.setOptions.call(this,d);this.options.className=d.className?d.className:"inputEx-Field inputEx-UrlField";this.options.messages.invalid=a.messages.invalidUrl;this.options.favicon=b.isUndefined(d.favicon)?(("https:"==document.location.protocol)?false:true):d.favicon;this.options.size=d.size||50;this.options.regexp=a.regexps.url},render:function(){a.UrlField.superclass.render.call(this);this.el.size=this.options.size;if(!this.options.favicon){c.one(this.el).addClass("nofavicon")}if(this.options.favicon){this.favicon=a.cn("img",{src:a.spacerUrl});this.fieldContainer.insertBefore(this.favicon,this.fieldContainer.childNodes[0]);c.on("click",function(){this.focus()},this.favicon,this)}},setClassFromState:function(){a.UrlField.superclass.setClassFromState.call(this);if(this.options.favicon){this.updateFavicon((this.previousState==a.stateValid)?this.getValue():null)}},updateFavicon:function(e){var d=e?e.match(/https?:\/\/[^\/]*/)+"/favicon.ico":a.spacerUrl;if(d!=this.favicon.src){a.sn(this.favicon,null,{visibility:"hidden"});this.favicon.src=d;if(this.timer){clearTimeout(this.timer)}var f=this;this.timer=setTimeout(function(){f.displayFavicon()},1000)}},displayFavicon:function(){a.sn(this.favicon,null,{visibility:(this.favicon.naturalWidth!=0)?"visible":"hidden"})}});a.registerType("url",a.UrlField,[{type:"boolean",label:"Display favicon",name:"favicon",value:true}])},"3.0.0a",{requires:["inputex-string"]});
{"version":3,"sources":["qr-scanner.js"],"names":["QrScanner","video","onDecode","canvasSize","DEFAULT_CANVAS_SIZE","$video","$canvas","document","createElement","_onDecode","_active","width","height","_sourceRect","x","y","addEventListener","_updateSourceRect","_scanFrame","_qrWorker","Worker","WORKER_PATH","smallestDimension","Math","min","videoWidth","videoHeight","sourceRectSize","round","paused","ended","requestAnimationFrame","scanImage","then","error","console","facingMode","exact","constraintsToTry","forEach","constraint","_getMatchingCameraStream","length","Promise","reject","navigator","mediaDevices","getUserMedia","shift","catch","resolve","clearTimeout","_offTimeout","_getCameraStream","stream","srcObject","_setVideoMirror","e","pause","setTimeout","getTracks","stop","scaleFactor","style","transform","red","green","blue","postMessage","type","data","imageOrFileOrUrl","sourceRect","worker","canvas","fixedCanvasSize","alsoTryWithoutSourceRect","promise","timeout","onMessage","onError","event","removeEventListener","_loadImage","image","imageData","_getImageData","buffer","sourceRectX","sourceRectY","sourceRectWidth","sourceRectHeight","context","getContext","alpha","imageSmoothingEnabled","drawImage","getImageData","HTMLCanvasElement","HTMLVideoElement","window","ImageBitmap","OffscreenCanvas","Image","_awaitImageLoad","File","URL","src","createObjectURL","revokeObjectURL","complete","naturalWidth","onLoad"],"mappings":"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","file":"qr-scanner.min.js","sourcesContent":[]}
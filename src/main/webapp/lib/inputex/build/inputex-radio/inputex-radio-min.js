YUI.add("inputex-radio",function(c){var b=c.Lang,a=c.inputEx;a.RadioField=function(d){a.RadioField.superclass.constructor.call(this,d);if(c.UA.ie&&!b.isUndefined(this.options.value)){var e=this;setTimeout(function(){e.setValue(e.options.value,false)},0)}};c.extend(a.RadioField,a.Field,{setOptions:function(d){var e,f;a.RadioField.superclass.setOptions.call(this,d);this.options.display=d.display==="vertically"?"vertically":"inline";this.options.className=d.className?d.className:"inputEx-Field inputEx-RadioField";if(this.options.display==="vertically"){this.options.className+=" inputEx-RadioField-Vertically"}if(b.isArray(d.values)){this.options.choices=[];for(e=0,f=d.values.length;e<f;e+=1){this.options.choices.push({value:d.values[e],label:d.choices[e]})}}else{this.options.choices=d.choices}if(b.isUndefined(d.allowAny)||d.allowAny===false){this.options.allowAny=false}else{this.options.allowAny={};if(b.isArray(d.allowAny.separators)){this.options.allowAny.separators=d.allowAny.separators}this.options.allowAny.validator=b.isFunction(d.allowAny.validator)?d.allowAny.validator:function(g){return true};this.options.allowAny.value=!b.isUndefined(d.allowAny.value)?d.allowAny.value:"";this.options.allowAny.field=b.isUndefined(d.allowAny.field)?{type:"string",value:this.options.allowAny.value}:d.allowAny.field}},renderComponent:function(){var g,f,e,d;this.choicesList=[];g=this.options.choices;for(e=0,f=g.length;e<f;e+=1){this.addChoice(g[e])}if(this.options.allowAny){this.allowAnyChoice=this.addChoice({value:this.options.allowAny.value,label:""});this.radioAny=this.allowAnyChoice.node.firstChild;this.anyField=new a(this.options.allowAny.field);this.anyField.disable();c.one(this.radioAny).setStyle("float","left");c.one(this.anyField.getEl()).setStyle("float","left");if(c.UA.gecko>=1.91){c.one(this.radioAny).setStyle("marginTop","0.2em")}if(this.options.allowAny.separators){d=a.cn("div",null,{marginRight:"3px"},this.options.allowAny.separators[0]||"");c.one(d).setStyle("float","left");this.allowAnyChoice.node.appendChild(d)}this.allowAnyChoice.node.appendChild(this.anyField.getEl());if(this.options.allowAny.separators){d=a.cn("div",null,{marginLeft:"3px"},this.options.allowAny.separators[1]||"");c.one(d).setStyle("float","left");this.allowAnyChoice.node.appendChild(d)}}},initEvents:function(){var e=c.one(this.fieldContainer),d=this;e.delegate(c.UA.ie?"click":"change",function(h,g,f){d.onChange(h)},".inputEx-RadioField-radio","input");e.delegate("focusin",function(h,g,f){d.onFocus(h)},".inputEx-RadioField-radio","input");e.delegate("focusout",function(h,g,f){d.onBlur(h)},".inputEx-RadioField-radio","input");if(this.allowAnyChoice){this.anyField.on("updated",function(g,h){var f=h[0];this.radioAny.value=f;this.setClassFromState();a.RadioField.superclass.onChange.call(this,g)},this,true);if(this.anyField.el){c.one(this.anyField.el).on("blur",this.onBlur,this,true)}}},setSelectedClass:function(){var d,e;for(d=0,e=this.choicesList.length;d<e;d+=1){if(this.choicesList[d].node.firstChild.checked){c.one(this.choicesList[d].node).addClass("inputEx-selected")}else{c.one(this.choicesList[d].node).removeClass("inputEx-selected")}}},setClassFromState:function(){a.RadioField.superclass.setClassFromState.call(this);this.setSelectedClass()},onChange:function(g){var f=g.target._node;if(this.allowAnyChoice){var d=a.indexOf(f,this.choicesList,function(h,e){return h===e.node.firstChild})!==-1&&this.radioAny===f;if(!d){this.anyField.disable()}else{this.anyField.enable();b.later(50,this.anyField,"focus")}}this.setSelectedClass();a.RadioField.superclass.onChange.call(this,g)},getValue:function(){var d,e;for(d=0,e=this.choicesList.length;d<e;d+=1){if(this.choicesList[d].node.firstChild.checked){if(this.radioAny&&this.radioAny==this.choicesList[d].node.firstChild){return this.anyField.getValue()}return this.choicesList[d].value}}return""},setValue:function(j,e){var g=true,d=false,f,h;for(f=0,h=this.choicesList.length;f<h;f+=1){if(j===this.choicesList[f].value&&!d){this.choicesList[f].node.firstChild.checked=true;g=this.radioAny&&(f===h-1)?true:false;d=true}else{this.choicesList[f].node.firstChild.checked=false}}if(this.radioAny){if(g){this.radioAny.checked=true;this.radioAny.value=j;this.anyField.enable();this.anyField.setValue(j,false)}else{this.anyField.disable()}}a.RadioField.superclass.setValue.call(this,j,e)},clear:function(d){if(this.radioAny){this.anyField.setValue(this.options.allowAny.value,false)}a.RadioField.superclass.clear.call(this,d)},isEmpty:function(){var d,e,f;for(d=0,e=this.choicesList.length;d<e;d+=1){f=this.choicesList[d].node.firstChild;if(f.checked){if(this.radioAny&&this.radioAny==f){return this.anyField.getValue()===""}else{return false}}}return true},validate:function(){var d,e,f,g;if(this.options.allowAny){for(d=0,e=this.choicesList.length;d<e;d+=1){f=this.choicesList[d].node.firstChild;if(f.checked){if(this.radioAny&&this.radioAny==f){g=this.anyField.getValue();return this.anyField.validate()&&this.options.allowAny.validator(g)}}}}return true},disable:function(){var d,e;for(d=0,e=this.choicesList.length;d<e;d+=1){this.disableChoice(this.choicesList[d],false)}},enable:function(){var d,e;for(d=0,e=this.choicesList.length;d<e;d+=1){this.enableChoice(this.choicesList[d])}},createChoiceNode:function(d){var h,f,g,e;h=a.cn("div",{className:"inputEx-RadioField-choice"});if(!a.RadioField._idCounter){a.RadioField._idCounter=0}f="_inputex_radioId"+a.RadioField._idCounter;a.RadioField._idCounter++;g=a.cn("input",{id:f,type:"radio",name:this.options.name,value:d.value,className:"inputEx-RadioField-radio"});h.appendChild(g);if(d.label.length>0){e=a.cn("label",{"for":f,className:"inputEx-RadioField-rightLabel"},null,""+d.label);h.appendChild(e)}return h},removeChoiceNode:function(d){this.fieldContainer.removeChild(d)},disableChoiceNode:function(d){d.firstChild.disabled=true},enableChoiceNode:function(d){d.firstChild.disabled=false},appendChoiceNode:function(f,d){var g,e;g=0;for(e=0;e<d;e+=1){if(this.choicesList[e].visible){g+=1}}if(g<this.fieldContainer.childNodes.length){c.one(this.fieldContainer).insertBefore(f,this.fieldContainer.childNodes[g])}else{this.fieldContainer.appendChild(f)}}});c.mix(a.RadioField.prototype,a.mixin.choice);a.registerType("radio",a.RadioField,[{type:"list",name:"choices",label:"Choices",elementType:{type:"group",fields:[{label:"Value",name:"value",value:""},{label:"Label",name:"label"}]},value:[],required:true},{type:"boolean",label:"Allow custom value",name:"allowAny",value:false}])},"3.0.0a",{requires:["selector","event-delegate","inputex-field","inputex-choice","inputex-string"]});
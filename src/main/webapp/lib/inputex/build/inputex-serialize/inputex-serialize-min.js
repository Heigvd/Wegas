YUI.add("inputex-serialize",function(c){var b=c.Lang,a=c.inputEx;a.SerializeField=function(d){a.SerializeField.superclass.constructor.call(this,d)};c.extend(a.SerializeField,a.Field,{setOptions:function(d){a.SerializeField.superclass.setOptions.call(this,d);this.options.className=d.className||"inputEx-SerializedField";this.options.subfield=d.subfield||{type:"string"};this.options.serializer=d.serializer||"json"},renderComponent:function(){this.subfieldWrapper=a.cn("div",{className:"inputEx-SerializedField-SubFieldWrapper"});this.fieldContainer.appendChild(this.subfieldWrapper);var d={parentEl:this.subfieldWrapper};c.mix(d,this.options.subfield);this.subField=a(d,this)},initEvents:function(){a.SerializeField.superclass.initEvents.call(this);this.subField.on("updated",this.fireUpdatedEvt,this,true)},getValue:function(){var d=this.subField.getValue();return this.serialize(d)},setValue:function(f,d){var e=this.deserialize(f);this.subField.setValue(e,d)},serialize:function(d){return a.SerializeField.serializers[this.options.serializer].serialize(d)},deserialize:function(d){return a.SerializeField.serializers[this.options.serializer].deserialize(d)},focus:function(){this.subField.focus()}});a.SerializeField.serializers={json:{serialize:function(d){return c.JSON.stringify(d)},deserialize:function(d){return c.JSON.parse(d)}},xml:{serialize:function(e){if(!XML||!c.Lang.isFunction(XML.ObjTree)){alert("ObjTree.js not loaded.");return null}var d=new XML.ObjTree();return d.writeXML(e)},deserialize:function(f){if(!XML||!c.Lang.isFunction(XML.ObjTree)){alert("ObjTree.js not loaded.");return null}var e=new XML.ObjTree();var d=e.parseXML(f);return d}}};a.registerType("serialize",a.SerializeField,[{type:"type",label:"SubField",name:"subfield"},{type:"select",name:"serializer",label:"Serializer",choices:[{value:"json"},{value:"xml"}],value:"json"}])},"3.0.0a",{requires:["inputex-string","json"]});
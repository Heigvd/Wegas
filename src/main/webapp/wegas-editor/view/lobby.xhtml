<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets">

    <ui:composition template="/wegas-app/view/template/app-default.xhtml">

        <ui:define name="body">
            <script type="text/javascript">
                var Y = YUI().use("wegas-app", "wegas-editor", function (Y) {
                    var cfg = {
                        base : "/Wegas/",
                        layoutSrc: 'wegas-editor/db/wegas-lobby-layout.json',
                        lang : 'en-US',
                        debug : true,
                        dataSources: {
                            "GameModel": {
                                source: "rest/GameModel",
                                plugins: [
                                    {
                                        fn: "DataSourceJSONSchema",
                                        cfg: {
                                            schema: {
                                                resultListLocator: "."
                                                // resultFields: ["name", "id", "@class", "errors"]
                                            }
                                        }
                                    }, {
                                        fn: "GameModelDataSourceREST"
                                    }
                                ]
                            },
                            "Game": {
                                source: "rest/GameModel/1/Game",
                                plugins: [
                                    {
                                        fn: "DataSourceJSONSchema",
                                        cfg: {
                                            schema: {
                                                resultListLocator: "."
                                                // resultFields: ["name", "id", "@class", "errors"]
                                            }
                                        }
                                    }, {
                                        fn: "GameDataSourceREST"
                                    }
                                ]
                            },
                        }
                    };

                    Y.on('domready', function() {                               // When dom is ready,
                        var editor = new Y.Wegas.Editor(cfg);                   // Launch the editor as soon as Dom is ready
                        editor.render();
                    });
                });
            </script>
        </ui:define>
    </ui:composition>
</html>

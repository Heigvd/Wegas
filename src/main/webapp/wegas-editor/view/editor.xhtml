<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets">

    <ui:composition template="/wegas-app/view/template/app-default.xhtml">

        <ui:define name="jsInculde">'wegas-app', 'wegas-editor'</ui:define>

        <ui:define name="layoutUri">wegas-editor/db/wegas-editor-layout.json</ui:define>

        <ui:define name="jsInitMethod">
            var editor = new Y.Wegas.Editor(cfg);                               // Launch the editor as soon as Dom is ready

            Y.Wegas.editor.after("render", function () {
                var gm = Y.Wegas.GameModelFacade.rest.getCurrentGameModel();
                Y.one(".wegas-editor-title").setContent(gm.get("name"));
            })

            editor.render();

            Y.Wegas.GameFacade.after("response", function(e) {                  // Reload the variable descriptors as soon as the game is changed
                Y.Wegas.VariableDescriptorFacade.sendInitialRequest();
            }, this);
        </ui:define>

    </ui:composition>
</html>

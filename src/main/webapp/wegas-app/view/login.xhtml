<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets">

    <ui:composition template="/wegas-app/view/template/app-default.xhtml">

        <ui:define name="head">
            <!-- <link rel="stylesheet" type="text/css" href="/Wegas/wegas-editor/css/wegas-editor.css" />-->
            <style type="text/css">
                .wegas-layout-center {
                    margin: 100px auto !important;
                    position: initial;
                    width: 600px;
                }
                button {
                    margin-left: 136px;
                    margin-top: 10px;
                }
                .wegas-title {
                    border: solid #2647A0;
                    border-width: 0 0 5px;
                    line-height: 1.5em;
                    margin-bottom: 19px;
                }
            </style>
        </ui:define>

        <ui:define name="body">
            <script type="text/javascript">
                var Y = YUI().use( "wegas-app", function (Y) {
                    var cfg = {
                        currentUser: #{requestController.getCurrentUser().toJson()},
                        layoutSrc: 'wegas-app/db/wegas-login-layout.json',
                        dataSources: {
                            "User": {
                                source: "rest/User",
                                plugins: [
                                    {
                                        fn: "DataSourceJSONSchema",
                                        cfg: {
                                            schema: {
                                                resultListLocator: "."
                                            }
                                        }
                                    }, {
                                        fn: "DataSourceREST"
                                    }
                                ]
                            }
                        }
                    };

                    Y.on('domready', function() {                               // When dom is ready,
                        var app = new Y.Wegas.App(cfg);                         // Launch the editor as soon as Dom is ready
                        app.render();
                    });
                });
            </script>

        </ui:define>
    </ui:composition>
</html>

{
    "1": {
        "id": 1,
        "label": "Main layout",
        "type": "List",
        "cssClass": "layout",
        "children": [
            {
                "label": "Menu",
                "type": "List",
                "cssClass": "menu",
                "direction": "horizontal",
                "children": [
                    {
                        "label": "Indicators",
                        "type": "Text",
                        "content": "Programming Game",
                        "cssClass": "title"
                    }, {
                        "type": "VariableDisplay",
                        "label": "Money",
                        "view": "text",
                        "variable": {
                            "name": "money"
                        }
                    }, {
                        "type": "Button",
                        "label": "Battle!",
                        "cssClass": "menu-button",
                        "plugins": [
                            {
                                "fn": "OpenPageAction",
                                "cfg": {
                                    "subpageId": 2,
                                    "targetPageLoaderId": "maindisplayarea"
                                }
                            }
                        ]
                    }, {
                        "type": "Button",
                        "label": "Mails",
                        "cssClass": "menu-button",
                        "plugins": [
                            {
                                "fn": "OpenPageAction",
                                "cfg": {
                                    "subpageId": 5,
                                    "targetPageLoaderId": "maindisplayarea"
                                }
                            }, {
                                "fn": "UnreadCount",
                                "cfg": {
                                    "variable": {
                                        "name": "inbox"
                                    }
                                }
                            }
                        ]
                    }, {
                        "type": "Button",
                        "label": "History",
                        "disabled": true,
                        "cssClass": "menu-button",
                        "plugins": [
                            {
                                "fn": "OpenPageAction",
                                "cfg": {
                                    "subpageId": 3,
                                    "targetPageLoaderId": "maindisplayarea"
                                }
                            }
                        ]
                    }, {
                        "type": "LoginButton",
                        "cssClass": "menu-loginbutton"
                    }
                ]
            }, {
                "type": "PageLoader",
                "pageLoaderId": "maindisplayarea",
                "cssClass": "body",
                "defaultPageId": 2
            }
        ]
    },
    "2": {
        "id": 2,
        "type": "PageLoader",
        "pageLoaderId": "leveldisplay",
        "cssClass": "body",
        "variable": {
            "name": "currentLevel"
        }
    },
    "3": {
        "id": 3,
        "label": "Level 1 - First moves",
        "type": "ProgGameLevel",
        "maxTurns": 1,
        "winningCondition": "level.objects[0].x===level.objects[1].x && level.objects[0].y===level.objects[1].y",
        "onWin": "currentLevel.value=4",
        "cssClass": "wegas-proggame-level",
        "map": [
            ["g", "g", "g", "g", "g"],
            ["g", "g", "g", "g", "g"],
            ["e", "e", "e", "e", "e"],
            ["g", "g", "g", "g", "g"],
            ["g", "g", "g", "g", "g"]
        ],
        "mapObjects": [{
                "name": "g",
                "spriteSheet": "terrain",
                "x": [21, 22, 21],
                "y": [5, 5, 11]
            },{
                "name": "e",
                "spriteSheet": "terrain",
                "x": 17,
                "y": 5
            }],
        "api": [{
                "name": "move"
            }],
        "objects": [{
                "id": "Player",
                "type": "pc",
                "direction": 2,
                "x": 0,
                "y": 2,
                "life": 100,
                "actions": 20,
                "range": 3,
                "spriteSheet": "characters",
                "aptitudes": "move4Direction, shoot, die",
                "sprites": [{
                        "name": "moveUp",
                        "x": 0,
                        "y": 0,
                        "toX": 2
                    }, {
                        "name": "moveRight",
                        "x": 0,
                        "y": 1,
                        "toX": 2
                    }, {
                        "name": "moveDown",
                        "x": 0,
                        "y": 2,
                        "toX": 2
                    }, {
                        "name": "moveLeft",
                        "x": 0,
                        "y": 3,
                        "toX": 2
                    }]
            }, {
                "id": "Enemy",
                "direction": 4,
                "type": "npc",
                "x": 4,
                "y": 2,
                "life": 100,
                "actions": 0,
                "range": 2,
                "collides": false,
                "spriteSheet": "characters",
                "aptitudes": "move4Direction, shoot, die",
                "sprites": [{
                        "name": "moveUp",
                        "x": 9,
                        "y": 0,
                        "toX": 11
                    }, {
                        "name": "moveRight",
                        "x": 9,
                        "y": 1,
                        "toX": 11
                    }, {
                        "name": "moveDown",
                        "x": 9,
                        "y": 2,
                        "toX": 11
                    }, {
                        "name": "moveLeft",
                        "x": 9,
                        "y": 3,
                        "toX": 11
                    }]
            }],
        "plugins": [{
                "fn": "PopupPlg",
                "cfg": {
                    "content": "Bienvenue dans le jeu de la programation. Vous êtes malheureusement coincé à l'intérieur du jeu, et le seul moyen de vous en sortir est de coder vos propres <i>algorightme</i> pour contrôler votre avatar.<div class=\"wegas-proggame-def\">Le mot algorithme est dérivé du nom d'un mathématicien perse qui a vécu au IXème siècle,  Mohammed al-Khwârizmî (en latin Algorismus). Il a proposé un ensemble d'opérations élémentaires à exécuter séquentiellement, pour additionner, soustraire, multiplier et diviser des nombres  décimaux. Voici donc une définition : Un algorithme consiste en la description d'un certain nombre d'opérations élémentaires selon un ordre logique permettant de résoudre un problème sur des données en un nombre fini d'étapes.</div>Pour sortir de ce niveau il faut atteindre la porte de sortie. Vous avez à disposition la fonction <i>move</i> pour l'atteindre: entre simplement le nom de la fonction, suivie de parenthèses et d'un point virgule, comme ceci:<div class=\"wegas-proggame-code\">move();</div>Puis cliquez sur RUN. Vous pouvez appeler plusieurs fois la même fonction."
                }
            }]
    },
    "4": {
        "id": 4,
        "label": "Level 2 - Getting harder",
        "type": "ProgGameLevel",
        "maxTurns": 1,
        "winningCondition": "level.objects[0].x===level.objects[1].x && level.objects[0].y===level.objects[1].y",
        "onWin": "currentLevel.value=5",
        "cssClass": "wegas-proggame-level",
        "map": [
            ["w", "w", "w", "w", "w", "w", "w"],
            ["g", "g", "g", "g", "g", "g", "g"],
            ["g", "g", "e", "e", "e", "g", "g"],
            ["g", "g", "e", "g", "e", "g", "g"],
            ["e", "e", "e", "g", "e", "e", "e"],
            ["g", "g", "e", "g", "e", "g", "g"],
            ["g", "g", "e", "e", "e", "g", "g"],
            ["g", "g", "g", "g", "g", "g", "g"],
            ["w", "w", "w", "w", "w", "w", "w"]
        ],
        "mapObjects": [{
                "name": "g",
                "spriteSheet": "terrain",
                "x": [21, 22, 21],
                "y": [5, 5, 11]
            },{
                "name": "e",
                "spriteSheet": "terrain",
                "x": 17,
                "y": 5
            },{
                "name": "w",
                "spriteSheet": "terrain",
                "x": 21,
                "y": 17
            }],
        "api": [{
                "name": "move"
            }, {
                "name": "rotateLeft"
            }, {
                "name": "rotateRight"
            }],
        "objects": [{
                "id": "Player",
                "type": "pc",
                "direction": 2,
                "x": 1,
                "y": 4,
                "life": 100,
                "actions": 20,
                "range": 3,
                "aptitudes": "move4Direction, shoot, die",
                "spriteSheet": "characters",
                "sprites": [{
                        "name": "moveUp",
                        "x": 0,
                        "y": 0,
                        "toX": 2
                    }, {
                        "name": "moveRight",
                        "x": 0,
                        "y": 1,
                        "toX": 2
                    }, {
                        "name": "moveDown",
                        "x": 0,
                        "y": 2,
                        "toX": 2
                    }, {
                        "name": "moveLeft",
                        "x": 0,
                        "y": 3,
                        "toX": 2
                    }]
            }, {
                "id": "Enemy",
                "direction": 4,
                "type": "npc",
                "x": 5,
                "y": 4,
                "life": 100,
                "actions": 0,
                "range": 2,
                "collides": false,
                "aptitudes": "move4Direction, shoot, die",
                "spriteSheet": "characters",
                "sprites": [{
                        "name": "moveUp",
                        "x": 9,
                        "y": 0,
                        "toX": 11
                    }, {
                        "name": "moveRight",
                        "x": 9,
                        "y": 1,
                        "toX": 11
                    }, {
                        "name": "moveDown",
                        "x": 9,
                        "y": 2,
                        "toX": 11
                    }, {
                        "name": "moveLeft",
                        "x": 9,
                        "y": 3,
                        "toX": 11
                    }]
            }, {
                "id": "Bloc1",
                "type": "other",
                "x": 3,
                "y": 3,
                "spriteSheet": "terrain",
                "sprites": [{
                        "x": 23,
                        "y": 18
                    }]
            }, {
                "id": "Bloc2",
                "type": "other",
                "x": 3,
                "y": 4,
                "spriteSheet": "terrain",
                "sprites": [{
                        "x": 24,
                        "y": 21
                    }]
            }, {
                "id": "Bloc3",
                "type": "other",
                "x": 3,
                "y": 5,
                "spriteSheet": "terrain",
                "sprites": [{
                        "x": 21,
                        "y": 21
                    }]
            }],
        "plugins": [{
                "fn": "PopupPlg",
                "cfg": {
                    "content": "Bien joué! Je vois que la fonction n'a plus de secrets pour vous!<br /><br />Mais ça ne sera pas si façile cette fois, des obstacles se dressent sur votre route. Utilisez les fonctions<i>rotateLeft</i> et <i>rotateRight</i> pour le contourner."
                }
            }]
    },
    "5": {
        "id": 5,
        "type": "InboxDisplay",
        "variable": {
            "name": "inbox"
        }
    }
}

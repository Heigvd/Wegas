{
    "1": {
        "id": 1,
        "label": "Main layout",
        "type": "List",
        "cssClass": "layout",
        "children": [
            {
                "label": "Menu",
                "type": "List",
                "cssClass": "menu",
                "direction": "horizontal",
                "children": [
                    {
                        "label": "Indicators",
                        "type": "Text",
                        "content": "Programming Game",
                        "cssClass": "title"
                    }, {
                        "type": "VariableDisplay",
                        "label": "Money",
                        "view": "text",
                        "variable": {
                            "name": "money"
                        }
                    }, {
                        "type": "Button",
                        "label": "Battle!",
                        "cssClass": "menu-button",
                        "plugins": [
                            {
                                "fn": "OpenPageAction",
                                "cfg": {
                                    "subpageId": 2,
                                    "targetPageLoaderId": "maindisplayarea"
                                }
                            }
                        ]
                    }, {
                        "type": "Button",
                        "label": "Mails",
                        "cssClass": "menu-button",
                        "plugins": [
                            {
                                "fn": "OpenPageAction",
                                "cfg": {
                                    "subpageId": 5,
                                    "targetPageLoaderId": "maindisplayarea"
                                }
                            }, {
                                "fn": "UnreadCount",
                                "cfg": {
                                    "variable": {
                                        "name": "inbox"
                                    }
                                }
                            }
                        ]
                    }, {
                        "type": "Button",
                        "label": "History",
                        "disabled": true,
                        "cssClass": "menu-button",
                        "plugins": [
                            {
                                "fn": "OpenPageAction",
                                "cfg": {
                                    "subpageId": 3,
                                    "targetPageLoaderId": "maindisplayarea"
                                }
                            }
                        ]
                    }, {
                        "type": "LoginButton",
                        "cssClass": "menu-loginbutton"
                    }
                ]
            }, {
                "type": "PageLoader",
                "pageLoaderId": "maindisplayarea",
                "cssClass": "body",
                "defaultPageId": 2
            }
        ]
    },
    "2": {
        "id": 2,
        "type": "PageLoader",
        "pageLoaderId": "leveldisplay",
        "cssClass": "body",
        "variable": {
            "name": "currentLevel"
        }
    },
    "3": {
        "id": 3,
        "label": "Level 1 - First moves",
        "type": "ProgGameLevel",
        "maxTurns": 1,
        "winningCondition": "level.objects[1].life===0",
        "onWin": "currentLevel.value=4",
        "cssClass": "wegas-proggame-level",
        "api": [{
                "name": "move"
            }],
        "map": [
            ["g", "g", "g", "g", "g"],
            ["g", "g", "g", "g", "g"],
            ["e", "e", "e", "e", "e"],
            ["g", "g", "g", "g", "g"],
            ["g", "g", "g", "g", "g"]
        ],
        "api": [{
                "name": "move"
            }, {
                "name": "fire"
            }],
        "objects": [{
                "id": "Player",
                "type": "pc",
                "direction": 2,
                "x": 0,
                "y": 2,
                "life": 100,
                "actions": 20,
                "range": 3
            }, {
                "id": "Enemy",
                "direction": 4,
                "type": "npc",
                "x": 4,
                "y": 2,
                "life": 100,
                "actions": 20,
                "range": 2
            }],
        "plugins": [{
                "fn": "PopupPlg",
                "cfg": {
                    "content": "Bienvenue dans le jeu de la programation. Vous êtes malheureusement coincé à l'intérieur du jeu, et le seul moyen de vous en sortir est de coder vos propres <i>algorightme</i> pour contrôler votre avatar.<div class=\"wegas-proggame-def\">Le mot algorithme est dérivé du nom d'un mathématicien perse qui a vécu au IXème siècle,  Mohammed al-Khwârizmî (en latin Algorismus). Il a proposé un ensemble d'opérations élémentaires à exécuter séquentiellement, pour additionner, soustraire, multiplier et diviser des nombres  décimaux. Voici donc une définition : Un algorithme consiste en la description d'un certain nombre d'opérations élémentaires selon un ordre logique permettant de résoudre un problème sur des données en un nombre fini d'étapes.</div>Pour sortir de ce niveau il faut atteindre la porte de sortie. Vous avez à disposition la fonction <i>move</i> pour l'atteindre: entre simplement le nom de la fonction, suivie de parenthèses et d'un point virgule, comme ceci:<div class=\"wegas-proggame-code\">move();</div>Puis cliquez sur RUN. Vous pouvez appeler plusieurs fois la même fonction."
                }
            }]
    },
    "4": {
        "id": 4,
        "label": "Level 2 - First moves",
        "type": "ProgGameLevel",
        "maxTurns": 2,
        "maxActions": 20,
        "winningCondition": "level.objects[1].life===0",
        "onWin": "currentLevel.value=3;money.value+=500;",
        "cssClass": "wegas-proggame-level",
        "api": [{
                "name": "move"
            }, {
                "name": "fire"
            }],
        "ai": "rotateLeft();\nmove();\nrotateRight();\nmove();\nmove();\nrotateRight();\nmove();\nrotateLeft()",
        "map": [
            ["w", "w", "w", "w", "w", "w", "w", "w", "w"],
            ["g", "g", "g", "g", "g", "g", "g", "g", "g"],
            ["g", "g", "g", "g", "g", "g", "g", "g", "g"],
            ["g", "g", "g", "e", "e", "e", "e", "e", "e"],
            ["e", "e", "e", "e", "g", "g", "g", "g", "g"],
            ["g", "g", "g", "e", "e", "e", "e", "e", "e"],
            ["g", "g", "g", "g", "g", "g", "g", "g", "g"],
            ["g", "g", "g", "g", "g", "g", "g", "g", "g"],
            ["w", "w", "w", "w", "w", "w", "w", "w", "w"]
        ],
        "objects": [
            {
                "id": "Player",
                "type": "pc",
                "direction": 2,
                "x": 0,
                "y": 4,
                "life": 100,
                "actions": 20,
                "range": 2
            }, {
                "id": "Enemy1",
                "type": "npc",
                "direction": 4,
                "x": 8,
                "y": 5,
                "life": 100,
                "actions": 20,
                "range": 4
            }, {
                "id": "Enemy2",
                "type": "npc",
                "direction": 4,
                "x": 8,
                "y": 3,
                "life": 100,
                "actions": 20,
                "range": 2
            }
        ]
    },
    "5": {
        "id": 5,
        "type": "InboxDisplay",
        "variable": {
            "name": "inbox"
        }
    }
}

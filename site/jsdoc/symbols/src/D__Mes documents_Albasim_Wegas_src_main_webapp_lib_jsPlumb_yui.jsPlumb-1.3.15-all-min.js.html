<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"> <style>
	.KEYW {color: #933;}
	.COMM {color: #bbb; font-style: italic;}
	.NUMB {color: #393;}
	.STRN {color: #393;}
	.REGX {color: #339;}
	.line {border-right: 1px dotted #666; color: #666; font-style: normal;}
	</style></head><body><pre><span class='line'>  1</span> <span class="NAME">jsPlumbUtil</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">isArray</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">Object.prototype.toString.call</span><span class="PUNC">(</span><span class="NAME">b</span><span class="PUNC">)</span><span class="PUNC">===</span><span class="STRN">"[object Array]"</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">isString</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">a</span><span class="PUNC">===</span><span class="STRN">"string"</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">isBoolean</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">a</span><span class="PUNC">===</span><span class="STRN">"boolean"</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">isObject</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">Object.prototype.toString.call</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">===</span><span class="STRN">"[object Object]"</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">isDate</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">Object.prototype.toString.call</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">===</span><span class="STRN">"[object Date]"</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">isFunction</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">Object.prototype.toString.call</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">===</span><span class="STRN">"[object Function]"</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">clone</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.isString</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">String</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.isBoolean</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Boolean</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.isDate</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Date</span><span class="PUNC">(</span><span class="NAME">d.getTime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.isFunction</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">d</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.isArray</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">c</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">&lt;</span><span class="NAME">d.length</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">c.push</span><span class="PUNC">(</span><span class="NAME">this.clone</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">c</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.isObject</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">c</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">c</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">this.clone</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">c</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">d</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">merge</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">k</span><span class="PUNC">=</span><span class="NAME">this.clone</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">h</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">k</span><span class="PUNC">[</span><span class="NAME">h</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">||</span><span class="NAME">this.isString</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">[</span><span class="NAME">h</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NAME">this.isBoolean</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">[</span><span class="NAME">h</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">k</span><span class="PUNC">[</span><span class="NAME">h</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">d</span><span class="PUNC">[</span><span class="NAME">h</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.isArray</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">[</span><span class="NAME">h</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NAME">this.isArray</span><span class="PUNC">(</span><span class="NAME">k</span><span class="PUNC">[</span><span class="NAME">h</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">f</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">f.push.apply</span><span class="PUNC">(</span><span class="NAME">f</span><span class="PUNC">,</span><span class="NAME">k</span><span class="PUNC">[</span><span class="NAME">h</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">f.push.apply</span><span class="PUNC">(</span><span class="NAME">f</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">[</span><span class="NAME">h</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">k</span><span class="PUNC">[</span><span class="NAME">h</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">f</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.isObject</span><span class="PUNC">(</span><span class="NAME">k</span><span class="PUNC">[</span><span class="NAME">h</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NAME">this.isObject</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">[</span><span class="NAME">h</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">g</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">d</span><span class="PUNC">[</span><span class="NAME">h</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">k</span><span class="PUNC">[</span><span class="NAME">h</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">g</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">d</span><span class="PUNC">[</span><span class="NAME">h</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">g</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">k</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">convertStyle</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="STRN">"transparent"</span><span class="PUNC">===</span><span class="NAME">b</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">b</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">g</span><span class="PUNC">=</span><span class="NAME">b</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">h.length</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">?</span><span class="STRN">"0"</span><span class="PUNC">+</span><span class="NAME">h</span><span class="PUNC">:</span><span class="NAME">h</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">c</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">f</span><span class="PUNC">(</span><span class="NAME">Number</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">toString</span><span class="PUNC">(</span><span class="NUMB">16</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">=</span><span class="REGX">/(rgb[a]?\()(.*)(\))/</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">b.match</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">b.match</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">split</span><span class="PUNC">(</span><span class="STRN">","</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">g</span><span class="PUNC">=</span><span class="STRN">"#"</span><span class="PUNC">+</span><span class="NAME">c</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">c</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">c</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">a</span><span class="PUNC">&&</span><span class="NAME">e.length</span><span class="PUNC">==</span><span class="NUMB">4</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">g</span><span class="PUNC">=</span><span class="NAME">g</span><span class="PUNC">+</span><span class="NAME">c</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">g</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">gradient</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">b</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.isArray</span><span class="PUNC">(</span><span class="NAME">b</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NAME">b</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NAME">b.x</span><span class="PUNC">,</span><span class="NAME">b.y</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.isArray</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NAME">a</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NAME">a.x</span><span class="PUNC">,</span><span class="NAME">a.y</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">b</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">b</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">normal</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">/</span><span class="NAME">jsPlumbUtil.gradient</span><span class="PUNC">(</span><span class="NAME">b</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">lineLength</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">b</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.isArray</span><span class="PUNC">(</span><span class="NAME">b</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NAME">b</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NAME">b.x</span><span class="PUNC">,</span><span class="NAME">b.y</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.isArray</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NAME">a</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NAME">a.x</span><span class="PUNC">,</span><span class="NAME">a.y</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">Math.sqrt</span><span class="PUNC">(</span><span class="NAME">Math.pow</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">b</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">Math.pow</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">b</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">segment</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">b</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.isArray</span><span class="PUNC">(</span><span class="NAME">b</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NAME">b</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NAME">b.x</span><span class="PUNC">,</span><span class="NAME">b.y</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.isArray</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NAME">a</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NAME">a.x</span><span class="PUNC">,</span><span class="NAME">a.y</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">></span><span class="NAME">b</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">></span><span class="NAME">b</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NUMB">2</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">></span><span class="NAME">b</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NUMB">3</span><span class="PUNC">:</span><span class="NUMB">4</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">intersects</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">f</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">c</span><span class="PUNC">=</span><span class="NAME">f.x</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">f.x</span><span class="PUNC">+</span><span class="NAME">f.w</span><span class="PUNC">,</span><span class="NAME">k</span><span class="PUNC">=</span><span class="NAME">f.y</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">f.y</span><span class="PUNC">+</span><span class="NAME">f.h</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">=</span><span class="NAME">e.x</span><span class="PUNC">,</span><span class="NAME">b</span><span class="PUNC">=</span><span class="NAME">e.x</span><span class="PUNC">+</span><span class="NAME">e.w</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">e.y</span><span class="PUNC">,</span><span class="NAME">g</span><span class="PUNC">=</span><span class="NAME">e.y</span><span class="PUNC">+</span><span class="NAME">e.h</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">c</span><span class="PUNC">&lt;=</span><span class="NAME">d</span><span class="PUNC">&&</span><span class="NAME">d</span><span class="PUNC">&lt;=</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">k</span><span class="PUNC">&lt;=</span><span class="NAME">i</span><span class="PUNC">&&</span><span class="NAME">i</span><span class="PUNC">&lt;=</span><span class="NAME">h</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">c</span><span class="PUNC">&lt;=</span><span class="NAME">b</span><span class="PUNC">&&</span><span class="NAME">b</span><span class="PUNC">&lt;=</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">k</span><span class="PUNC">&lt;=</span><span class="NAME">i</span><span class="PUNC">&&</span><span class="NAME">i</span><span class="PUNC">&lt;=</span><span class="NAME">h</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">c</span><span class="PUNC">&lt;=</span><span class="NAME">d</span><span class="PUNC">&&</span><span class="NAME">d</span><span class="PUNC">&lt;=</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">k</span><span class="PUNC">&lt;=</span><span class="NAME">g</span><span class="PUNC">&&</span><span class="NAME">g</span><span class="PUNC">&lt;=</span><span class="NAME">h</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">c</span><span class="PUNC">&lt;=</span><span class="NAME">b</span><span class="PUNC">&&</span><span class="NAME">d</span><span class="PUNC">&lt;=</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">k</span><span class="PUNC">&lt;=</span><span class="NAME">g</span><span class="PUNC">&&</span><span class="NAME">g</span><span class="PUNC">&lt;=</span><span class="NAME">h</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">&lt;=</span><span class="NAME">c</span><span class="PUNC">&&</span><span class="NAME">c</span><span class="PUNC">&lt;=</span><span class="NAME">b</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">&lt;=</span><span class="NAME">k</span><span class="PUNC">&&</span><span class="NAME">k</span><span class="PUNC">&lt;=</span><span class="NAME">g</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">&lt;=</span><span class="NAME">a</span><span class="PUNC">&&</span><span class="NAME">a</span><span class="PUNC">&lt;=</span><span class="NAME">b</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">&lt;=</span><span class="NAME">k</span><span class="PUNC">&&</span><span class="NAME">k</span><span class="PUNC">&lt;=</span><span class="NAME">g</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">&lt;=</span><span class="NAME">c</span><span class="PUNC">&&</span><span class="NAME">c</span><span class="PUNC">&lt;=</span><span class="NAME">b</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">&lt;=</span><span class="NAME">h</span><span class="PUNC">&&</span><span class="NAME">h</span><span class="PUNC">&lt;=</span><span class="NAME">g</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">&lt;=</span><span class="NAME">a</span><span class="PUNC">&&</span><span class="NAME">c</span><span class="PUNC">&lt;=</span><span class="NAME">b</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">&lt;=</span><span class="NAME">h</span><span class="PUNC">&&</span><span class="NAME">h</span><span class="PUNC">&lt;=</span><span class="NAME">g</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">segmentMultipliers</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">inverseSegmentMultipliers</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">pointOnLine</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">b</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">d</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.gradient</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.segment</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">b</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">?</span><span class="NAME">jsPlumbUtil.segmentMultipliers</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="NAME">jsPlumbUtil.inverseSegmentMultipliers</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">c</span><span class="PUNC">=</span><span class="NAME">Math.atan</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">=</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">b</span><span class="PUNC">*</span><span class="NAME">Math.sin</span><span class="PUNC">(</span><span class="NAME">c</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">h</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">g</span><span class="PUNC">=</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">b</span><span class="PUNC">*</span><span class="NAME">Math.cos</span><span class="PUNC">(</span><span class="NAME">c</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">h</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">:</span><span class="NAME">a.x</span><span class="PUNC">+</span><span class="NAME">g</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">:</span><span class="NAME">a.y</span><span class="PUNC">+</span><span class="NAME">f</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">perpendicularLineTo</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">c</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.gradient</span><span class="PUNC">(</span><span class="NAME">c</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">=</span><span class="NAME">Math.atan</span><span class="PUNC">(</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">/</span><span class="NAME">b</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">g</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">Math.sin</span><span class="PUNC">(</span><span class="NAME">f</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">Math.cos</span><span class="PUNC">(</span><span class="NAME">f</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">:</span><span class="NAME">d.x</span><span class="PUNC">+</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">:</span><span class="NAME">d.y</span><span class="PUNC">+</span><span class="NAME">g</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">:</span><span class="NAME">d.x</span><span class="PUNC">-</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">:</span><span class="NAME">d.y</span><span class="PUNC">-</span><span class="NAME">g</span><span class="PUNC">}</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">findWithFunction</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">b</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">c</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">c</span><span class="PUNC">&lt;</span><span class="NAME">b.length</span><span class="PUNC">;</span><span class="NAME">c</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">(</span><span class="NAME">b</span><span class="PUNC">[</span><span class="NAME">c</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">c</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">indexOf</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">b</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">jsPlumbUtil.findWithFunction</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">c</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">c</span><span class="PUNC">==</span><span class="NAME">b</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">removeWithFunction</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">c</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.findWithFunction</span><span class="PUNC">(</span><span class="NAME">c</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">b</span><span class="PUNC">></span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">c.splice</span><span class="PUNC">(</span><span class="NAME">b</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">b</span><span class="PUNC">!=</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">remove</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b</span><span class="PUNC">,</span><span class="NAME">c</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.indexOf</span><span class="PUNC">(</span><span class="NAME">b</span><span class="PUNC">,</span><span class="NAME">c</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">></span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">b.splice</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">a</span><span class="PUNC">!=</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">addWithFunction</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">c</span><span class="PUNC">,</span><span class="NAME">b</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">jsPlumbUtil.findWithFunction</span><span class="PUNC">(</span><span class="NAME">c</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">==</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">c.push</span><span class="PUNC">(</span><span class="NAME">b</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">addToList</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">,</span><span class="NAME">b</span><span class="PUNC">,</span><span class="NAME">c</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">a</span><span class="PUNC">=</span><span class="NAME">d</span><span class="PUNC">[</span><span class="NAME">b</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">a</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">[</span><span class="NAME">b</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">a</span><span class="PUNC">}</span><span class="NAME">a.push</span><span class="PUNC">(</span><span class="NAME">c</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">a</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">EventGenerator</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">c</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">b</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">a</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="STRN">"ready"</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">this.bind</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">jsPlumbUtil.addToList</span><span class="PUNC">(</span><span class="NAME">c</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">b</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.fire</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">g</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">c</span><span class="PUNC">[</span><span class="NAME">g</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">f</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">f</span><span class="PUNC">&lt;</span><span class="NAME">c</span><span class="PUNC">[</span><span class="NAME">g</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">length</span><span class="PUNC">;</span><span class="NAME">f</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">jsPlumbUtil.findWithFunction</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">===</span><span class="NAME">g</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">!=</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">c</span><span class="PUNC">[</span><span class="NAME">g</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">f</span><span class="PUNC">]</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">try</span><span class="PUNC">{</span><span class="NAME">c</span><span class="PUNC">[</span><span class="NAME">g</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">f</span><span class="PUNC">]</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">catch</span><span class="PUNC">(</span><span class="NAME">k</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">jsPlumbUtil.log</span><span class="PUNC">(</span><span class="STRN">"jsPlumb: fire failed for event "</span><span class="PUNC">+</span><span class="NAME">g</span><span class="PUNC">+</span><span class="STRN">" : "</span><span class="PUNC">+</span><span class="NAME">k</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">b</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.unbind</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">c</span><span class="PUNC">[</span><span class="NAME">d</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">c</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">b</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getListener</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">c</span><span class="PUNC">[</span><span class="NAME">d</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">logEnabled</span><span class="PUNC">:</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="NAME">log</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">jsPlumbUtil.logEnabled</span><span class="PUNC">&&</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">console</span><span class="PUNC">!=</span><span class="STRN">"undefined"</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">try</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b</span><span class="PUNC">=</span><span class="NAME">arguments</span><span class="PUNC">[</span><span class="NAME">arguments.length</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">console.log</span><span class="PUNC">(</span><span class="NAME">b</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">catch</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">group</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">jsPlumbUtil.logEnabled</span><span class="PUNC">&&</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">console</span><span class="PUNC">!=</span><span class="STRN">"undefined"</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">console.group</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">groupEnd</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">jsPlumbUtil.logEnabled</span><span class="PUNC">&&</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">console</span><span class="PUNC">!=</span><span class="STRN">"undefined"</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">console.groupEnd</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">time</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">jsPlumbUtil.logEnabled</span><span class="PUNC">&&</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">console</span><span class="PUNC">!=</span><span class="STRN">"undefined"</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">console.time</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">timeEnd</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">jsPlumbUtil.logEnabled</span><span class="PUNC">&&</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">console</span><span class="PUNC">!=</span><span class="STRN">"undefined"</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">console.timeEnd</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="PUNC">!</span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"canvas"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getContext</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="PUNC">!</span><span class="NAME">window.SVGAngle</span><span class="PUNC">||</span><span class="NAME">document.implementation.hasFeature</span><span class="PUNC">(</span><span class="STRN">"http://www.w3.org/TR/SVG11/feature#BasicStructure"</span><span class="PUNC">,</span><span class="STRN">"1.1"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">d.vml</span><span class="PUNC">==</span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">f</span><span class="PUNC">=</span><span class="NAME">document.body.appendChild</span><span class="PUNC">(</span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">f.innerHTML</span><span class="PUNC">=</span><span class="STRN">'&lt;v:shape id="vml_flag1" adj="1" />'</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">f.firstChild</span><span class="PUNC">;</span><span class="NAME">e.style.behavior</span><span class="PUNC">=</span><span class="STRN">"url(#default#VML)"</span><span class="PUNC">;</span><span class="NAME">d.vml</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">?</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">e.adj</span><span class="PUNC">==</span><span class="STRN">"object"</span><span class="PUNC">:</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="NAME">f.parentNode.removeChild</span><span class="PUNC">(</span><span class="NAME">f</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">d.vml</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">c</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">h</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">g</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.register</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">m</span><span class="PUNC">=</span><span class="NAME">jsPlumb.CurrentLibrary</span><span class="PUNC">;</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">m.getElementObject</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">p</span><span class="PUNC">=</span><span class="NAME">i.getId</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">m.getDOMElement</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">k</span><span class="PUNC">=</span><span class="NAME">m.getOffset</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">h</span><span class="PUNC">[</span><span class="NAME">p</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">h</span><span class="PUNC">[</span><span class="NAME">p</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">;</span><span class="NAME">g.push</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">f</span><span class="PUNC">[</span><span class="NAME">p</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">o</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">&lt;</span><span class="NAME">u.childNodes.length</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">u.childNodes</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">nodeType</span><span class="PUNC">!=</span><span class="NUMB">3</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">m.getElementObject</span><span class="PUNC">(</span><span class="NAME">u.childNodes</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">=</span><span class="NAME">i.getId</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">&&</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NAME">v</span><span class="PUNC">]</span><span class="PUNC">&&</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NAME">v</span><span class="PUNC">]</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">m.getOffset</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">f</span><span class="PUNC">[</span><span class="NAME">p</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">v</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">id</span><span class="PUNC">:</span><span class="NAME">v</span><span class="PUNC">,</span><span class="NAME">offset</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">left</span><span class="PUNC">:</span><span class="NAME">s.left</span><span class="PUNC">-</span><span class="NAME">k.left</span><span class="PUNC">,</span><span class="NAME">top</span><span class="PUNC">:</span><span class="NAME">s.top</span><span class="PUNC">-</span><span class="NAME">k.top</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="NAME">o</span><span class="PUNC">(</span><span class="NAME">u.childNodes</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">o</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.endpointAdded</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">jsPlumb.CurrentLibrary</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">document.body</span><span class="PUNC">,</span><span class="NAME">k</span><span class="PUNC">=</span><span class="NAME">i.getId</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">r.getDOMElement</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">t.parentNode</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">l</span><span class="PUNC">==</span><span class="NAME">u</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NAME">k</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NAME">k</span><span class="PUNC">]</span><span class="PUNC">?</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NAME">k</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="KEYW">while</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">!=</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">q</span><span class="PUNC">=</span><span class="NAME">i.getId</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">,</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">q</span><span class="PUNC">&&</span><span class="NAME">h</span><span class="PUNC">[</span><span class="NAME">q</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">w</span><span class="PUNC">=</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">r.getElementObject</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">r.getOffset</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">f</span><span class="PUNC">[</span><span class="NAME">q</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">k</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">v</span><span class="PUNC">=</span><span class="NAME">jsPlumb.CurrentLibrary.getOffset</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">f</span><span class="PUNC">[</span><span class="NAME">q</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">k</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">id</span><span class="PUNC">:</span><span class="NAME">k</span><span class="PUNC">,</span><span class="NAME">offset</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">left</span><span class="PUNC">:</span><span class="NAME">v.left</span><span class="PUNC">-</span><span class="NAME">n.left</span><span class="PUNC">,</span><span class="NAME">top</span><span class="PUNC">:</span><span class="NAME">v.top</span><span class="PUNC">-</span><span class="NAME">n.top</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">break</span><span class="PUNC">}</span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">l.parentNode</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.endpointDeleted</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NAME">l.elementId</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NAME">l.elementId</span><span class="PUNC">]</span><span class="PUNC">--</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NAME">l.elementId</span><span class="PUNC">]</span><span class="PUNC">&lt;=</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">k</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">f</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">f</span><span class="PUNC">[</span><span class="NAME">k</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">l.elementId</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getElementsForDraggable</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">k</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">f</span><span class="PUNC">[</span><span class="NAME">k</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.reset</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">h</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">g</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">f</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">window.console</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">window.console</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">time</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">timeEnd</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">group</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">groupEnd</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">log</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="NAME">window.jsPlumbAdapter</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">headless</span><span class="PUNC">:</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="NAME">appendToRoot</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">document.body.appendChild</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getRenderModes</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="STRN">"canvas"</span><span class="PUNC">,</span><span class="STRN">"svg"</span><span class="PUNC">,</span><span class="STRN">"vml"</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">isRenderModeAvailable</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">{</span><span class="NAME">canvas</span><span class="PUNC">:</span><span class="NAME">b</span><span class="PUNC">,</span><span class="NAME">svg</span><span class="PUNC">:</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">vml</span><span class="PUNC">:</span><span class="NAME">d</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getDragManager</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">c</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setRenderMode</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">h</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">i.toLowerCase</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">f</span><span class="PUNC">=</span><span class="NAME">this.isRenderModeAvailable</span><span class="PUNC">(</span><span class="STRN">"canvas"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">this.isRenderModeAvailable</span><span class="PUNC">(</span><span class="STRN">"svg"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">g</span><span class="PUNC">=</span><span class="NAME">this.isRenderModeAvailable</span><span class="PUNC">(</span><span class="STRN">"vml"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">===</span><span class="STRN">"svg"</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">h</span><span class="PUNC">=</span><span class="STRN">"svg"</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">f</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">h</span><span class="PUNC">=</span><span class="STRN">"canvas"</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">g</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">h</span><span class="PUNC">=</span><span class="STRN">"vml"</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">===</span><span class="STRN">"canvas"</span><span class="PUNC">&&</span><span class="NAME">f</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">h</span><span class="PUNC">=</span><span class="STRN">"canvas"</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">g</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">h</span><span class="PUNC">=</span><span class="STRN">"vml"</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">h</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">g</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.findWithFunction</span><span class="PUNC">,</span><span class="NAME">G</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.indexOf</span><span class="PUNC">,</span><span class="NAME">A</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.removeWithFunction</span><span class="PUNC">,</span><span class="NAME">k</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.remove</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.addWithFunction</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.addToList</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.isArray</span><span class="PUNC">,</span><span class="NAME">z</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.isString</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.isObject</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">v</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">c</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">H</span><span class="PUNC">,</span><span class="NAME">I</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">n.CurrentLibrary.getAttribute</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">H</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">I</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">,</span><span class="NAME">J</span><span class="PUNC">,</span><span class="NAME">H</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">n.CurrentLibrary.setAttribute</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">J</span><span class="PUNC">,</span><span class="NAME">H</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">,</span><span class="NAME">H</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">n.CurrentLibrary.addClass</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">H</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">,</span><span class="NAME">H</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">n.CurrentLibrary.hasClass</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">H</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">m</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">,</span><span class="NAME">H</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">n.CurrentLibrary.removeClass</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">H</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">C</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">H</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">n.CurrentLibrary.getElementObject</span><span class="PUNC">(</span><span class="NAME">H</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">,</span><span class="NAME">H</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">K</span><span class="PUNC">=</span><span class="NAME">n.CurrentLibrary.getOffset</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">H</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">J</span><span class="PUNC">=</span><span class="NAME">H.getZoom</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">{</span><span class="NAME">left</span><span class="PUNC">:</span><span class="NAME">K.left</span><span class="PUNC">/</span><span class="NAME">J</span><span class="PUNC">,</span><span class="NAME">top</span><span class="PUNC">:</span><span class="NAME">K.top</span><span class="PUNC">/</span><span class="NAME">J</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">K</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">H</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">n.CurrentLibrary.getSize</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">H</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.log</span><span class="PUNC">,</span><span class="NAME">F</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.group</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.groupEnd</span><span class="PUNC">,</span><span class="NAME">E</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.time</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.timeEnd</span><span class="PUNC">,</span><span class="NAME">p</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="STRN">""</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Date</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getTime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">B</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">aa</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">U</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">ab</span><span class="PUNC">=</span><span class="NAME">arguments</span><span class="PUNC">,</span><span class="NAME">S</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="NAME">M</span><span class="PUNC">=</span><span class="NAME">aa.parameters</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">K</span><span class="PUNC">=</span><span class="NAME">U.idPrefix</span><span class="PUNC">,</span><span class="NAME">X</span><span class="PUNC">=</span><span class="NAME">K</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Date</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getTime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">W</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">ac</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="NAME">U._jsPlumb</span><span class="PUNC">=</span><span class="NAME">aa._jsPlumb</span><span class="PUNC">;</span><span class="NAME">U.getId</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">X</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">U.tooltip</span><span class="PUNC">=</span><span class="NAME">aa.tooltip</span><span class="PUNC">;</span><span class="NAME">U.hoverClass</span><span class="PUNC">=</span><span class="NAME">aa.hoverClass</span><span class="PUNC">||</span><span class="NAME">U._jsPlumb.Defaults.HoverClass</span><span class="PUNC">||</span><span class="NAME">n.Defaults.HoverClass</span><span class="PUNC">;</span><span class="NAME">jsPlumbUtil.EventGenerator.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.clone</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ad</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Object</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">U.constructor.apply</span><span class="PUNC">(</span><span class="NAME">ad</span><span class="PUNC">,</span><span class="NAME">ab</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">ad</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getParameter</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">ad</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">M</span><span class="PUNC">[</span><span class="NAME">ad</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">this.getParameters</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">M</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">this.setParameter</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">ad</span><span class="PUNC">,</span><span class="NAME">ae</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">M</span><span class="PUNC">[</span><span class="NAME">ad</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">ae</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">this.setParameters</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">ad</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">M</span><span class="PUNC">=</span><span class="NAME">ad</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">this.overlayPlacements</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">L</span><span class="PUNC">=</span><span class="NAME">aa.beforeDetach</span><span class="PUNC">;</span><span class="NAME">this.isDetachAllowed</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">ad</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ae</span><span class="PUNC">=</span><span class="NAME">U._jsPlumb.checkCondition</span><span class="PUNC">(</span><span class="STRN">"beforeDetach"</span><span class="PUNC">,</span><span class="NAME">ad</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">L</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">try</span><span class="PUNC">{</span><span class="NAME">ae</span><span class="PUNC">=</span><span class="NAME">L</span><span class="PUNC">(</span><span class="NAME">ad</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">catch</span><span class="PUNC">(</span><span class="NAME">af</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o</span><span class="PUNC">(</span><span class="STRN">"jsPlumb: beforeDetach callback failed"</span><span class="PUNC">,</span><span class="NAME">af</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">ae</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">O</span><span class="PUNC">=</span><span class="NAME">aa.beforeDrop</span><span class="PUNC">;</span><span class="NAME">this.isDropAllowed</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">ai</span><span class="PUNC">,</span><span class="NAME">af</span><span class="PUNC">,</span><span class="NAME">ag</span><span class="PUNC">,</span><span class="NAME">ad</span><span class="PUNC">,</span><span class="NAME">ae</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ah</span><span class="PUNC">=</span><span class="NAME">U._jsPlumb.checkCondition</span><span class="PUNC">(</span><span class="STRN">"beforeDrop"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">sourceId</span><span class="PUNC">:</span><span class="NAME">ai</span><span class="PUNC">,</span><span class="NAME">targetId</span><span class="PUNC">:</span><span class="NAME">af</span><span class="PUNC">,</span><span class="NAME">scope</span><span class="PUNC">:</span><span class="NAME">ag</span><span class="PUNC">,</span><span class="NAME">connection</span><span class="PUNC">:</span><span class="NAME">ad</span><span class="PUNC">,</span><span class="NAME">dropEndpoint</span><span class="PUNC">:</span><span class="NAME">ae</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">O</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">try</span><span class="PUNC">{</span><span class="NAME">ah</span><span class="PUNC">=</span><span class="NAME">O</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">sourceId</span><span class="PUNC">:</span><span class="NAME">ai</span><span class="PUNC">,</span><span class="NAME">targetId</span><span class="PUNC">:</span><span class="NAME">af</span><span class="PUNC">,</span><span class="NAME">scope</span><span class="PUNC">:</span><span class="NAME">ag</span><span class="PUNC">,</span><span class="NAME">connection</span><span class="PUNC">:</span><span class="NAME">ad</span><span class="PUNC">,</span><span class="NAME">dropEndpoint</span><span class="PUNC">:</span><span class="NAME">ae</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">catch</span><span class="PUNC">(</span><span class="NAME">aj</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o</span><span class="PUNC">(</span><span class="STRN">"jsPlumb: beforeDrop callback failed"</span><span class="PUNC">,</span><span class="NAME">aj</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">ah</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">Y</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">W</span><span class="PUNC">&&</span><span class="NAME">ac</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ad</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">n.extend</span><span class="PUNC">(</span><span class="NAME">ad</span><span class="PUNC">,</span><span class="NAME">W</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n.extend</span><span class="PUNC">(</span><span class="NAME">ad</span><span class="PUNC">,</span><span class="NAME">ac</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">U.hoverPaintStyle</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">ad.gradient</span><span class="PUNC">&&</span><span class="NAME">W.fillStyle</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">ad.gradient</span><span class="PUNC">}</span><span class="NAME">ac</span><span class="PUNC">=</span><span class="NAME">ad</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.setPaintStyle</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">ad</span><span class="PUNC">,</span><span class="NAME">ae</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">W</span><span class="PUNC">=</span><span class="NAME">ad</span><span class="PUNC">;</span><span class="NAME">U.paintStyleInUse</span><span class="PUNC">=</span><span class="NAME">W</span><span class="PUNC">;</span><span class="NAME">Y</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">ae</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">U.repaint</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getPaintStyle</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">W</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.setHoverPaintStyle</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">ad</span><span class="PUNC">,</span><span class="NAME">ae</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">ac</span><span class="PUNC">=</span><span class="NAME">ad</span><span class="PUNC">;</span><span class="NAME">Y</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">ae</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">U.repaint</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getHoverPaintStyle</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">ac</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.setHover</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">ad</span><span class="PUNC">,</span><span class="NAME">af</span><span class="PUNC">,</span><span class="NAME">ae</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">U._jsPlumb.currentlyDragging</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">U._jsPlumb.isHoverSuspended</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">S</span><span class="PUNC">=</span><span class="NAME">ad</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">U.hoverClass</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">&&</span><span class="NAME">U.canvas</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">ad</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">J.addClass</span><span class="PUNC">(</span><span class="NAME">U.canvas</span><span class="PUNC">,</span><span class="NAME">U.hoverClass</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">J.removeClass</span><span class="PUNC">(</span><span class="NAME">U.canvas</span><span class="PUNC">,</span><span class="NAME">U.hoverClass</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">ac</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">U.paintStyleInUse</span><span class="PUNC">=</span><span class="NAME">ad</span><span class="PUNC">?</span><span class="NAME">ac</span><span class="PUNC">:</span><span class="NAME">W</span><span class="PUNC">;</span><span class="NAME">ae</span><span class="PUNC">=</span><span class="NAME">ae</span><span class="PUNC">||</span><span class="NAME">p</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">U.repaint</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">timestamp</span><span class="PUNC">:</span><span class="NAME">ae</span><span class="PUNC">,</span><span class="NAME">recalc</span><span class="PUNC">:</span><span class="KEYW">false</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">U.getAttachedElements</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">af</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">Z</span><span class="PUNC">(</span><span class="NAME">ad</span><span class="PUNC">,</span><span class="NAME">p</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">U</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.isHover</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">S</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">V</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="NAME">this.setZIndex</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">ad</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">V</span><span class="PUNC">=</span><span class="NAME">ad</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getZIndex</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">V</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">J</span><span class="PUNC">=</span><span class="NAME">n.CurrentLibrary</span><span class="PUNC">,</span><span class="NAME">I</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="STRN">"click"</span><span class="PUNC">,</span><span class="STRN">"dblclick"</span><span class="PUNC">,</span><span class="STRN">"mouseenter"</span><span class="PUNC">,</span><span class="STRN">"mouseout"</span><span class="PUNC">,</span><span class="STRN">"mousemove"</span><span class="PUNC">,</span><span class="STRN">"mousedown"</span><span class="PUNC">,</span><span class="STRN">"mouseup"</span><span class="PUNC">,</span><span class="STRN">"contextmenu"</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">T</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">mouseout</span><span class="PUNC">:</span><span class="STRN">"mouseexit"</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">N</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">af</span><span class="PUNC">,</span><span class="NAME">ag</span><span class="PUNC">,</span><span class="NAME">ae</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ad</span><span class="PUNC">=</span><span class="NAME">T</span><span class="PUNC">[</span><span class="NAME">ae</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="NAME">ae</span><span class="PUNC">;</span><span class="NAME">J.bind</span><span class="PUNC">(</span><span class="NAME">af</span><span class="PUNC">,</span><span class="NAME">ae</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">ah</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">ag.fire</span><span class="PUNC">(</span><span class="NAME">ad</span><span class="PUNC">,</span><span class="NAME">ag</span><span class="PUNC">,</span><span class="NAME">ah</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">R</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">af</span><span class="PUNC">,</span><span class="NAME">ae</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ad</span><span class="PUNC">=</span><span class="NAME">T</span><span class="PUNC">[</span><span class="NAME">ae</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="NAME">ae</span><span class="PUNC">;</span><span class="NAME">J.unbind</span><span class="PUNC">(</span><span class="NAME">af</span><span class="PUNC">,</span><span class="NAME">ae</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.attachListeners</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">ae</span><span class="PUNC">,</span><span class="NAME">af</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ad</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">ad</span><span class="PUNC">&lt;</span><span class="NAME">I.length</span><span class="PUNC">;</span><span class="NAME">ad</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">N</span><span class="PUNC">(</span><span class="NAME">ae</span><span class="PUNC">,</span><span class="NAME">af</span><span class="PUNC">,</span><span class="NAME">I</span><span class="PUNC">[</span><span class="NAME">ad</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">Z</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">ah</span><span class="PUNC">,</span><span class="NAME">ag</span><span class="PUNC">,</span><span class="NAME">ad</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">af</span><span class="PUNC">=</span><span class="NAME">U.getAttachedElements</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">af</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ae</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">ae</span><span class="PUNC">&lt;</span><span class="NAME">af.length</span><span class="PUNC">;</span><span class="NAME">ae</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">ad</span><span class="PUNC">||</span><span class="NAME">ad</span><span class="PUNC">!=</span><span class="NAME">af</span><span class="PUNC">[</span><span class="NAME">ae</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">af</span><span class="PUNC">[</span><span class="NAME">ae</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">setHover</span><span class="PUNC">(</span><span class="NAME">ah</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="NAME">ag</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.reattachListenersForElement</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">ae</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">arguments.length</span><span class="PUNC">></span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ad</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">ad</span><span class="PUNC">&lt;</span><span class="NAME">I.length</span><span class="PUNC">;</span><span class="NAME">ad</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">R</span><span class="PUNC">(</span><span class="NAME">ae</span><span class="PUNC">,</span><span class="NAME">I</span><span class="PUNC">[</span><span class="NAME">ad</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ad</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NAME">ad</span><span class="PUNC">&lt;</span><span class="NAME">arguments.length</span><span class="PUNC">;</span><span class="NAME">ad</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">U.attachListeners</span><span class="PUNC">(</span><span class="NAME">ae</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">[</span><span class="NAME">ad</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">H</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">P</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">ad</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">ad</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">?</span><span class="KEYW">null</span><span class="PUNC">:</span><span class="NAME">ad.split</span><span class="PUNC">(</span><span class="STRN">" "</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">Q</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">ae</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">U.getDefaultType</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ag</span><span class="PUNC">=</span><span class="NAME">U.getTypeDescriptor</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">af</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.merge</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">U.getDefaultType</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ad</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">ad</span><span class="PUNC">&lt;</span><span class="NAME">H.length</span><span class="PUNC">;</span><span class="NAME">ad</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">af</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.merge</span><span class="PUNC">(</span><span class="NAME">af</span><span class="PUNC">,</span><span class="NAME">U._jsPlumb.getType</span><span class="PUNC">(</span><span class="NAME">H</span><span class="PUNC">[</span><span class="NAME">ad</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">ag</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">U.applyType</span><span class="PUNC">(</span><span class="NAME">af</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">ae</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">U.repaint</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">U.setType</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">ad</span><span class="PUNC">,</span><span class="NAME">ae</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">H</span><span class="PUNC">=</span><span class="NAME">P</span><span class="PUNC">(</span><span class="NAME">ad</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">Q</span><span class="PUNC">(</span><span class="NAME">ae</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">U.getType</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">H</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">U.hasType</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">ad</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">jsPlumbUtil.indexOf</span><span class="PUNC">(</span><span class="NAME">H</span><span class="PUNC">,</span><span class="NAME">ad</span><span class="PUNC">)</span><span class="PUNC">!=</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">U.addType</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">af</span><span class="PUNC">,</span><span class="NAME">ag</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ae</span><span class="PUNC">=</span><span class="NAME">P</span><span class="PUNC">(</span><span class="NAME">af</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">ah</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">ae</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ad</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">ad</span><span class="PUNC">&lt;</span><span class="NAME">ae.length</span><span class="PUNC">;</span><span class="NAME">ad</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">U.hasType</span><span class="PUNC">(</span><span class="NAME">ae</span><span class="PUNC">[</span><span class="NAME">ad</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">H.push</span><span class="PUNC">(</span><span class="NAME">ae</span><span class="PUNC">[</span><span class="NAME">ad</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">ah</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">ah</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">Q</span><span class="PUNC">(</span><span class="NAME">ag</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">U.removeType</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">ag</span><span class="PUNC">,</span><span class="NAME">ah</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ae</span><span class="PUNC">=</span><span class="NAME">P</span><span class="PUNC">(</span><span class="NAME">ag</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">ai</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="NAME">af</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">ak</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">aj</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.indexOf</span><span class="PUNC">(</span><span class="NAME">H</span><span class="PUNC">,</span><span class="NAME">ak</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">aj</span><span class="PUNC">!=</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">H.splice</span><span class="PUNC">(</span><span class="NAME">aj</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">ae</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ad</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">ad</span><span class="PUNC">&lt;</span><span class="NAME">ae.length</span><span class="PUNC">;</span><span class="NAME">ad</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">ai</span><span class="PUNC">=</span><span class="NAME">af</span><span class="PUNC">(</span><span class="NAME">ae</span><span class="PUNC">[</span><span class="NAME">ad</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NAME">ai</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">ai</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">Q</span><span class="PUNC">(</span><span class="NAME">ah</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">U.toggleType</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">ag</span><span class="PUNC">,</span><span class="NAME">ah</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">af</span><span class="PUNC">=</span><span class="NAME">P</span><span class="PUNC">(</span><span class="NAME">ag</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">af</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ae</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">ae</span><span class="PUNC">&lt;</span><span class="NAME">af.length</span><span class="PUNC">;</span><span class="NAME">ae</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ad</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.indexOf</span><span class="PUNC">(</span><span class="NAME">H</span><span class="PUNC">,</span><span class="NAME">af</span><span class="PUNC">[</span><span class="NAME">ae</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">ad</span><span class="PUNC">!=</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">H.splice</span><span class="PUNC">(</span><span class="NAME">ad</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">H.push</span><span class="PUNC">(</span><span class="NAME">af</span><span class="PUNC">[</span><span class="NAME">ae</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="NAME">Q</span><span class="PUNC">(</span><span class="NAME">ah</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.applyType</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">ae</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">U.setPaintStyle</span><span class="PUNC">(</span><span class="NAME">ae.paintStyle</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">U.setHoverPaintStyle</span><span class="PUNC">(</span><span class="NAME">ae.hoverPaintStyle</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">ae.parameters</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ad</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">ae.parameters</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">U.setParameter</span><span class="PUNC">(</span><span class="NAME">ad</span><span class="PUNC">,</span><span class="NAME">ae.parameters</span><span class="PUNC">[</span><span class="NAME">ad</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">M</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">B.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">S</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">;</span><span class="NAME">this.overlays</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">K</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">X</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">V</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">(</span><span class="NAME">X</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">U</span><span class="PUNC">=</span><span class="NAME">X</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">W</span><span class="PUNC">=</span><span class="NAME">n.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">component</span><span class="PUNC">:</span><span class="NAME">S</span><span class="PUNC">,</span><span class="NAME">_jsPlumb</span><span class="PUNC">:</span><span class="NAME">S._jsPlumb</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">X</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">X.length</span><span class="PUNC">==</span><span class="NUMB">3</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">n.extend</span><span class="PUNC">(</span><span class="NAME">W</span><span class="PUNC">,</span><span class="NAME">X</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">V</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">n.Overlays</span><span class="PUNC">[</span><span class="NAME">S._jsPlumb.getRenderMode</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">U</span><span class="PUNC">]</span><span class="PUNC">(</span><span class="NAME">W</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">W.events</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">T</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">W.events</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">V.bind</span><span class="PUNC">(</span><span class="NAME">T</span><span class="PUNC">,</span><span class="NAME">W.events</span><span class="PUNC">[</span><span class="NAME">T</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">X.constructor</span><span class="PUNC">==</span><span class="NAME">String</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">V</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">n.Overlays</span><span class="PUNC">[</span><span class="NAME">S._jsPlumb.getRenderMode</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">X</span><span class="PUNC">]</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">component</span><span class="PUNC">:</span><span class="NAME">S</span><span class="PUNC">,</span><span class="NAME">_jsPlumb</span><span class="PUNC">:</span><span class="NAME">S._jsPlumb</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">V</span><span class="PUNC">=</span><span class="NAME">X</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="NAME">S.overlays.push</span><span class="PUNC">(</span><span class="NAME">V</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">L</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">X</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">T</span><span class="PUNC">=</span><span class="NAME">S.defaultOverlayKeys</span><span class="PUNC">||</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">W</span><span class="PUNC">=</span><span class="NAME">X.overlays</span><span class="PUNC">,</span><span class="NAME">U</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">Y</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">S._jsPlumb.Defaults</span><span class="PUNC">[</span><span class="NAME">Y</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="NAME">n.Defaults</span><span class="PUNC">[</span><span class="NAME">Y</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">W</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">W</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">V</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">V</span><span class="PUNC">&lt;</span><span class="NAME">T.length</span><span class="PUNC">;</span><span class="NAME">V</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">W.unshift.apply</span><span class="PUNC">(</span><span class="NAME">W</span><span class="PUNC">,</span><span class="NAME">U</span><span class="PUNC">(</span><span class="NAME">T</span><span class="PUNC">[</span><span class="NAME">V</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">W</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">I</span><span class="PUNC">=</span><span class="NAME">L</span><span class="PUNC">(</span><span class="NAME">M</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">O</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">O</span><span class="PUNC">&lt;</span><span class="NAME">I.length</span><span class="PUNC">;</span><span class="NAME">O</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">K</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">[</span><span class="NAME">O</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">H</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">V</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">T</span><span class="PUNC">=</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">U</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">U</span><span class="PUNC">&lt;</span><span class="NAME">S.overlays.length</span><span class="PUNC">;</span><span class="NAME">U</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">V</span><span class="PUNC">===</span><span class="NAME">S.overlays</span><span class="PUNC">[</span><span class="NAME">U</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">id</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">T</span><span class="PUNC">=</span><span class="NAME">U</span><span class="PUNC">;</span><span class="KEYW">break</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">T</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.addOverlay</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">T</span><span class="PUNC">,</span><span class="NAME">U</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">K</span><span class="PUNC">(</span><span class="NAME">T</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">U</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">S.repaint</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getOverlay</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">U</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">T</span><span class="PUNC">=</span><span class="NAME">H</span><span class="PUNC">(</span><span class="NAME">U</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">T</span><span class="PUNC">>=</span><span class="NUMB">0</span><span class="PUNC">?</span><span class="NAME">S.overlays</span><span class="PUNC">[</span><span class="NAME">T</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getOverlays</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">S.overlays</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.hideOverlay</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">U</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">T</span><span class="PUNC">=</span><span class="NAME">S.getOverlay</span><span class="PUNC">(</span><span class="NAME">U</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">T</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">T.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.hideOverlays</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">T</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">T</span><span class="PUNC">&lt;</span><span class="NAME">S.overlays.length</span><span class="PUNC">;</span><span class="NAME">T</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">S.overlays</span><span class="PUNC">[</span><span class="NAME">T</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.showOverlay</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">U</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">T</span><span class="PUNC">=</span><span class="NAME">S.getOverlay</span><span class="PUNC">(</span><span class="NAME">U</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">T</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">T.show</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.showOverlays</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">T</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">T</span><span class="PUNC">&lt;</span><span class="NAME">S.overlays.length</span><span class="PUNC">;</span><span class="NAME">T</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">S.overlays</span><span class="PUNC">[</span><span class="NAME">T</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">show</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.removeAllOverlays</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">T</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">T</span><span class="PUNC">&lt;</span><span class="NAME">S.overlays.length</span><span class="PUNC">;</span><span class="NAME">T</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">S.overlays</span><span class="PUNC">[</span><span class="NAME">T</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">cleanup</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">S.overlays</span><span class="PUNC">[</span><span class="NAME">T</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">cleanup</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="NAME">S.overlays.splice</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">S.overlays.length</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">S.repaint</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.removeOverlay</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">U</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">T</span><span class="PUNC">=</span><span class="NAME">H</span><span class="PUNC">(</span><span class="NAME">U</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">T</span><span class="PUNC">!=</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">V</span><span class="PUNC">=</span><span class="NAME">S.overlays</span><span class="PUNC">[</span><span class="NAME">T</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">V.cleanup</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">V.cleanup</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">S.overlays.splice</span><span class="PUNC">(</span><span class="NAME">T</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.removeOverlays</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">T</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">T</span><span class="PUNC">&lt;</span><span class="NAME">arguments.length</span><span class="PUNC">;</span><span class="NAME">T</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">S.removeOverlay</span><span class="PUNC">(</span><span class="NAME">arguments</span><span class="PUNC">[</span><span class="NAME">T</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">J</span><span class="PUNC">=</span><span class="STRN">"__label"</span><span class="PUNC">,</span><span class="NAME">R</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">V</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">T</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">cssClass</span><span class="PUNC">:</span><span class="NAME">V.cssClass</span><span class="PUNC">,</span><span class="NAME">labelStyle</span><span class="PUNC">:</span><span class="NAME">this.labelStyle</span><span class="PUNC">,</span><span class="NAME">id</span><span class="PUNC">:</span><span class="NAME">J</span><span class="PUNC">,</span><span class="NAME">component</span><span class="PUNC">:</span><span class="NAME">S</span><span class="PUNC">,</span><span class="NAME">_jsPlumb</span><span class="PUNC">:</span><span class="NAME">S._jsPlumb</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">U</span><span class="PUNC">=</span><span class="NAME">n.extend</span><span class="PUNC">(</span><span class="NAME">T</span><span class="PUNC">,</span><span class="NAME">V</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">n.Overlays</span><span class="PUNC">[</span><span class="NAME">S._jsPlumb.getRenderMode</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">Label</span><span class="PUNC">(</span><span class="NAME">U</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">M.label</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">P</span><span class="PUNC">=</span><span class="NAME">M.labelLocation</span><span class="PUNC">||</span><span class="NAME">S.defaultLabelLocation</span><span class="PUNC">||</span><span class="NUMB">0.5</span><span class="PUNC">,</span><span class="NAME">Q</span><span class="PUNC">=</span><span class="NAME">M.labelStyle</span><span class="PUNC">||</span><span class="NAME">S._jsPlumb.Defaults.LabelStyle</span><span class="PUNC">||</span><span class="NAME">n.Defaults.LabelStyle</span><span class="PUNC">;</span><span class="NAME">this.overlays.push</span><span class="PUNC">(</span><span class="NAME">R</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">label</span><span class="PUNC">:</span><span class="NAME">M.label</span><span class="PUNC">,</span><span class="NAME">location</span><span class="PUNC">:</span><span class="NAME">P</span><span class="PUNC">,</span><span class="NAME">labelStyle</span><span class="PUNC">:</span><span class="NAME">Q</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">this.setLabel</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">T</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">U</span><span class="PUNC">=</span><span class="NAME">S.getOverlay</span><span class="PUNC">(</span><span class="NAME">J</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">U</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">V</span><span class="PUNC">=</span><span class="NAME">T.constructor</span><span class="PUNC">==</span><span class="NAME">String</span><span class="PUNC">||</span><span class="NAME">T.constructor</span><span class="PUNC">==</span><span class="NAME">Function</span><span class="PUNC">?</span><span class="PUNC">{</span><span class="NAME">label</span><span class="PUNC">:</span><span class="NAME">T</span><span class="PUNC">}</span><span class="PUNC">:</span><span class="NAME">T</span><span class="PUNC">;</span><span class="NAME">U</span><span class="PUNC">=</span><span class="NAME">R</span><span class="PUNC">(</span><span class="NAME">V</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.overlays.push</span><span class="PUNC">(</span><span class="NAME">U</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">T.constructor</span><span class="PUNC">==</span><span class="NAME">String</span><span class="PUNC">||</span><span class="NAME">T.constructor</span><span class="PUNC">==</span><span class="NAME">Function</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">U.setLabel</span><span class="PUNC">(</span><span class="NAME">T</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">T.label</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">U.setLabel</span><span class="PUNC">(</span><span class="NAME">T.label</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">T.location</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">U.setLocation</span><span class="PUNC">(</span><span class="NAME">T.location</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">S._jsPlumb.isSuspendDrawing</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">S.repaint</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getLabel</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">T</span><span class="PUNC">=</span><span class="NAME">S.getOverlay</span><span class="PUNC">(</span><span class="NAME">J</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">T</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">?</span><span class="NAME">T.getLabel</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getLabelOverlay</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">S.getOverlay</span><span class="PUNC">(</span><span class="NAME">J</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">N</span><span class="PUNC">=</span><span class="NAME">this.applyType</span><span class="PUNC">;</span><span class="NAME">this.applyType</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">U</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">N</span><span class="PUNC">(</span><span class="NAME">U</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">S.removeAllOverlays</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">U.overlays</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">T</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">T</span><span class="PUNC">&lt;</span><span class="NAME">U.overlays.length</span><span class="PUNC">;</span><span class="NAME">T</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">S.addOverlay</span><span class="PUNC">(</span><span class="NAME">U.overlays</span><span class="PUNC">[</span><span class="NAME">T</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">J</span><span class="PUNC">,</span><span class="NAME">H</span><span class="PUNC">,</span><span class="NAME">I</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">J.bind</span><span class="PUNC">(</span><span class="STRN">"click"</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">K</span><span class="PUNC">,</span><span class="NAME">L</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">H.fire</span><span class="PUNC">(</span><span class="STRN">"click"</span><span class="PUNC">,</span><span class="NAME">H</span><span class="PUNC">,</span><span class="NAME">L</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">J.bind</span><span class="PUNC">(</span><span class="STRN">"dblclick"</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">K</span><span class="PUNC">,</span><span class="NAME">L</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">H.fire</span><span class="PUNC">(</span><span class="STRN">"dblclick"</span><span class="PUNC">,</span><span class="NAME">H</span><span class="PUNC">,</span><span class="NAME">L</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">J.bind</span><span class="PUNC">(</span><span class="STRN">"contextmenu"</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">K</span><span class="PUNC">,</span><span class="NAME">L</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">H.fire</span><span class="PUNC">(</span><span class="STRN">"contextmenu"</span><span class="PUNC">,</span><span class="NAME">H</span><span class="PUNC">,</span><span class="NAME">L</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">J.bind</span><span class="PUNC">(</span><span class="STRN">"mouseenter"</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">K</span><span class="PUNC">,</span><span class="NAME">L</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">H.isHover</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">I</span><span class="PUNC">(</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">H.fire</span><span class="PUNC">(</span><span class="STRN">"mouseenter"</span><span class="PUNC">,</span><span class="NAME">H</span><span class="PUNC">,</span><span class="NAME">L</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">J.bind</span><span class="PUNC">(</span><span class="STRN">"mouseexit"</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">K</span><span class="PUNC">,</span><span class="NAME">L</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">H.isHover</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">I</span><span class="PUNC">(</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">H.fire</span><span class="PUNC">(</span><span class="STRN">"mouseexit"</span><span class="PUNC">,</span><span class="NAME">H</span><span class="PUNC">,</span><span class="NAME">L</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">b</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">H</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">+</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">++</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">H</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">w</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.Defaults</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">Anchor</span><span class="PUNC">:</span><span class="STRN">"BottomCenter"</span><span class="PUNC">,</span><span class="NAME">Anchors</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="KEYW">null</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">ConnectionsDetachable</span><span class="PUNC">:</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="NAME">ConnectionOverlays</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">Connector</span><span class="PUNC">:</span><span class="STRN">"Bezier"</span><span class="PUNC">,</span><span class="NAME">ConnectorZIndex</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">Container</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">DragOptions</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">DropOptions</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">Endpoint</span><span class="PUNC">:</span><span class="STRN">"Dot"</span><span class="PUNC">,</span><span class="NAME">EndpointOverlays</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">Endpoints</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="KEYW">null</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">EndpointStyle</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">fillStyle</span><span class="PUNC">:</span><span class="STRN">"#456"</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">EndpointStyles</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="KEYW">null</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">EndpointHoverStyle</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">EndpointHoverStyles</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="KEYW">null</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">HoverPaintStyle</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">LabelStyle</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">color</span><span class="PUNC">:</span><span class="STRN">"black"</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">LogEnabled</span><span class="PUNC">:</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="NAME">Overlays</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">MaxConnections</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">PaintStyle</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">lineWidth</span><span class="PUNC">:</span><span class="NUMB">8</span><span class="PUNC">,</span><span class="NAME">strokeStyle</span><span class="PUNC">:</span><span class="STRN">"#456"</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">ReattachConnections</span><span class="PUNC">:</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="NAME">RenderMode</span><span class="PUNC">:</span><span class="STRN">"svg"</span><span class="PUNC">,</span><span class="NAME">Scope</span><span class="PUNC">:</span><span class="STRN">"jsPlumb_DefaultScope"</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">n.extend</span><span class="PUNC">(</span><span class="NAME">this.Defaults</span><span class="PUNC">,</span><span class="NAME">I</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">this.logEnabled</span><span class="PUNC">=</span><span class="NAME">this.Defaults.LogEnabled</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">a4</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">al</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.registerConnectionType</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">a4</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">n.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.registerConnectionTypes</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">a4</span><span class="PUNC">[</span><span class="NAME">bz</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">n.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">[</span><span class="NAME">bz</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.registerEndpointType</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">al</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">n.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.registerEndpointTypes</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">al</span><span class="PUNC">[</span><span class="NAME">bz</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">n.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">[</span><span class="NAME">bz</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getType</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">===</span><span class="STRN">"connection"</span><span class="PUNC">?</span><span class="NAME">a4</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="NAME">al</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumbUtil.EventGenerator.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">br</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">aO</span><span class="PUNC">=</span><span class="NAME">b</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">aR</span><span class="PUNC">=</span><span class="NAME">br.bind</span><span class="PUNC">,</span><span class="NAME">aE</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">ad</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NAME">this.setZoom</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">ad</span><span class="PUNC">=</span><span class="NAME">bA</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">br.repaintEverything</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getZoom</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">ad</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">aD</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">this.Defaults</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">aE</span><span class="PUNC">[</span><span class="NAME">aD</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">this.Defaults</span><span class="PUNC">[</span><span class="NAME">aD</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="NAME">this.bind</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="STRN">"ready"</span><span class="PUNC">===</span><span class="NAME">bA</span><span class="PUNC">&&</span><span class="NAME">K</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bz</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">aR.apply</span><span class="PUNC">(</span><span class="NAME">br</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">br.importDefaults</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">br.Defaults</span><span class="PUNC">[</span><span class="NAME">bz</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bA</span><span class="PUNC">[</span><span class="NAME">bz</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">br.restoreDefaults</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">br.Defaults</span><span class="PUNC">=</span><span class="NAME">n.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">aE</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">O</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">bj</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">K</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="NAME">a0</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">aV</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">aW</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">aj</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bu</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bk</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bq</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">by</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">ag</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">R</span><span class="PUNC">=</span><span class="NAME">this.Defaults.Scope</span><span class="PUNC">,</span><span class="NAME">Y</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">W</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">bC</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bz</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">bC</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bz</span><span class="PUNC">}</span><span class="NAME">bz.push</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">aX</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">br.Defaults.Container</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">n.CurrentLibrary.appendElement</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">br.Defaults.Container</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">jsPlumbAdapter.appendToRoot</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">n.CurrentLibrary.appendElement</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">aF</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">an</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="STRN">""</span><span class="PUNC">+</span><span class="NAME">aF</span><span class="PUNC">++</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">aL</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bz._nodes</span><span class="PUNC">?</span><span class="NAME">bz._nodes</span><span class="PUNC">:</span><span class="NAME">bz</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">be</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">bD</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">jsPlumbAdapter.headless</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">a9</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bE</span><span class="PUNC">=</span><span class="NAME">c</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="STRN">"id"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">br.dragManager.getElementsForDraggable</span><span class="PUNC">(</span><span class="NAME">bE</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">p</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">br.anchorManager.redraw</span><span class="PUNC">(</span><span class="NAME">bE</span><span class="PUNC">,</span><span class="NAME">bD</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">br.anchorManager.redraw</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">id</span><span class="PUNC">,</span><span class="NAME">bD</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">offset</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">aJ</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bD</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bD</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bz</span><span class="PUNC">&lt;</span><span class="NAME">bA.length</span><span class="PUNC">;</span><span class="NAME">bz</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">[</span><span class="NAME">bz</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">=</span><span class="NAME">c</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="STRN">"id"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bD.push</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">=</span><span class="NAME">c</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="STRN">"id"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bD</span><span class="PUNC">=</span><span class="NAME">bC</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bD</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">ax</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">aW</span><span class="PUNC">[</span><span class="NAME">bz</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bg</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="NAME">bG</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">jsPlumbAdapter.headless</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bI</span><span class="PUNC">=</span><span class="NAME">bz</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">?</span><span class="KEYW">false</span><span class="PUNC">:</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">=</span><span class="NAME">n.CurrentLibrary</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bI</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bE.isDragSupported</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">bE.isAlreadyDraggable</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bH</span><span class="PUNC">=</span><span class="NAME">bG</span><span class="PUNC">||</span><span class="NAME">br.Defaults.DragOptions</span><span class="PUNC">||</span><span class="NAME">n.Defaults.DragOptions</span><span class="PUNC">;</span><span class="NAME">bH</span><span class="PUNC">=</span><span class="NAME">n.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bH</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bF</span><span class="PUNC">=</span><span class="NAME">bE.dragEvents.drag</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NAME">bE.dragEvents.stop</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">bE.dragEvents.start</span><span class="PUNC">;</span><span class="NAME">bH</span><span class="PUNC">[</span><span class="NAME">bC</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">ap</span><span class="PUNC">(</span><span class="NAME">bH</span><span class="PUNC">[</span><span class="NAME">bC</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">br.setHoverSuspended</span><span class="PUNC">(</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bH</span><span class="PUNC">[</span><span class="NAME">bF</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">ap</span><span class="PUNC">(</span><span class="NAME">bH</span><span class="PUNC">[</span><span class="NAME">bF</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bJ</span><span class="PUNC">=</span><span class="NAME">bE.getUIPosition</span><span class="PUNC">(</span><span class="NAME">arguments</span><span class="PUNC">,</span><span class="NAME">br.getZoom</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">be</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">,</span><span class="NAME">bJ</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">y</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">,</span><span class="STRN">"jsPlumb_dragged"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bH</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">ap</span><span class="PUNC">(</span><span class="NAME">bH</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bJ</span><span class="PUNC">=</span><span class="NAME">bE.getUIPosition</span><span class="PUNC">(</span><span class="NAME">arguments</span><span class="PUNC">,</span><span class="NAME">br.getZoom</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">be</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">,</span><span class="NAME">bJ</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">m</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">,</span><span class="STRN">"jsPlumb_dragged"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">br.setHoverSuspended</span><span class="PUNC">(</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NAME">H</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bq</span><span class="PUNC">[</span><span class="NAME">bB</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bI</span><span class="PUNC">=</span><span class="NAME">bq</span><span class="PUNC">[</span><span class="NAME">bB</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">bH.disabled</span><span class="PUNC">=</span><span class="NAME">bI</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">?</span><span class="KEYW">false</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NAME">bI</span><span class="PUNC">;</span><span class="NAME">bE.initDraggable</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">,</span><span class="NAME">bH</span><span class="PUNC">,</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">br.dragManager.register</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">aC</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bF</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">n.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">sourceIsNew</span><span class="PUNC">:</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="NAME">targetIsNew</span><span class="PUNC">:</span><span class="KEYW">true</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bF</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">n.extend</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bz.source</span><span class="PUNC">&&</span><span class="NAME">bz.source.endpoint</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bz.sourceEndpoint</span><span class="PUNC">=</span><span class="NAME">bz.source</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bz.source</span><span class="PUNC">&&</span><span class="NAME">bz.target.endpoint</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bz.targetEndpoint</span><span class="PUNC">=</span><span class="NAME">bz.target</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bF.uuids</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bz.sourceEndpoint</span><span class="PUNC">=</span><span class="NAME">ax</span><span class="PUNC">(</span><span class="NAME">bF.uuids</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bz.targetEndpoint</span><span class="PUNC">=</span><span class="NAME">ax</span><span class="PUNC">(</span><span class="NAME">bF.uuids</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bz.sourceEndpoint</span><span class="PUNC">&&</span><span class="NAME">bz.sourceEndpoint.isFull</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o</span><span class="PUNC">(</span><span class="NAME">br</span><span class="PUNC">,</span><span class="STRN">"could not add connection; source endpoint is full"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bz.targetEndpoint</span><span class="PUNC">&&</span><span class="NAME">bz.targetEndpoint.isFull</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o</span><span class="PUNC">(</span><span class="NAME">br</span><span class="PUNC">,</span><span class="STRN">"could not add connection; target endpoint is full"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bz.sourceEndpoint</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bz.sourceIsNew</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bz.targetEndpoint</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bz.targetIsNew</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">bz.type</span><span class="PUNC">&&</span><span class="NAME">bz.sourceEndpoint</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bz.type</span><span class="PUNC">=</span><span class="NAME">bz.sourceEndpoint.connectionType</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bz.sourceEndpoint</span><span class="PUNC">&&</span><span class="NAME">bz.sourceEndpoint.connectorOverlays</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bz.overlays</span><span class="PUNC">=</span><span class="NAME">bz.overlays</span><span class="PUNC">||</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bD</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bD</span><span class="PUNC">&lt;</span><span class="NAME">bz.sourceEndpoint.connectorOverlays.length</span><span class="PUNC">;</span><span class="NAME">bD</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bz.overlays.push</span><span class="PUNC">(</span><span class="NAME">bz.sourceEndpoint.connectorOverlays</span><span class="PUNC">[</span><span class="NAME">bD</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="NAME">bz.tooltip</span><span class="PUNC">=</span><span class="NAME">bF.tooltip</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">bz.tooltip</span><span class="PUNC">&&</span><span class="NAME">bz.sourceEndpoint</span><span class="PUNC">&&</span><span class="NAME">bz.sourceEndpoint.connectorTooltip</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bz.tooltip</span><span class="PUNC">=</span><span class="NAME">bz.sourceEndpoint.connectorTooltip</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bz.target</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">bz.target.endpoint</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">bz.targetEndpoint</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">bz.newConnection</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bE</span><span class="PUNC">=</span><span class="NAME">H</span><span class="PUNC">(</span><span class="NAME">bz.target</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bG</span><span class="PUNC">=</span><span class="NAME">a1</span><span class="PUNC">[</span><span class="NAME">bE</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NAME">aK</span><span class="PUNC">[</span><span class="NAME">bE</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bG</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">am</span><span class="PUNC">[</span><span class="NAME">bE</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">bB</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">?</span><span class="NAME">bB</span><span class="PUNC">:</span><span class="NAME">br.addEndpoint</span><span class="PUNC">(</span><span class="NAME">bz.target</span><span class="PUNC">,</span><span class="NAME">bG</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bl</span><span class="PUNC">[</span><span class="NAME">bE</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">aK</span><span class="PUNC">[</span><span class="NAME">bE</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bC</span><span class="PUNC">}</span><span class="NAME">bz.targetEndpoint</span><span class="PUNC">=</span><span class="NAME">bC</span><span class="PUNC">;</span><span class="NAME">bC._makeTargetCreator</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="NAME">bz.targetIsNew</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bz.source</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">bz.source.endpoint</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">bz.sourceEndpoint</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">bz.newConnection</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bE</span><span class="PUNC">=</span><span class="NAME">H</span><span class="PUNC">(</span><span class="NAME">bz.source</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bG</span><span class="PUNC">=</span><span class="NAME">aB</span><span class="PUNC">[</span><span class="NAME">bE</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NAME">a6</span><span class="PUNC">[</span><span class="NAME">bE</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bG</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">ae</span><span class="PUNC">[</span><span class="NAME">bE</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">bB</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">?</span><span class="NAME">bB</span><span class="PUNC">:</span><span class="NAME">br.addEndpoint</span><span class="PUNC">(</span><span class="NAME">bz.source</span><span class="PUNC">,</span><span class="NAME">bG</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bc</span><span class="PUNC">[</span><span class="NAME">bE</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">a6</span><span class="PUNC">[</span><span class="NAME">bE</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bC</span><span class="PUNC">}</span><span class="NAME">bz.sourceEndpoint</span><span class="PUNC">=</span><span class="NAME">bC</span><span class="PUNC">;</span><span class="NAME">bz.sourceIsNew</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">af</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">br.Defaults.ConnectionType</span><span class="PUNC">||</span><span class="NAME">br.getDefaultConnectionType</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NAME">br.Defaults.EndpointType</span><span class="PUNC">||</span><span class="NAME">ah</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NAME">n.CurrentLibrary.getParent</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bD.container</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bD.parent</span><span class="PUNC">=</span><span class="NAME">bD.container</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bD.sourceEndpoint</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bD.parent</span><span class="PUNC">=</span><span class="NAME">bD.sourceEndpoint.parent</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bD.source.constructor</span><span class="PUNC">==</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bD.parent</span><span class="PUNC">=</span><span class="NAME">bD.source.parent</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">bD.parent</span><span class="PUNC">=</span><span class="NAME">bA</span><span class="PUNC">(</span><span class="NAME">bD.source</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="NAME">bD._jsPlumb</span><span class="PUNC">=</span><span class="NAME">br</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bz.id</span><span class="PUNC">=</span><span class="STRN">"con_"</span><span class="PUNC">+</span><span class="NAME">an</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bw</span><span class="PUNC">(</span><span class="STRN">"click"</span><span class="PUNC">,</span><span class="STRN">"click"</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bw</span><span class="PUNC">(</span><span class="STRN">"dblclick"</span><span class="PUNC">,</span><span class="STRN">"dblclick"</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bw</span><span class="PUNC">(</span><span class="STRN">"contextmenu"</span><span class="PUNC">,</span><span class="STRN">"contextmenu"</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bx</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">bC</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">bB.suspendedEndpoint</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">W</span><span class="PUNC">(</span><span class="NAME">a0</span><span class="PUNC">,</span><span class="NAME">bB.scope</span><span class="PUNC">,</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">bC.doNotFireConnectionEvent</span><span class="PUNC">&&</span><span class="NAME">bC.fireEvent</span><span class="PUNC">!==</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">connection</span><span class="PUNC">:</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">source</span><span class="PUNC">:</span><span class="NAME">bB.source</span><span class="PUNC">,</span><span class="NAME">target</span><span class="PUNC">:</span><span class="NAME">bB.target</span><span class="PUNC">,</span><span class="NAME">sourceId</span><span class="PUNC">:</span><span class="NAME">bB.sourceId</span><span class="PUNC">,</span><span class="NAME">targetId</span><span class="PUNC">:</span><span class="NAME">bB.targetId</span><span class="PUNC">,</span><span class="NAME">sourceEndpoint</span><span class="PUNC">:</span><span class="NAME">bB.endpoints</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">targetEndpoint</span><span class="PUNC">:</span><span class="NAME">bB.endpoints</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">br.fire</span><span class="PUNC">(</span><span class="STRN">"jsPlumbConnection"</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">br.fire</span><span class="PUNC">(</span><span class="STRN">"connection"</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">br.anchorManager.newConnection</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">be</span><span class="PUNC">(</span><span class="NAME">bB.source</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bw</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bB.bind</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">br.fire</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">ay</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bB.container</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bB.container</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">n.CurrentLibrary.getTagName</span><span class="PUNC">(</span><span class="NAME">bB.source</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NAME">n.CurrentLibrary.getParent</span><span class="PUNC">(</span><span class="NAME">bB.source</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">&&</span><span class="NAME">bz.toLowerCase</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">===</span><span class="STRN">"td"</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">n.CurrentLibrary.getParent</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">aH</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NAME">br.Defaults.EndpointType</span><span class="PUNC">||</span><span class="NAME">ah</span><span class="PUNC">;</span><span class="NAME">bB.parent</span><span class="PUNC">=</span><span class="NAME">ay</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bB._jsPlumb</span><span class="PUNC">=</span><span class="NAME">br</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bz.id</span><span class="PUNC">=</span><span class="STRN">"ep_"</span><span class="PUNC">+</span><span class="NAME">an</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bw</span><span class="PUNC">(</span><span class="STRN">"click"</span><span class="PUNC">,</span><span class="STRN">"endpointClick"</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bw</span><span class="PUNC">(</span><span class="STRN">"dblclick"</span><span class="PUNC">,</span><span class="STRN">"endpointDblClick"</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bw</span><span class="PUNC">(</span><span class="STRN">"contextmenu"</span><span class="PUNC">,</span><span class="STRN">"contextmenu"</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">jsPlumbAdapter.headless</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">br.dragManager.endpointAdded</span><span class="PUNC">(</span><span class="NAME">bB.source</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">V</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">,</span><span class="NAME">bD</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">aV</span><span class="PUNC">[</span><span class="NAME">bB</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">&&</span><span class="NAME">bz.length</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bC</span><span class="PUNC">&lt;</span><span class="NAME">bz.length</span><span class="PUNC">;</span><span class="NAME">bC</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bA</span><span class="PUNC">&lt;</span><span class="NAME">bz</span><span class="PUNC">[</span><span class="NAME">bC</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">connections.length</span><span class="PUNC">;</span><span class="NAME">bA</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bF</span><span class="PUNC">=</span><span class="NAME">bE</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">[</span><span class="NAME">bC</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">connections</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bF</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bD</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">[</span><span class="NAME">bC</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">Z</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">aV</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">V</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">aw</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">&&</span><span class="NAME">bz.parentNode</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bz.parentNode.removeChild</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">aZ</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bz</span><span class="PUNC">&lt;</span><span class="NAME">bB.length</span><span class="PUNC">;</span><span class="NAME">bz</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">aw</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">[</span><span class="NAME">bz</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bo</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">aJ</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bq</span><span class="PUNC">[</span><span class="NAME">bC</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bz</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">n.CurrentLibrary.isDragSupported</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">n.CurrentLibrary.setDraggable</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">a7</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">bC</span><span class="PUNC">===</span><span class="STRN">"block"</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bA</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bE</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bE.setVisible</span><span class="PUNC">(</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">bA</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bE</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bE.setVisible</span><span class="PUNC">(</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bD</span><span class="PUNC">=</span><span class="NAME">c</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="STRN">"id"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">V</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bF</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">&&</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bE</span><span class="PUNC">=</span><span class="NAME">bF.sourceId</span><span class="PUNC">===</span><span class="NAME">bD</span><span class="PUNC">?</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bF.endpoints</span><span class="PUNC">[</span><span class="NAME">bE</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">isVisible</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bF.setVisible</span><span class="PUNC">(</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">bF.setVisible</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bm</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">aJ</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">bq</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">?</span><span class="KEYW">false</span><span class="PUNC">:</span><span class="NAME">bq</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NAME">bC</span><span class="PUNC">;</span><span class="NAME">bq</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bC</span><span class="PUNC">;</span><span class="NAME">n.CurrentLibrary.setDraggable</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">aS</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bA</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bD</span><span class="PUNC">=</span><span class="NAME">bC.isVisible</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bC.setVisible</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">bD</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="NAME">V</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">bD.isVisible</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bD.setVisible</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">bC</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">X</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bE</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">bE.timestamp</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">bE.recalc</span><span class="PUNC">,</span><span class="NAME">bD</span><span class="PUNC">=</span><span class="NAME">bE.offset</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NAME">bE.elId</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">a9</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">bC</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">bd</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">&&</span><span class="NAME">bC</span><span class="PUNC">===</span><span class="NAME">bu</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">aj</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">||</span><span class="PUNC">!</span><span class="NAME">bD</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">ag</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">a</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">aj</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">br</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bu</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bC</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">aj</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bD</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">ag</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">ag</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">a</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">aj</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">aj</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">right</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">aj</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">right</span><span class="PUNC">=</span><span class="NAME">aj</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">left</span><span class="PUNC">+</span><span class="NAME">ag</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">aj</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">bottom</span><span class="PUNC">=</span><span class="NAME">aj</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">top</span><span class="PUNC">+</span><span class="NAME">ag</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">aj</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">width</span><span class="PUNC">=</span><span class="NAME">ag</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">aj</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">height</span><span class="PUNC">=</span><span class="NAME">ag</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">aj</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">centerx</span><span class="PUNC">=</span><span class="NAME">aj</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">left</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">aj</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">width</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">aj</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">centery</span><span class="PUNC">=</span><span class="NAME">aj</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">top</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">aj</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">height</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">aj</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">aQ</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NAME">aj</span><span class="PUNC">[</span><span class="NAME">bz</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NAME">X</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">elId</span><span class="PUNC">:</span><span class="NAME">bz</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="PUNC">{</span><span class="NAME">o</span><span class="PUNC">:</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">:</span><span class="NAME">ag</span><span class="PUNC">[</span><span class="NAME">bz</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">H</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bD</span><span class="PUNC">=</span><span class="NAME">c</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="STRN">"id"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">bD</span><span class="PUNC">||</span><span class="NAME">bD</span><span class="PUNC">==</span><span class="STRN">"undefined"</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">arguments.length</span><span class="PUNC">==</span><span class="NUMB">2</span><span class="PUNC">&&</span><span class="NAME">arguments</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">!=</span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bD</span><span class="PUNC">=</span><span class="NAME">bA</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">arguments.length</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">arguments.length</span><span class="PUNC">==</span><span class="NUMB">3</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">arguments</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bD</span><span class="PUNC">=</span><span class="STRN">"jsPlumb_"</span><span class="PUNC">+</span><span class="NAME">aO</span><span class="PUNC">+</span><span class="STRN">"_"</span><span class="PUNC">+</span><span class="NAME">an</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">bC</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">d</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="STRN">"id"</span><span class="PUNC">,</span><span class="NAME">bD</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bD</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">ap</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NAME">bB</span><span class="PUNC">||</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">bz</span><span class="PUNC">||</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="KEYW">try</span><span class="PUNC">{</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">bz.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">catch</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o</span><span class="PUNC">(</span><span class="NAME">br</span><span class="PUNC">,</span><span class="STRN">"jsPlumb function failed : "</span><span class="PUNC">+</span><span class="NAME">bD</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">!==</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">try</span><span class="PUNC">{</span><span class="NAME">bB.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">catch</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o</span><span class="PUNC">(</span><span class="NAME">br</span><span class="PUNC">,</span><span class="STRN">"wrapped function failed : "</span><span class="PUNC">+</span><span class="NAME">bD</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.connectorClass</span><span class="PUNC">=</span><span class="STRN">"_jsPlumb_connector"</span><span class="PUNC">;</span><span class="NAME">this.endpointClass</span><span class="PUNC">=</span><span class="STRN">"_jsPlumb_endpoint"</span><span class="PUNC">;</span><span class="NAME">this.overlayClass</span><span class="PUNC">=</span><span class="STRN">"_jsPlumb_overlay"</span><span class="PUNC">;</span><span class="NAME">this.Anchors</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.Connectors</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">canvas</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">svg</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">vml</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.Endpoints</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">canvas</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">svg</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">vml</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.Overlays</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">canvas</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">svg</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">vml</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.addClass</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">n.CurrentLibrary.addClass</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.removeClass</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">n.CurrentLibrary.removeClass</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.hasClass</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">n.CurrentLibrary.hasClass</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.addEndpoint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="NAME">bD</span><span class="PUNC">,</span><span class="NAME">bM</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bM</span><span class="PUNC">=</span><span class="NAME">bM</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NAME">n.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bM</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n.extend</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">bD</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bB.endpoint</span><span class="PUNC">=</span><span class="NAME">bB.endpoint</span><span class="PUNC">||</span><span class="NAME">br.Defaults.Endpoint</span><span class="PUNC">||</span><span class="NAME">n.Defaults.Endpoint</span><span class="PUNC">;</span><span class="NAME">bB.paintStyle</span><span class="PUNC">=</span><span class="NAME">bB.paintStyle</span><span class="PUNC">||</span><span class="NAME">br.Defaults.EndpointStyle</span><span class="PUNC">||</span><span class="NAME">n.Defaults.EndpointStyle</span><span class="PUNC">;</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">aL</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bE</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bH</span><span class="PUNC">=</span><span class="NAME">bC.length</span><span class="PUNC">&&</span><span class="NAME">bC.constructor</span><span class="PUNC">!=</span><span class="NAME">String</span><span class="PUNC">?</span><span class="NAME">bC</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NAME">bC</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bF</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bF</span><span class="PUNC">&lt;</span><span class="NAME">bH.length</span><span class="PUNC">;</span><span class="NAME">bF</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bK</span><span class="PUNC">=</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">bH</span><span class="PUNC">[</span><span class="NAME">bF</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NAME">H</span><span class="PUNC">(</span><span class="NAME">bK</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bB.source</span><span class="PUNC">=</span><span class="NAME">bK</span><span class="PUNC">;</span><span class="NAME">X</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">elId</span><span class="PUNC">:</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">timestamp</span><span class="PUNC">:</span><span class="NAME">bd</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bJ</span><span class="PUNC">=</span><span class="NAME">aH</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bB.parentAnchor</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bJ.parentAnchor</span><span class="PUNC">=</span><span class="NAME">bB.parentAnchor</span><span class="PUNC">}</span><span class="NAME">W</span><span class="PUNC">(</span><span class="NAME">aV</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bJ</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bI</span><span class="PUNC">=</span><span class="NAME">aj</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bG</span><span class="PUNC">=</span><span class="NAME">ag</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bL</span><span class="PUNC">=</span><span class="NAME">bJ.anchor.compute</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">xy</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NAME">bI.left</span><span class="PUNC">,</span><span class="NAME">bI.top</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">wh</span><span class="PUNC">:</span><span class="NAME">bG</span><span class="PUNC">,</span><span class="NAME">element</span><span class="PUNC">:</span><span class="NAME">bJ</span><span class="PUNC">,</span><span class="NAME">timestamp</span><span class="PUNC">:</span><span class="NAME">bd</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">anchorLoc</span><span class="PUNC">:</span><span class="NAME">bL</span><span class="PUNC">,</span><span class="NAME">timestamp</span><span class="PUNC">:</span><span class="NAME">bd</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">a9</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bz.recalc</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">}</span><span class="NAME">bJ.paint</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bE.push</span><span class="PUNC">(</span><span class="NAME">bJ</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bE.length</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">?</span><span class="NAME">bE</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="NAME">bE</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.addEndpoints</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bB</span><span class="PUNC">&lt;</span><span class="NAME">bA.length</span><span class="PUNC">;</span><span class="NAME">bB</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bE</span><span class="PUNC">=</span><span class="NAME">br.addEndpoint</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">[</span><span class="NAME">bB</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">(</span><span class="NAME">bE</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">Array.prototype.push.apply</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">bC.push</span><span class="PUNC">(</span><span class="NAME">bE</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.animate</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bF</span><span class="PUNC">=</span><span class="NAME">c</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="STRN">"id"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">bz</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bE</span><span class="PUNC">=</span><span class="NAME">n.CurrentLibrary.dragEvents.step</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bD</span><span class="PUNC">=</span><span class="NAME">n.CurrentLibrary.dragEvents.complete</span><span class="PUNC">;</span><span class="NAME">bz</span><span class="PUNC">[</span><span class="NAME">bE</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">ap</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">[</span><span class="NAME">bE</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">br.repaint</span><span class="PUNC">(</span><span class="NAME">bF</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bz</span><span class="PUNC">[</span><span class="NAME">bD</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">ap</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">[</span><span class="NAME">bD</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">br.repaint</span><span class="PUNC">(</span><span class="NAME">bF</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n.CurrentLibrary.animate</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.checkCondition</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">bD</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">br.getListener</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">&&</span><span class="NAME">bz.length</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">try</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bA</span><span class="PUNC">&lt;</span><span class="NAME">bz.length</span><span class="PUNC">;</span><span class="NAME">bA</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">bC</span><span class="PUNC">&&</span><span class="NAME">bz</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">catch</span><span class="PUNC">(</span><span class="NAME">bE</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o</span><span class="PUNC">(</span><span class="NAME">br</span><span class="PUNC">,</span><span class="STRN">"cannot check condition ["</span><span class="PUNC">+</span><span class="NAME">bB</span><span class="PUNC">+</span><span class="STRN">"]"</span><span class="PUNC">+</span><span class="NAME">bE</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.connect</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">aC</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bB</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bz.deleteEndpointsOnDetach</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bz.deleteEndpointsOnDetach</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">}</span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NAME">af</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bx</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bB</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.deleteEndpoint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bF</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">==</span><span class="STRN">"string"</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NAME">aW</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="NAME">bA</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bF</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">bF.getUuid</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">aW</span><span class="PUNC">[</span><span class="NAME">bC</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="NAME">bF.detachAll</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bF.endpoint.cleanup</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bF.endpoint.cleanup</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">aZ</span><span class="PUNC">(</span><span class="NAME">bF.endpoint.getDisplayElements</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">br.anchorManager.deleteEndpoint</span><span class="PUNC">(</span><span class="NAME">bF</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bE</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">aV</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">aV</span><span class="PUNC">[</span><span class="NAME">bE</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bD</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bB</span><span class="PUNC">&lt;</span><span class="NAME">bz.length</span><span class="PUNC">;</span><span class="NAME">bB</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">[</span><span class="NAME">bB</span><span class="PUNC">]</span><span class="PUNC">!=</span><span class="NAME">bF</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bD.push</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">[</span><span class="NAME">bB</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="NAME">aV</span><span class="PUNC">[</span><span class="NAME">bE</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bD</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">jsPlumbAdapter.headless</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">br.dragManager.endpointDeleted</span><span class="PUNC">(</span><span class="NAME">bF</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.deleteEveryEndpoint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">br.setSuspendDrawing</span><span class="PUNC">(</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bB</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">aV</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">aV</span><span class="PUNC">[</span><span class="NAME">bB</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">&&</span><span class="NAME">bz.length</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bA</span><span class="PUNC">&lt;</span><span class="NAME">bz.length</span><span class="PUNC">;</span><span class="NAME">bA</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">br.deleteEndpoint</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="NAME">aV</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">aW</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">br.setSuspendDrawing</span><span class="PUNC">(</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ba</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NAME">br.Defaults.ConnectionType</span><span class="PUNC">||</span><span class="NAME">br.getDefaultConnectionType</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NAME">bC.constructor</span><span class="PUNC">==</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">bD</span><span class="PUNC">=</span><span class="NAME">bA</span><span class="PUNC">?</span><span class="PUNC">{</span><span class="NAME">connection</span><span class="PUNC">:</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="NAME">source</span><span class="PUNC">:</span><span class="NAME">bC.source</span><span class="PUNC">,</span><span class="NAME">target</span><span class="PUNC">:</span><span class="NAME">bC.target</span><span class="PUNC">,</span><span class="NAME">sourceId</span><span class="PUNC">:</span><span class="NAME">bC.sourceId</span><span class="PUNC">,</span><span class="NAME">targetId</span><span class="PUNC">:</span><span class="NAME">bC.targetId</span><span class="PUNC">,</span><span class="NAME">sourceEndpoint</span><span class="PUNC">:</span><span class="NAME">bC.endpoints</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">targetEndpoint</span><span class="PUNC">:</span><span class="NAME">bC.endpoints</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">:</span><span class="NAME">bC</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bE</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">br.fire</span><span class="PUNC">(</span><span class="STRN">"jsPlumbConnectionDetached"</span><span class="PUNC">,</span><span class="NAME">bD</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">br.fire</span><span class="PUNC">(</span><span class="STRN">"connectionDetached"</span><span class="PUNC">,</span><span class="NAME">bD</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">br.anchorManager.connectionDetached</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">a8</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">br.fire</span><span class="PUNC">(</span><span class="STRN">"connectionDrag"</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">aT</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">br.fire</span><span class="PUNC">(</span><span class="STRN">"connectionDragStop"</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.detach</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">arguments.length</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bD</span><span class="PUNC">=</span><span class="NAME">br.Defaults.ConnectionType</span><span class="PUNC">||</span><span class="NAME">br.getDefaultConnectionType</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">=</span><span class="NAME">arguments</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">constructor</span><span class="PUNC">==</span><span class="NAME">bD</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">arguments.length</span><span class="PUNC">==</span><span class="NUMB">2</span><span class="PUNC">?</span><span class="NAME">bE</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">arguments</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">arguments</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="NAME">arguments</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bH</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">bC.fireEvent</span><span class="PUNC">!==</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NAME">bC.forceDetach</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NAME">bE</span><span class="PUNC">?</span><span class="NAME">arguments</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="NAME">bC.connection</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">bA.isDetachAllowed</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NAME">bA.endpoints</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">isDetachAllowed</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NAME">bA.endpoints</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">isDetachAllowed</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">||</span><span class="NAME">br.checkCondition</span><span class="PUNC">(</span><span class="STRN">"beforeDetach"</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bA.endpoints</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">detach</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="NAME">bH</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">n.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bz.uuids</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">ax</span><span class="PUNC">(</span><span class="NAME">bz.uuids</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">detachFrom</span><span class="PUNC">(</span><span class="NAME">ax</span><span class="PUNC">(</span><span class="NAME">bz.uuids</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bH</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bz.sourceEndpoint</span><span class="PUNC">&&</span><span class="NAME">bz.targetEndpoint</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bz.sourceEndpoint.detachFrom</span><span class="PUNC">(</span><span class="NAME">bz.targetEndpoint</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bG</span><span class="PUNC">=</span><span class="NAME">H</span><span class="PUNC">(</span><span class="NAME">bz.source</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bF</span><span class="PUNC">=</span><span class="NAME">H</span><span class="PUNC">(</span><span class="NAME">bz.target</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">V</span><span class="PUNC">(</span><span class="NAME">bG</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bI</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">bI.sourceId</span><span class="PUNC">==</span><span class="NAME">bG</span><span class="PUNC">&&</span><span class="NAME">bI.targetId</span><span class="PUNC">==</span><span class="NAME">bF</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">bI.targetId</span><span class="PUNC">==</span><span class="NAME">bG</span><span class="PUNC">&&</span><span class="NAME">bI.sourceId</span><span class="PUNC">==</span><span class="NAME">bF</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">br.checkCondition</span><span class="PUNC">(</span><span class="STRN">"beforeDetach"</span><span class="PUNC">,</span><span class="NAME">bI</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bI.endpoints</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">detach</span><span class="PUNC">(</span><span class="NAME">bI</span><span class="PUNC">,</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="NAME">bH</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.detachAllConnections</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">bC</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bD</span><span class="PUNC">=</span><span class="NAME">c</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="STRN">"id"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">aV</span><span class="PUNC">[</span><span class="NAME">bD</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">&&</span><span class="NAME">bz.length</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bA</span><span class="PUNC">&lt;</span><span class="NAME">bz.length</span><span class="PUNC">;</span><span class="NAME">bA</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bz</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">detachAll</span><span class="PUNC">(</span><span class="NAME">bC.fireEvent</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.detachEveryConnection</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NAME">bB</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">aV</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">aV</span><span class="PUNC">[</span><span class="NAME">bC</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">&&</span><span class="NAME">bz.length</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bA</span><span class="PUNC">&lt;</span><span class="NAME">bz.length</span><span class="PUNC">;</span><span class="NAME">bA</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bz</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">detachAll</span><span class="PUNC">(</span><span class="NAME">bB.fireEvent</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="NAME">a0</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.draggable</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">bB</span><span class="PUNC">==</span><span class="STRN">"object"</span><span class="PUNC">&&</span><span class="NAME">bB.length</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bA</span><span class="PUNC">&lt;</span><span class="NAME">bB.length</span><span class="PUNC">;</span><span class="NAME">bA</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bg</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bB._nodes</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bA</span><span class="PUNC">&lt;</span><span class="NAME">bB._nodes.length</span><span class="PUNC">;</span><span class="NAME">bA</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">bB._nodes</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bg</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bg</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.extend</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">n.CurrentLibrary.extend</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getDefaultEndpointType</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">ah</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getDefaultConnectionType</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">az</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bt</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bB</span><span class="PUNC">&lt;</span><span class="NAME">bD.length</span><span class="PUNC">;</span><span class="NAME">bB</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bD</span><span class="PUNC">[</span><span class="NAME">bB</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">bC</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">apply</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">[</span><span class="NAME">bB</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">T</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bB</span><span class="PUNC">&lt;</span><span class="NAME">bD.length</span><span class="PUNC">;</span><span class="NAME">bB</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bz.push</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">bD</span><span class="PUNC">[</span><span class="NAME">bB</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">bC</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">apply</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">[</span><span class="NAME">bB</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bD</span><span class="PUNC">[</span><span class="NAME">bB</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">aq</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bt</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">aA</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">T</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bv</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bB</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">==</span><span class="STRN">"string"</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">===</span><span class="STRN">"*"</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">}</span><span class="NAME">bB.push</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NAME">bz</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bA</span><span class="PUNC">&lt;</span><span class="NAME">bz.length</span><span class="PUNC">;</span><span class="NAME">bA</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bB.push</span><span class="PUNC">(</span><span class="NAME">H</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bB</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">aI</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">===</span><span class="STRN">"*"</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bB.length</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">?</span><span class="NAME">G</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">!=</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="PUNC">!</span><span class="NAME">bz</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getConnections</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bI</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">bI</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bI</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bI.constructor</span><span class="PUNC">==</span><span class="NAME">String</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bI</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">scope</span><span class="PUNC">:</span><span class="NAME">bI</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bH</span><span class="PUNC">=</span><span class="NAME">bI.scope</span><span class="PUNC">||</span><span class="NAME">br.getDefaultScope</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bG</span><span class="PUNC">=</span><span class="NAME">bv</span><span class="PUNC">(</span><span class="NAME">bH</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">bv</span><span class="PUNC">(</span><span class="NAME">bI.source</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">=</span><span class="NAME">bv</span><span class="PUNC">(</span><span class="NAME">bI.target</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bD</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">bA</span><span class="PUNC">&&</span><span class="NAME">bG.length</span><span class="PUNC">></span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bJ</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bL</span><span class="PUNC">,</span><span class="NAME">bM</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">bA</span><span class="PUNC">&&</span><span class="NAME">bG.length</span><span class="PUNC">></span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bK</span><span class="PUNC">=</span><span class="NAME">bD</span><span class="PUNC">[</span><span class="NAME">bL</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bK</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bK</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">bD</span><span class="PUNC">[</span><span class="NAME">bL</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bK</span><span class="PUNC">}</span><span class="NAME">bK.push</span><span class="PUNC">(</span><span class="NAME">bM</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">bD.push</span><span class="PUNC">(</span><span class="NAME">bM</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">a0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">aI</span><span class="PUNC">(</span><span class="NAME">bG</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bB</span><span class="PUNC">&lt;</span><span class="NAME">a0</span><span class="PUNC">[</span><span class="NAME">bC</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">length</span><span class="PUNC">;</span><span class="NAME">bB</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bF</span><span class="PUNC">=</span><span class="NAME">a0</span><span class="PUNC">[</span><span class="NAME">bC</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">bB</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">aI</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="NAME">bF.sourceId</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NAME">aI</span><span class="PUNC">(</span><span class="NAME">bE</span><span class="PUNC">,</span><span class="NAME">bF.targetId</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bJ</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="NAME">bF</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bD</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">L</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bB</span><span class="PUNC">&lt;</span><span class="NAME">bz.length</span><span class="PUNC">;</span><span class="NAME">bB</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bC</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">[</span><span class="NAME">bB</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">P</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">Q</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">{</span><span class="NAME">setHover</span><span class="PUNC">:</span><span class="NAME">aq</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="STRN">"setHover"</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">removeAllOverlays</span><span class="PUNC">:</span><span class="NAME">aq</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="STRN">"removeAllOverlays"</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">setLabel</span><span class="PUNC">:</span><span class="NAME">aq</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="STRN">"setLabel"</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">addOverlay</span><span class="PUNC">:</span><span class="NAME">aq</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="STRN">"addOverlay"</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">removeOverlay</span><span class="PUNC">:</span><span class="NAME">aq</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="STRN">"removeOverlay"</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">removeOverlays</span><span class="PUNC">:</span><span class="NAME">aq</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="STRN">"removeOverlays"</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">showOverlay</span><span class="PUNC">:</span><span class="NAME">aq</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="STRN">"showOverlay"</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">hideOverlay</span><span class="PUNC">:</span><span class="NAME">aq</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="STRN">"hideOverlay"</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">showOverlays</span><span class="PUNC">:</span><span class="NAME">aq</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="STRN">"showOverlays"</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">hideOverlays</span><span class="PUNC">:</span><span class="NAME">aq</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="STRN">"hideOverlays"</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">setPaintStyle</span><span class="PUNC">:</span><span class="NAME">aq</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="STRN">"setPaintStyle"</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">setHoverPaintStyle</span><span class="PUNC">:</span><span class="NAME">aq</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="STRN">"setHoverPaintStyle"</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">setParameter</span><span class="PUNC">:</span><span class="NAME">aq</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="STRN">"setParameter"</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">setParameters</span><span class="PUNC">:</span><span class="NAME">aq</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="STRN">"setParameters"</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">setVisible</span><span class="PUNC">:</span><span class="NAME">aq</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="STRN">"setVisible"</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">setZIndex</span><span class="PUNC">:</span><span class="NAME">aq</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="STRN">"setZIndex"</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">repaint</span><span class="PUNC">:</span><span class="NAME">aq</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="STRN">"repaint"</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">addType</span><span class="PUNC">:</span><span class="NAME">aq</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="STRN">"addType"</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">toggleType</span><span class="PUNC">:</span><span class="NAME">aq</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="STRN">"toggleType"</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">removeType</span><span class="PUNC">:</span><span class="NAME">aq</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="STRN">"removeType"</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">getLabel</span><span class="PUNC">:</span><span class="NAME">aA</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="STRN">"getLabel"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">getOverlay</span><span class="PUNC">:</span><span class="NAME">aA</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="STRN">"getOverlay"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">isHover</span><span class="PUNC">:</span><span class="NAME">aA</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="STRN">"isHover"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">getParameter</span><span class="PUNC">:</span><span class="NAME">aA</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="STRN">"getParameter"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">getParameters</span><span class="PUNC">:</span><span class="NAME">aA</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="STRN">"getParameters"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">getPaintStyle</span><span class="PUNC">:</span><span class="NAME">aA</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="STRN">"getPaintStyle"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">getHoverPaintStyle</span><span class="PUNC">:</span><span class="NAME">aA</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="STRN">"getHoverPaintStyle"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">isVisible</span><span class="PUNC">:</span><span class="NAME">aA</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="STRN">"isVisible"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">getZIndex</span><span class="PUNC">:</span><span class="NAME">aA</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="STRN">"getZIndex"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">hasType</span><span class="PUNC">:</span><span class="NAME">aA</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="STRN">"hasType"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">getType</span><span class="PUNC">:</span><span class="NAME">aA</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="STRN">"getType"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">length</span><span class="PUNC">:</span><span class="NAME">bz.length</span><span class="PUNC">,</span><span class="NAME">each</span><span class="PUNC">:</span><span class="NAME">L</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">get</span><span class="PUNC">:</span><span class="NAME">P</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">aN</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">Q</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">aN</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">n.CurrentLibrary.extend</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">setDetachable</span><span class="PUNC">:</span><span class="NAME">aq</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="STRN">"setDetachable"</span><span class="PUNC">,</span><span class="NAME">aN</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">setReattach</span><span class="PUNC">:</span><span class="NAME">aq</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="STRN">"setReattach"</span><span class="PUNC">,</span><span class="NAME">aN</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">setConnector</span><span class="PUNC">:</span><span class="NAME">aq</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="STRN">"setConnector"</span><span class="PUNC">,</span><span class="NAME">aN</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">detach</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bB</span><span class="PUNC">&lt;</span><span class="NAME">bA.length</span><span class="PUNC">;</span><span class="NAME">bB</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">br.detach</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">[</span><span class="NAME">bB</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">isDetachable</span><span class="PUNC">:</span><span class="NAME">aA</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="STRN">"isDetachable"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">isReattach</span><span class="PUNC">:</span><span class="NAME">aA</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="STRN">"isReattach"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bf</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">Q</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bf</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">n.CurrentLibrary.extend</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">setEnabled</span><span class="PUNC">:</span><span class="NAME">aq</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="STRN">"setEnabled"</span><span class="PUNC">,</span><span class="NAME">bf</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">isEnabled</span><span class="PUNC">:</span><span class="NAME">aA</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="STRN">"isEnabled"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">detachAll</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bB</span><span class="PUNC">&lt;</span><span class="NAME">bA.length</span><span class="PUNC">;</span><span class="NAME">bB</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bA</span><span class="PUNC">[</span><span class="NAME">bB</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">detachAll</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="STRN">"delete"</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bB</span><span class="PUNC">&lt;</span><span class="NAME">bA.length</span><span class="PUNC">;</span><span class="NAME">bB</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">br.deleteEndpoint</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">[</span><span class="NAME">bB</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.select</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">bz</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">bz.scope</span><span class="PUNC">=</span><span class="NAME">bz.scope</span><span class="PUNC">||</span><span class="STRN">"*"</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NAME">br.getConnections</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">aN</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.selectEndpoints</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bH</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bH</span><span class="PUNC">=</span><span class="NAME">bH</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">bH.scope</span><span class="PUNC">=</span><span class="NAME">bH.scope</span><span class="PUNC">||</span><span class="STRN">"*"</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bM</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="NAME">bH.element</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">bH.source</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">bH.target</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NAME">bM</span><span class="PUNC">?</span><span class="STRN">"*"</span><span class="PUNC">:</span><span class="NAME">bv</span><span class="PUNC">(</span><span class="NAME">bH.element</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NAME">bM</span><span class="PUNC">?</span><span class="STRN">"*"</span><span class="PUNC">:</span><span class="NAME">bv</span><span class="PUNC">(</span><span class="NAME">bH.source</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bJ</span><span class="PUNC">=</span><span class="NAME">bM</span><span class="PUNC">?</span><span class="STRN">"*"</span><span class="PUNC">:</span><span class="NAME">bv</span><span class="PUNC">(</span><span class="NAME">bH.target</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bO</span><span class="PUNC">=</span><span class="NAME">bv</span><span class="PUNC">(</span><span class="NAME">bH.scope</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bP</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bF</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">aV</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bD</span><span class="PUNC">=</span><span class="NAME">aI</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bF</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">aI</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">bF</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">=</span><span class="NAME">bB</span><span class="PUNC">!=</span><span class="STRN">"*"</span><span class="PUNC">,</span><span class="NAME">bK</span><span class="PUNC">=</span><span class="NAME">aI</span><span class="PUNC">(</span><span class="NAME">bJ</span><span class="PUNC">,</span><span class="NAME">bF</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">bJ</span><span class="PUNC">!=</span><span class="STRN">"*"</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">||</span><span class="NAME">bz</span><span class="PUNC">||</span><span class="NAME">bK</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">inner</span><span class="PUNC">:</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bI</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bI</span><span class="PUNC">&lt;</span><span class="NAME">aV</span><span class="PUNC">[</span><span class="NAME">bF</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">length</span><span class="PUNC">;</span><span class="NAME">bI</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bL</span><span class="PUNC">=</span><span class="NAME">aV</span><span class="PUNC">[</span><span class="NAME">bF</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">bI</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">aI</span><span class="PUNC">(</span><span class="NAME">bO</span><span class="PUNC">,</span><span class="NAME">bL.scope</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bN</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">bE</span><span class="PUNC">&&</span><span class="NAME">bB.length</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">bL.isSource</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bG</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">&&</span><span class="NAME">bJ.length</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">bL.isTarget</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bN</span><span class="PUNC">||</span><span class="NAME">bG</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">continue</span><span class="WHIT"> </span><span class="NAME">inner</span><span class="PUNC">}</span><span class="NAME">bP.push</span><span class="PUNC">(</span><span class="NAME">bL</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bf</span><span class="PUNC">(</span><span class="NAME">bP</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getAllConnections</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">a0</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getDefaultScope</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">R</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getEndpoint</span><span class="PUNC">=</span><span class="NAME">ax</span><span class="PUNC">;</span><span class="NAME">this.getEndpoints</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">aV</span><span class="PUNC">[</span><span class="NAME">H</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getId</span><span class="PUNC">=</span><span class="NAME">H</span><span class="PUNC">;</span><span class="NAME">this.getOffset</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">aj</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">X</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">elId</span><span class="PUNC">:</span><span class="NAME">bA</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getSelector</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">n.CurrentLibrary.getSelector</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getSize</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">ag</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">X</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">elId</span><span class="PUNC">:</span><span class="NAME">bA</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">ag</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.appendElement</span><span class="PUNC">=</span><span class="NAME">aX</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">aU</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="NAME">this.isHoverSuspended</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">aU</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.setHoverSuspended</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">aU</span><span class="PUNC">=</span><span class="NAME">bz</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">aY</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">jsPlumbAdapter.isRenderModeAvailable</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.isCanvasAvailable</span><span class="PUNC">=</span><span class="NAME">aY</span><span class="PUNC">(</span><span class="STRN">"canvas"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.isSVGAvailable</span><span class="PUNC">=</span><span class="NAME">aY</span><span class="PUNC">(</span><span class="STRN">"svg"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.isVMLAvailable</span><span class="PUNC">=</span><span class="NAME">aY</span><span class="PUNC">(</span><span class="STRN">"vml"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.hide</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">a7</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="STRN">"none"</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.idstamp</span><span class="PUNC">=</span><span class="NAME">an</span><span class="PUNC">;</span><span class="NAME">this.init</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">K</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">br.setRenderMode</span><span class="PUNC">(</span><span class="NAME">br.Defaults.RenderMode</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">n.CurrentLibrary.bind</span><span class="PUNC">(</span><span class="NAME">document</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bG</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">br.currentlyDragging</span><span class="PUNC">&&</span><span class="NAME">Y</span><span class="PUNC">==</span><span class="NAME">n.CANVAS</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bF</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">a0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bH</span><span class="PUNC">=</span><span class="NAME">a0</span><span class="PUNC">[</span><span class="NAME">bF</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bD</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bD</span><span class="PUNC">&lt;</span><span class="NAME">bH.length</span><span class="PUNC">;</span><span class="NAME">bD</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">bH</span><span class="PUNC">[</span><span class="NAME">bD</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">connector</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">(</span><span class="NAME">bG</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bE</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">aV</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NAME">aV</span><span class="PUNC">[</span><span class="NAME">bE</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bD</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bD</span><span class="PUNC">&lt;</span><span class="NAME">bB.length</span><span class="PUNC">;</span><span class="NAME">bD</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">[</span><span class="NAME">bD</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">endpoint</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">(</span><span class="NAME">bG</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">bz</span><span class="PUNC">(</span><span class="STRN">"click"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bz</span><span class="PUNC">(</span><span class="STRN">"dblclick"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bz</span><span class="PUNC">(</span><span class="STRN">"mousemove"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bz</span><span class="PUNC">(</span><span class="STRN">"mousedown"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bz</span><span class="PUNC">(</span><span class="STRN">"mouseup"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bz</span><span class="PUNC">(</span><span class="STRN">"contextmenu"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">K</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="NAME">br.fire</span><span class="PUNC">(</span><span class="STRN">"ready"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.log</span><span class="PUNC">=</span><span class="NAME">O</span><span class="PUNC">;</span><span class="NAME">this.jsPlumbUIComponent</span><span class="PUNC">=</span><span class="NAME">B</span><span class="PUNC">;</span><span class="NAME">this.makeAnchor</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">arguments.length</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bE</span><span class="PUNC">=</span><span class="NAME">arguments</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NAME">arguments</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NAME">arguments</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bE.compute</span><span class="PUNC">&&</span><span class="NAME">bE.getOrientation</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bE</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">bE</span><span class="PUNC">==</span><span class="STRN">"string"</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">n.Anchors</span><span class="PUNC">[</span><span class="NAME">arguments</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">elementId</span><span class="PUNC">:</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">jsPlumbInstance</span><span class="PUNC">:</span><span class="NAME">br</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">(</span><span class="NAME">bE</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">(</span><span class="NAME">bE</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NAME">z</span><span class="PUNC">(</span><span class="NAME">bE</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bE.length</span><span class="PUNC">==</span><span class="NUMB">2</span><span class="PUNC">&&</span><span class="NAME">z</span><span class="PUNC">(</span><span class="NAME">bE</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NAME">u</span><span class="PUNC">(</span><span class="NAME">bE</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">n.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">elementId</span><span class="PUNC">:</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">jsPlumbInstance</span><span class="PUNC">:</span><span class="NAME">br</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">n.Anchors</span><span class="PUNC">[</span><span class="NAME">bE</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">au</span><span class="PUNC">(</span><span class="NAME">bE</span><span class="PUNC">,</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bD</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">:</span><span class="NAME">bE</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">:</span><span class="NAME">bE</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">orientation</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">bE.length</span><span class="PUNC">>=</span><span class="NUMB">4</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="PUNC">[</span><span class="NAME">bE</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">offsets</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">bE.length</span><span class="PUNC">==</span><span class="NUMB">6</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="PUNC">[</span><span class="NAME">bE</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">[</span><span class="NUMB">5</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">elementId</span><span class="PUNC">:</span><span class="NAME">bB</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">ab</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bC.clone</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">ab</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">bC.id</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bC.id</span><span class="PUNC">=</span><span class="STRN">"anchor_"</span><span class="PUNC">+</span><span class="NAME">an</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.makeAnchors</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bD</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bB</span><span class="PUNC">&lt;</span><span class="NAME">bC.length</span><span class="PUNC">;</span><span class="NAME">bB</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="PUNC">[</span><span class="NAME">bB</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="STRN">"string"</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bD.push</span><span class="PUNC">(</span><span class="NAME">n.Anchors</span><span class="PUNC">[</span><span class="NAME">bC</span><span class="PUNC">[</span><span class="NAME">bB</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">elementId</span><span class="PUNC">:</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">jsPlumbInstance</span><span class="PUNC">:</span><span class="NAME">bz</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">[</span><span class="NAME">bB</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bD.push</span><span class="PUNC">(</span><span class="NAME">br.makeAnchor</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">[</span><span class="NAME">bB</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bD</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.makeDynamicAnchor</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">au</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">a1</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">aK</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bl</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">at</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">ac</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bz.paintStyle</span><span class="PUNC">=</span><span class="NAME">bz.paintStyle</span><span class="PUNC">||</span><span class="NAME">br.Defaults.EndpointStyles</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="NAME">br.Defaults.EndpointStyle</span><span class="PUNC">||</span><span class="NAME">n.Defaults.EndpointStyles</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="NAME">n.Defaults.EndpointStyle</span><span class="PUNC">;</span><span class="NAME">bz.hoverPaintStyle</span><span class="PUNC">=</span><span class="NAME">bz.hoverPaintStyle</span><span class="PUNC">||</span><span class="NAME">br.Defaults.EndpointHoverStyles</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="NAME">br.Defaults.EndpointHoverStyle</span><span class="PUNC">||</span><span class="NAME">n.Defaults.EndpointHoverStyles</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="NAME">n.Defaults.EndpointHoverStyle</span><span class="PUNC">;</span><span class="NAME">bz.anchor</span><span class="PUNC">=</span><span class="NAME">bz.anchor</span><span class="PUNC">||</span><span class="NAME">br.Defaults.Anchors</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="NAME">br.Defaults.Anchor</span><span class="PUNC">||</span><span class="NAME">n.Defaults.Anchors</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="NAME">n.Defaults.Anchor</span><span class="PUNC">;</span><span class="NAME">bz.endpoint</span><span class="PUNC">=</span><span class="NAME">bz.endpoint</span><span class="PUNC">||</span><span class="NAME">br.Defaults.Endpoints</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="NAME">br.Defaults.Endpoint</span><span class="PUNC">||</span><span class="NAME">n.Defaults.Endpoints</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="NAME">n.Defaults.Endpoint</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.makeTarget</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="NAME">bD</span><span class="PUNC">,</span><span class="NAME">bJ</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NAME">n.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">_jsPlumb</span><span class="PUNC">:</span><span class="NAME">br</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bJ</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n.extend</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bD</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">ac</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bH</span><span class="PUNC">=</span><span class="NAME">n.CurrentLibrary</span><span class="PUNC">,</span><span class="NAME">bI</span><span class="PUNC">=</span><span class="NAME">bA.scope</span><span class="PUNC">||</span><span class="NAME">br.Defaults.Scope</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">bA.deleteEndpointsOnDetach</span><span class="PUNC">===</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NAME">bA.maxConnections</span><span class="PUNC">||</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">bA.onMaxConnections</span><span class="PUNC">;</span><span class="NAME">_doOne</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bO</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bM</span><span class="PUNC">=</span><span class="NAME">H</span><span class="PUNC">(</span><span class="NAME">bO</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">a1</span><span class="PUNC">[</span><span class="NAME">bM</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bA</span><span class="PUNC">;</span><span class="NAME">bl</span><span class="PUNC">[</span><span class="NAME">bM</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bA.uniqueEndpoint</span><span class="PUNC">,</span><span class="NAME">at</span><span class="PUNC">[</span><span class="NAME">bM</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">am</span><span class="PUNC">[</span><span class="NAME">bM</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="NAME">proxyComponent</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">B</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bL</span><span class="PUNC">=</span><span class="NAME">n.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bA.dropOptions</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bK</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bR</span><span class="PUNC">=</span><span class="NAME">n.CurrentLibrary.getDropEvent</span><span class="PUNC">(</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bT</span><span class="PUNC">=</span><span class="NAME">br.select</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">target</span><span class="PUNC">:</span><span class="NAME">bM</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">length</span><span class="PUNC">;</span><span class="NAME">br.currentlyDragging</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b3</span><span class="PUNC">=</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">bH.getDragObject</span><span class="PUNC">(</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bS</span><span class="PUNC">=</span><span class="NAME">c</span><span class="PUNC">(</span><span class="NAME">b3</span><span class="PUNC">,</span><span class="STRN">"dragId"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">b1</span><span class="PUNC">=</span><span class="NAME">c</span><span class="PUNC">(</span><span class="NAME">b3</span><span class="PUNC">,</span><span class="STRN">"originalScope"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bY</span><span class="PUNC">=</span><span class="NAME">bk</span><span class="PUNC">[</span><span class="NAME">bS</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bQ</span><span class="PUNC">=</span><span class="NAME">bY.endpoints</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bP</span><span class="PUNC">=</span><span class="NAME">bA.endpoint</span><span class="PUNC">?</span><span class="NAME">n.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bA.endpoint</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">am</span><span class="PUNC">[</span><span class="NAME">bM</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="NAME">at</span><span class="PUNC">[</span><span class="NAME">bM</span><span class="PUNC">]</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">&&</span><span class="NAME">bT</span><span class="PUNC">>=</span><span class="NAME">at</span><span class="PUNC">[</span><span class="NAME">bM</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bz</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">element</span><span class="PUNC">:</span><span class="NAME">bO</span><span class="PUNC">,</span><span class="NAME">connection</span><span class="PUNC">:</span><span class="NAME">bY</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bR</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">}</span><span class="NAME">bQ.anchor.locked</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">b1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bH.setDragScope</span><span class="PUNC">(</span><span class="NAME">b3</span><span class="PUNC">,</span><span class="NAME">b1</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bW</span><span class="PUNC">=</span><span class="NAME">proxyComponent.isDropAllowed</span><span class="PUNC">(</span><span class="NAME">bY.sourceId</span><span class="PUNC">,</span><span class="NAME">H</span><span class="PUNC">(</span><span class="NAME">bO</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bY.scope</span><span class="PUNC">,</span><span class="NAME">bY</span><span class="PUNC">,</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bY.endpointsToDeleteOnDetach</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bQ</span><span class="PUNC">===</span><span class="NAME">bY.endpointsToDeleteOnDetach</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bY.endpointsToDeleteOnDetach</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bQ</span><span class="PUNC">===</span><span class="NAME">bY.endpointsToDeleteOnDetach</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bY.endpointsToDeleteOnDetach</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bY.suspendedEndpoint</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bY.targetId</span><span class="PUNC">=</span><span class="NAME">bY.suspendedEndpoint.elementId</span><span class="PUNC">;</span><span class="NAME">bY.target</span><span class="PUNC">=</span><span class="NAME">bH.getElementObject</span><span class="PUNC">(</span><span class="NAME">bY.suspendedEndpoint.elementId</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bY.endpoints</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bY.suspendedEndpoint</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bW</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bQ.detach</span><span class="PUNC">(</span><span class="NAME">bY</span><span class="PUNC">,</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b2</span><span class="PUNC">=</span><span class="NAME">aK</span><span class="PUNC">[</span><span class="NAME">bM</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="NAME">br.addEndpoint</span><span class="PUNC">(</span><span class="NAME">bO</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bA.uniqueEndpoint</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">aK</span><span class="PUNC">[</span><span class="NAME">bM</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">b2</span><span class="PUNC">}</span><span class="NAME">b2._makeTargetCreator</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">b2.anchor.positionFinder</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bZ</span><span class="PUNC">=</span><span class="NAME">bH.getUIPosition</span><span class="PUNC">(</span><span class="NAME">arguments</span><span class="PUNC">,</span><span class="NAME">br.getZoom</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bV</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">(</span><span class="NAME">bO</span><span class="PUNC">,</span><span class="NAME">br</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">b0</span><span class="PUNC">=</span><span class="NAME">a</span><span class="PUNC">(</span><span class="NAME">bO</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bU</span><span class="PUNC">=</span><span class="NAME">b2.anchor.positionFinder</span><span class="PUNC">(</span><span class="NAME">bZ</span><span class="PUNC">,</span><span class="NAME">bV</span><span class="PUNC">,</span><span class="NAME">b0</span><span class="PUNC">,</span><span class="NAME">b2.anchor.constructorParams</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">b2.anchor.x</span><span class="PUNC">=</span><span class="NAME">bU</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">b2.anchor.y</span><span class="PUNC">=</span><span class="NAME">bU</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bX</span><span class="PUNC">=</span><span class="NAME">br.connect</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">source</span><span class="PUNC">:</span><span class="NAME">bQ</span><span class="PUNC">,</span><span class="NAME">target</span><span class="PUNC">:</span><span class="NAME">b2</span><span class="PUNC">,</span><span class="NAME">scope</span><span class="PUNC">:</span><span class="NAME">b1</span><span class="PUNC">,</span><span class="NAME">previousConnection</span><span class="PUNC">:</span><span class="NAME">bY</span><span class="PUNC">,</span><span class="NAME">container</span><span class="PUNC">:</span><span class="NAME">bY.parent</span><span class="PUNC">,</span><span class="NAME">deleteEndpointsOnDetach</span><span class="PUNC">:</span><span class="NAME">bE</span><span class="PUNC">,</span><span class="NAME">doNotFireConnectionEvent</span><span class="PUNC">:</span><span class="NAME">bQ.endpointWillMoveAfterConnection</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bY.endpoints</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">_makeTargetCreator</span><span class="PUNC">&&</span><span class="NAME">bY.endpoints</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">connections.length</span><span class="PUNC">&lt;</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">br.deleteEndpoint</span><span class="PUNC">(</span><span class="NAME">bY.endpoints</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bE</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bX.endpointsToDeleteOnDetach</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="NAME">bQ</span><span class="PUNC">,</span><span class="NAME">b2</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="NAME">bX.repaint</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bY.suspendedEndpoint</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bY.isReattach</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bY.setHover</span><span class="PUNC">(</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bY.floatingAnchorIndex</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="NAME">bY.suspendedEndpoint.addConnection</span><span class="PUNC">(</span><span class="NAME">bY</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">br.repaint</span><span class="PUNC">(</span><span class="NAME">bQ.elementId</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">bQ.detach</span><span class="PUNC">(</span><span class="NAME">bY</span><span class="PUNC">,</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="NAME">bR</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bN</span><span class="PUNC">=</span><span class="NAME">bH.dragEvents.drop</span><span class="PUNC">;</span><span class="NAME">bL.scope</span><span class="PUNC">=</span><span class="NAME">bL.scope</span><span class="PUNC">||</span><span class="NAME">bI</span><span class="PUNC">;</span><span class="NAME">bL</span><span class="PUNC">[</span><span class="NAME">bN</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">ap</span><span class="PUNC">(</span><span class="NAME">bL</span><span class="PUNC">[</span><span class="NAME">bN</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bK</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bH.initDroppable</span><span class="PUNC">(</span><span class="NAME">bO</span><span class="PUNC">,</span><span class="NAME">bL</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">aL</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bG</span><span class="PUNC">=</span><span class="NAME">bC.length</span><span class="PUNC">&&</span><span class="NAME">bC.constructor</span><span class="PUNC">!=</span><span class="NAME">String</span><span class="PUNC">?</span><span class="NAME">bC</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NAME">bC</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bF</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bF</span><span class="PUNC">&lt;</span><span class="NAME">bG.length</span><span class="PUNC">;</span><span class="NAME">bF</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">_doOne</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">bG</span><span class="PUNC">[</span><span class="NAME">bF</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">br</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.unmakeTarget</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NAME">n.CurrentLibrary.getElementObject</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">H</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">a1</span><span class="PUNC">[</span><span class="NAME">bz</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">bl</span><span class="PUNC">[</span><span class="NAME">bz</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">at</span><span class="PUNC">[</span><span class="NAME">bz</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">am</span><span class="PUNC">[</span><span class="NAME">bz</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">br</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.makeTargets</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bA</span><span class="PUNC">&lt;</span><span class="NAME">bB.length</span><span class="PUNC">;</span><span class="NAME">bA</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">br.makeTarget</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">aB</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">a6</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bc</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">ae</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">J</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">N</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">am</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.makeSource</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">,</span><span class="NAME">bI</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NAME">n.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bI</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n.extend</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">ac</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bH</span><span class="PUNC">=</span><span class="NAME">n.CurrentLibrary</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">bB.maxConnections</span><span class="PUNC">||</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NAME">bB.onMaxConnections</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bQ</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bK</span><span class="PUNC">=</span><span class="NAME">H</span><span class="PUNC">(</span><span class="NAME">bQ</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bR</span><span class="PUNC">=</span><span class="NAME">bB.parent</span><span class="PUNC">,</span><span class="NAME">bJ</span><span class="PUNC">=</span><span class="NAME">bR</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">?</span><span class="NAME">br.getId</span><span class="PUNC">(</span><span class="NAME">bH.getElementObject</span><span class="PUNC">(</span><span class="NAME">bR</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">bK</span><span class="PUNC">;</span><span class="NAME">aB</span><span class="PUNC">[</span><span class="NAME">bJ</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bB</span><span class="PUNC">;</span><span class="NAME">bc</span><span class="PUNC">[</span><span class="NAME">bJ</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bB.uniqueEndpoint</span><span class="PUNC">;</span><span class="NAME">ae</span><span class="PUNC">[</span><span class="NAME">bJ</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bL</span><span class="PUNC">=</span><span class="NAME">bH.dragEvents.stop</span><span class="PUNC">,</span><span class="NAME">bP</span><span class="PUNC">=</span><span class="NAME">bH.dragEvents.drag</span><span class="PUNC">,</span><span class="NAME">bS</span><span class="PUNC">=</span><span class="NAME">n.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bB.dragOptions</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bN</span><span class="PUNC">=</span><span class="NAME">bS.drag</span><span class="PUNC">,</span><span class="NAME">bT</span><span class="PUNC">=</span><span class="NAME">bS.stop</span><span class="PUNC">,</span><span class="NAME">bU</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">bO</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="NAME">N</span><span class="PUNC">[</span><span class="NAME">bJ</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bC</span><span class="PUNC">;</span><span class="NAME">bS.scope</span><span class="PUNC">=</span><span class="NAME">bS.scope</span><span class="PUNC">||</span><span class="NAME">bB.scope</span><span class="PUNC">;</span><span class="NAME">bS</span><span class="PUNC">[</span><span class="NAME">bP</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">ap</span><span class="PUNC">(</span><span class="NAME">bS</span><span class="PUNC">[</span><span class="NAME">bP</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bN</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bN.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">bO</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bS</span><span class="PUNC">[</span><span class="NAME">bL</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">ap</span><span class="PUNC">(</span><span class="NAME">bS</span><span class="PUNC">[</span><span class="NAME">bL</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bT</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bT.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">br.currentlyDragging</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bU.connections.length</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">br.deleteEndpoint</span><span class="PUNC">(</span><span class="NAME">bU</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">bH.unbind</span><span class="PUNC">(</span><span class="NAME">bU.canvas</span><span class="PUNC">,</span><span class="STRN">"mousedown"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bW</span><span class="PUNC">=</span><span class="NAME">bB.anchor</span><span class="PUNC">||</span><span class="NAME">br.Defaults.Anchor</span><span class="PUNC">,</span><span class="NAME">bX</span><span class="PUNC">=</span><span class="NAME">bU.anchor</span><span class="PUNC">,</span><span class="NAME">bZ</span><span class="PUNC">=</span><span class="NAME">bU.connections</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">bU.anchor</span><span class="PUNC">=</span><span class="NAME">br.makeAnchor</span><span class="PUNC">(</span><span class="NAME">bW</span><span class="PUNC">,</span><span class="NAME">bK</span><span class="PUNC">,</span><span class="NAME">br</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bB.parent</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bY</span><span class="PUNC">=</span><span class="NAME">bH.getElementObject</span><span class="PUNC">(</span><span class="NAME">bB.parent</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bY</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bV</span><span class="PUNC">=</span><span class="NAME">bU.elementId</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b0</span><span class="PUNC">=</span><span class="NAME">bB.container</span><span class="PUNC">||</span><span class="NAME">br.Defaults.Container</span><span class="PUNC">||</span><span class="NAME">n.Defaults.Container</span><span class="PUNC">;</span><span class="NAME">bU.setElement</span><span class="PUNC">(</span><span class="NAME">bY</span><span class="PUNC">,</span><span class="NAME">b0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bU.endpointWillMoveAfterConnection</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="NAME">br.anchorManager.rehomeEndpoint</span><span class="PUNC">(</span><span class="NAME">bV</span><span class="PUNC">,</span><span class="NAME">bY</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bZ.previousConnection</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="NAME">A</span><span class="PUNC">(</span><span class="NAME">a0</span><span class="PUNC">[</span><span class="NAME">bZ.scope</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">b1.id</span><span class="PUNC">===</span><span class="NAME">bZ.id</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">br.anchorManager.connectionDetached</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">sourceId</span><span class="PUNC">:</span><span class="NAME">bZ.sourceId</span><span class="PUNC">,</span><span class="NAME">targetId</span><span class="PUNC">:</span><span class="NAME">bZ.targetId</span><span class="PUNC">,</span><span class="NAME">connection</span><span class="PUNC">:</span><span class="NAME">bZ</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bx</span><span class="PUNC">(</span><span class="NAME">bZ</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="NAME">bU.repaint</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">br.repaint</span><span class="PUNC">(</span><span class="NAME">bU.elementId</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">br.repaint</span><span class="PUNC">(</span><span class="NAME">bZ.targetId</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bM</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bZ</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">ae</span><span class="PUNC">[</span><span class="NAME">bJ</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bX</span><span class="PUNC">=</span><span class="NAME">br.select</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">source</span><span class="PUNC">:</span><span class="NAME">bJ</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">length</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">N</span><span class="PUNC">[</span><span class="NAME">bJ</span><span class="PUNC">]</span><span class="PUNC">>=</span><span class="NUMB">0</span><span class="PUNC">&&</span><span class="NAME">bX</span><span class="PUNC">>=</span><span class="NAME">N</span><span class="PUNC">[</span><span class="NAME">bJ</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bA</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">element</span><span class="PUNC">:</span><span class="NAME">bQ</span><span class="PUNC">,</span><span class="NAME">maxConnections</span><span class="PUNC">:</span><span class="NAME">bC</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bZ</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bE.filter</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bV</span><span class="PUNC">=</span><span class="NAME">bE.filter</span><span class="PUNC">(</span><span class="NAME">bH.getOriginalEvent</span><span class="PUNC">(</span><span class="NAME">bZ</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bQ</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bV</span><span class="PUNC">===</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b3</span><span class="PUNC">=</span><span class="NAME">X</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">elId</span><span class="PUNC">:</span><span class="NAME">bK</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b2</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">bZ.pageX</span><span class="PUNC">||</span><span class="NAME">bZ.page.x</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">b3.left</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">b3.width</span><span class="PUNC">,</span><span class="NAME">b1</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">bZ.pageY</span><span class="PUNC">||</span><span class="NAME">bZ.page.y</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">b3.top</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">b3.height</span><span class="PUNC">,</span><span class="NAME">b7</span><span class="PUNC">=</span><span class="NAME">b2</span><span class="PUNC">,</span><span class="NAME">b6</span><span class="PUNC">=</span><span class="NAME">b1</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bB.parent</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b0</span><span class="PUNC">=</span><span class="NAME">bH.getElementObject</span><span class="PUNC">(</span><span class="NAME">bB.parent</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bY</span><span class="PUNC">=</span><span class="NAME">H</span><span class="PUNC">(</span><span class="NAME">b0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">b3</span><span class="PUNC">=</span><span class="NAME">X</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">elId</span><span class="PUNC">:</span><span class="NAME">bY</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">b7</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">bZ.pageX</span><span class="PUNC">||</span><span class="NAME">bZ.page.x</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">b3.left</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">b3.width</span><span class="PUNC">,</span><span class="NAME">b6</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">bZ.pageY</span><span class="PUNC">||</span><span class="NAME">bZ.page.y</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">b3.top</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">b3.height</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b5</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">n.extend</span><span class="PUNC">(</span><span class="NAME">b5</span><span class="PUNC">,</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">b5.isSource</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="NAME">b5.anchor</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="NAME">b2</span><span class="PUNC">,</span><span class="NAME">b1</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">b5.parentAnchor</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="NAME">b7</span><span class="PUNC">,</span><span class="NAME">b6</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">b5.dragOptions</span><span class="PUNC">=</span><span class="NAME">bS</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bB.parent</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bW</span><span class="PUNC">=</span><span class="NAME">b5.container</span><span class="PUNC">||</span><span class="NAME">br.Defaults.Container</span><span class="PUNC">||</span><span class="NAME">n.Defaults.Container</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bW</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">b5.container</span><span class="PUNC">=</span><span class="NAME">bW</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">b5.container</span><span class="PUNC">=</span><span class="NAME">n.CurrentLibrary.getParent</span><span class="PUNC">(</span><span class="NAME">bB.parent</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="NAME">bU</span><span class="PUNC">=</span><span class="NAME">br.addEndpoint</span><span class="PUNC">(</span><span class="NAME">bK</span><span class="PUNC">,</span><span class="NAME">b5</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bO</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="NAME">bU.endpointWillMoveAfterConnection</span><span class="PUNC">=</span><span class="NAME">bB.parent</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="NAME">bU.endpointWillMoveTo</span><span class="PUNC">=</span><span class="NAME">bB.parent</span><span class="PUNC">?</span><span class="NAME">bH.getElementObject</span><span class="PUNC">(</span><span class="NAME">bB.parent</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b4</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bO</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">br.deleteEndpoint</span><span class="PUNC">(</span><span class="NAME">bU</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">br.registerListener</span><span class="PUNC">(</span><span class="NAME">bU.canvas</span><span class="PUNC">,</span><span class="STRN">"mouseup"</span><span class="PUNC">,</span><span class="NAME">b4</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">br.registerListener</span><span class="PUNC">(</span><span class="NAME">bQ</span><span class="PUNC">,</span><span class="STRN">"mouseup"</span><span class="PUNC">,</span><span class="NAME">b4</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bH.trigger</span><span class="PUNC">(</span><span class="NAME">bU.canvas</span><span class="PUNC">,</span><span class="STRN">"mousedown"</span><span class="PUNC">,</span><span class="NAME">bZ</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">br.registerListener</span><span class="PUNC">(</span><span class="NAME">bQ</span><span class="PUNC">,</span><span class="STRN">"mousedown"</span><span class="PUNC">,</span><span class="NAME">bM</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">J</span><span class="PUNC">[</span><span class="NAME">bK</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bM</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">bD</span><span class="PUNC">=</span><span class="NAME">aL</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bG</span><span class="PUNC">=</span><span class="NAME">bD.length</span><span class="PUNC">&&</span><span class="NAME">bD.constructor</span><span class="PUNC">!=</span><span class="NAME">String</span><span class="PUNC">?</span><span class="NAME">bD</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NAME">bD</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bF</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bF</span><span class="PUNC">&lt;</span><span class="NAME">bG.length</span><span class="PUNC">;</span><span class="NAME">bF</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bz</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">bG</span><span class="PUNC">[</span><span class="NAME">bF</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">br</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.unmakeSource</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NAME">n.CurrentLibrary.getElementObject</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">H</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">J</span><span class="PUNC">[</span><span class="NAME">bC</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">br.unregisterListener</span><span class="PUNC">(</span><span class="NAME">_el</span><span class="PUNC">,</span><span class="STRN">"mousedown"</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">aB</span><span class="PUNC">[</span><span class="NAME">bC</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">bc</span><span class="PUNC">[</span><span class="NAME">bC</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">ae</span><span class="PUNC">[</span><span class="NAME">bC</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">J</span><span class="PUNC">[</span><span class="NAME">bC</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">N</span><span class="PUNC">[</span><span class="NAME">bC</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">br</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.unmakeEverySource</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">ae</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">br.unmakeSource</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">aB</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">bc</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">ae</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">J</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.unmakeEveryTarget</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">am</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">br.unmakeTarget</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">a1</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">bl</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">at</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">am</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">br</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.makeSources</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bA</span><span class="PUNC">&lt;</span><span class="NAME">bB.length</span><span class="PUNC">;</span><span class="NAME">bA</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">br.makeSource</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">br</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">aP</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NAME">bD</span><span class="PUNC">==</span><span class="STRN">"source"</span><span class="PUNC">?</span><span class="NAME">ae</span><span class="PUNC">:</span><span class="NAME">am</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">z</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bA</span><span class="PUNC">[</span><span class="NAME">bC</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bz</span><span class="PUNC">?</span><span class="PUNC">!</span><span class="NAME">bA</span><span class="PUNC">[</span><span class="NAME">bC</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="NAME">bE</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bC.length</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">aL</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bB</span><span class="PUNC">&lt;</span><span class="NAME">bC.length</span><span class="PUNC">;</span><span class="NAME">bB</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bF</span><span class="PUNC">=</span><span class="NAME">_el</span><span class="PUNC">=</span><span class="NAME">n.CurrentLibrary.getElementObject</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">[</span><span class="NAME">bB</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bF</span><span class="PUNC">=</span><span class="NAME">H</span><span class="PUNC">(</span><span class="NAME">_el</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bA</span><span class="PUNC">[</span><span class="NAME">bF</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bz</span><span class="PUNC">?</span><span class="PUNC">!</span><span class="NAME">bA</span><span class="PUNC">[</span><span class="NAME">bF</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="NAME">bE</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">br</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.setSourceEnabled</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">aP</span><span class="PUNC">(</span><span class="STRN">"source"</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.toggleSourceEnabled</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">aP</span><span class="PUNC">(</span><span class="STRN">"source"</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">br.isSourceEnabled</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.isSource</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">n.CurrentLibrary.getElementObject</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">ae</span><span class="PUNC">[</span><span class="NAME">H</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.isSourceEnabled</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">n.CurrentLibrary.getElementObject</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">ae</span><span class="PUNC">[</span><span class="NAME">H</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">===</span><span class="KEYW">true</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.setTargetEnabled</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">aP</span><span class="PUNC">(</span><span class="STRN">"target"</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.toggleTargetEnabled</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">aP</span><span class="PUNC">(</span><span class="STRN">"target"</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">br.isTargetEnabled</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.isTarget</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">n.CurrentLibrary.getElementObject</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">am</span><span class="PUNC">[</span><span class="NAME">H</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.isTargetEnabled</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">n.CurrentLibrary.getElementObject</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">am</span><span class="PUNC">[</span><span class="NAME">H</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">===</span><span class="KEYW">true</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.ready</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">br.bind</span><span class="PUNC">(</span><span class="STRN">"ready"</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.repaint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">==</span><span class="STRN">"object"</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bz</span><span class="PUNC">&lt;</span><span class="NAME">bA.length</span><span class="PUNC">;</span><span class="NAME">bz</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">be</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">[</span><span class="NAME">bz</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">be</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">br</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.repaintEverything</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">aV</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">be</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">br</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.removeAllEndpoints</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">c</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="STRN">"id"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">aV</span><span class="PUNC">[</span><span class="NAME">bz</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bA</span><span class="PUNC">&lt;</span><span class="NAME">bC.length</span><span class="PUNC">;</span><span class="NAME">bA</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">br.deleteEndpoint</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="NAME">aV</span><span class="PUNC">[</span><span class="NAME">bz</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">br</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ai</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bi</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">ai</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bz</span><span class="PUNC">&lt;</span><span class="NAME">ai</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">length</span><span class="PUNC">;</span><span class="NAME">bz</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NAME">ai</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">bz</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">n.CurrentLibrary.unbind</span><span class="PUNC">(</span><span class="NAME">bB.el</span><span class="PUNC">,</span><span class="NAME">bB.event</span><span class="PUNC">,</span><span class="NAME">bB.listener</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="NAME">ai</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.registerListener</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">n.CurrentLibrary.bind</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">W</span><span class="PUNC">(</span><span class="NAME">ai</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">el</span><span class="PUNC">:</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">event</span><span class="PUNC">:</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="NAME">listener</span><span class="PUNC">:</span><span class="NAME">bB</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.unregisterListener</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">n.CurrentLibrary.unbind</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">A</span><span class="PUNC">(</span><span class="NAME">ai</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bC.type</span><span class="PUNC">==</span><span class="NAME">bz</span><span class="PUNC">&&</span><span class="NAME">bC.listener</span><span class="PUNC">==</span><span class="NAME">bB</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.reset</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">br.deleteEveryEndpoint</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">br.unbind</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">a1</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">aK</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">bl</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">at</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">aB</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">a6</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">bc</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">N</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">bi</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">br.anchorManager.reset</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">jsPlumbAdapter.headless</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">br.dragManager.reset</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.setDefaultScope</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">R</span><span class="PUNC">=</span><span class="NAME">bz</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">br</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.setDraggable</span><span class="PUNC">=</span><span class="NAME">bo</span><span class="PUNC">;</span><span class="NAME">this.setId</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="NAME">bF</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bG</span><span class="PUNC">=</span><span class="NAME">bD.constructor</span><span class="PUNC">==</span><span class="NAME">String</span><span class="PUNC">?</span><span class="NAME">bD</span><span class="PUNC">:</span><span class="NAME">br.getId</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">br.getConnections</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">source</span><span class="PUNC">:</span><span class="NAME">bG</span><span class="PUNC">,</span><span class="NAME">scope</span><span class="PUNC">:</span><span class="STRN">"*"</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NAME">br.getConnections</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">target</span><span class="PUNC">:</span><span class="NAME">bG</span><span class="PUNC">,</span><span class="NAME">scope</span><span class="PUNC">:</span><span class="STRN">"*"</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bz</span><span class="PUNC">=</span><span class="STRN">""</span><span class="PUNC">+</span><span class="NAME">bz</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">bF</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bD</span><span class="PUNC">=</span><span class="NAME">n.CurrentLibrary.getElementObject</span><span class="PUNC">(</span><span class="NAME">bG</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n.CurrentLibrary.setAttribute</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">,</span><span class="STRN">"id"</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">bD</span><span class="PUNC">=</span><span class="NAME">n.CurrentLibrary.getElementObject</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">aV</span><span class="PUNC">[</span><span class="NAME">bz</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">aV</span><span class="PUNC">[</span><span class="NAME">bG</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bA</span><span class="PUNC">&lt;</span><span class="NAME">aV</span><span class="PUNC">[</span><span class="NAME">bz</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">length</span><span class="PUNC">;</span><span class="NAME">bA</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">aV</span><span class="PUNC">[</span><span class="NAME">bz</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">elementId</span><span class="PUNC">=</span><span class="NAME">bz</span><span class="PUNC">;</span><span class="NAME">aV</span><span class="PUNC">[</span><span class="NAME">bz</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">element</span><span class="PUNC">=</span><span class="NAME">bD</span><span class="PUNC">;</span><span class="NAME">aV</span><span class="PUNC">[</span><span class="NAME">bz</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">anchor.elementId</span><span class="PUNC">=</span><span class="NAME">bz</span><span class="PUNC">}</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">aV</span><span class="PUNC">[</span><span class="NAME">bG</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">br.anchorManager.changeId</span><span class="PUNC">(</span><span class="NAME">bG</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bE</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bK</span><span class="PUNC">,</span><span class="NAME">bH</span><span class="PUNC">,</span><span class="NAME">bJ</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bI</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bI</span><span class="PUNC">&lt;</span><span class="NAME">bK.length</span><span class="PUNC">;</span><span class="NAME">bI</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bK</span><span class="PUNC">[</span><span class="NAME">bI</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">endpoints</span><span class="PUNC">[</span><span class="NAME">bH</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">elementId</span><span class="PUNC">=</span><span class="NAME">bz</span><span class="PUNC">;</span><span class="NAME">bK</span><span class="PUNC">[</span><span class="NAME">bI</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">endpoints</span><span class="PUNC">[</span><span class="NAME">bH</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">element</span><span class="PUNC">=</span><span class="NAME">bD</span><span class="PUNC">;</span><span class="NAME">bK</span><span class="PUNC">[</span><span class="NAME">bI</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">bJ</span><span class="PUNC">+</span><span class="STRN">"Id"</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bz</span><span class="PUNC">;</span><span class="NAME">bK</span><span class="PUNC">[</span><span class="NAME">bI</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">bJ</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bD</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">bE</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="STRN">"source"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bE</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="STRN">"target"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.setIdChanged</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">br.setId</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.setDebugLog</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">O</span><span class="PUNC">=</span><span class="NAME">bz</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">a9</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="NAME">bd</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="NAME">this.setSuspendDrawing</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">a9</span><span class="PUNC">=</span><span class="NAME">bA</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bd</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Date</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getTime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">bd</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">br.repaintEverything</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.isSuspendDrawing</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">a9</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.CANVAS</span><span class="PUNC">=</span><span class="STRN">"canvas"</span><span class="PUNC">;</span><span class="NAME">this.SVG</span><span class="PUNC">=</span><span class="STRN">"svg"</span><span class="PUNC">;</span><span class="NAME">this.VML</span><span class="PUNC">=</span><span class="STRN">"vml"</span><span class="PUNC">;</span><span class="NAME">this.setRenderMode</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">Y</span><span class="PUNC">=</span><span class="NAME">jsPlumbAdapter.setRenderMode</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">Y</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getRenderMode</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">Y</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.show</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">a7</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="STRN">"block"</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">br</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.sizeCanvas</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="NAME">bD</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bB.style.height</span><span class="PUNC">=</span><span class="NAME">bC</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">;</span><span class="NAME">bB.height</span><span class="PUNC">=</span><span class="NAME">bC</span><span class="PUNC">;</span><span class="NAME">bB.style.width</span><span class="PUNC">=</span><span class="NAME">bA</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">;</span><span class="NAME">bB.width</span><span class="PUNC">=</span><span class="NAME">bA</span><span class="PUNC">;</span><span class="NAME">bB.style.left</span><span class="PUNC">=</span><span class="NAME">bz</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">;</span><span class="NAME">bB.style.top</span><span class="PUNC">=</span><span class="NAME">bD</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">br</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getTestHarness</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">{</span><span class="NAME">endpointsByElement</span><span class="PUNC">:</span><span class="NAME">aV</span><span class="PUNC">,</span><span class="NAME">endpointCount</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NAME">aV</span><span class="PUNC">[</span><span class="NAME">bz</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">?</span><span class="NAME">bA.length</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">connectionCount</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">bz</span><span class="PUNC">||</span><span class="NAME">R</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NAME">a0</span><span class="PUNC">[</span><span class="NAME">bz</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">?</span><span class="NAME">bA.length</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getId</span><span class="PUNC">:</span><span class="NAME">H</span><span class="PUNC">,</span><span class="NAME">makeAnchor</span><span class="PUNC">:</span><span class="NAME">self.makeAnchor</span><span class="PUNC">,</span><span class="NAME">makeDynamicAnchor</span><span class="PUNC">:</span><span class="NAME">self.makeDynamicAnchor</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.toggle</span><span class="PUNC">=</span><span class="NAME">aS</span><span class="PUNC">;</span><span class="NAME">this.toggleVisible</span><span class="PUNC">=</span><span class="NAME">aS</span><span class="PUNC">;</span><span class="NAME">this.toggleDraggable</span><span class="PUNC">=</span><span class="NAME">bm</span><span class="PUNC">;</span><span class="NAME">this.wrap</span><span class="PUNC">=</span><span class="NAME">ap</span><span class="PUNC">;</span><span class="NAME">this.addListener</span><span class="PUNC">=</span><span class="NAME">this.bind</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bs</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bE</span><span class="PUNC">,</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">bE</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bB.tagName.toLowerCase</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">===</span><span class="STRN">"svg"</span><span class="PUNC">&&</span><span class="NAME">bB.parentNode</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">bB.parentNode</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bB.offsetParent</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">bB.offsetParent</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NAME">bC.tagName.toLowerCase</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">===</span><span class="STRN">"body"</span><span class="PUNC">?</span><span class="PUNC">{</span><span class="NAME">left</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">top</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">:</span><span class="NAME">s</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="NAME">br</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bD</span><span class="PUNC">=</span><span class="NAME">bC.tagName.toLowerCase</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">===</span><span class="STRN">"body"</span><span class="PUNC">?</span><span class="PUNC">{</span><span class="NAME">left</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">top</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">left</span><span class="PUNC">:</span><span class="NAME">bC.scrollLeft</span><span class="PUNC">,</span><span class="NAME">top</span><span class="PUNC">:</span><span class="NAME">bC.scrollTop</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">bz</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bE</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">bA.left</span><span class="PUNC">+</span><span class="NAME">bD.left</span><span class="PUNC">;</span><span class="NAME">bz</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bE</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">bA.top</span><span class="PUNC">+</span><span class="NAME">bD.top</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ab</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bB</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">;</span><span class="NAME">this.x</span><span class="PUNC">=</span><span class="NAME">bD.x</span><span class="PUNC">||</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">this.y</span><span class="PUNC">=</span><span class="NAME">bD.y</span><span class="PUNC">||</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">this.elementId</span><span class="PUNC">=</span><span class="NAME">bD.elementId</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NAME">bD.orientation</span><span class="PUNC">||</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="NAME">this.offsets</span><span class="PUNC">=</span><span class="NAME">bD.offsets</span><span class="PUNC">||</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">bB.timestamp</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="NAME">this.compute</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bI</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bH</span><span class="PUNC">=</span><span class="NAME">bI.xy</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">=</span><span class="NAME">bI.wh</span><span class="PUNC">,</span><span class="NAME">bF</span><span class="PUNC">=</span><span class="NAME">bI.element</span><span class="PUNC">,</span><span class="NAME">bG</span><span class="PUNC">=</span><span class="NAME">bI.timestamp</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bG</span><span class="PUNC">&&</span><span class="NAME">bG</span><span class="PUNC">===</span><span class="NAME">bB.timestamp</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">}</span><span class="NAME">bz</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="NAME">bH</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">bB.x</span><span class="PUNC">*</span><span class="NAME">bE</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">bB.offsets</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bH</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">bB.y</span><span class="PUNC">*</span><span class="NAME">bE</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">bB.offsets</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">bs</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="NAME">bF.canvas</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bB.timestamp</span><span class="PUNC">=</span><span class="NAME">bG</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getOrientation</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bE</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.equals</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bE</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">bE</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bF</span><span class="PUNC">=</span><span class="NAME">bE.getOrientation</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bG</span><span class="PUNC">=</span><span class="NAME">this.getOrientation</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.x</span><span class="PUNC">==</span><span class="NAME">bE.x</span><span class="PUNC">&&</span><span class="NAME">this.y</span><span class="PUNC">==</span><span class="NAME">bE.y</span><span class="PUNC">&&</span><span class="NAME">this.offsets</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NAME">bE.offsets</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">&&</span><span class="NAME">this.offsets</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NAME">bE.offsets</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">&&</span><span class="NAME">bG</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NAME">bF</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">&&</span><span class="NAME">bG</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NAME">bF</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getCurrentLocation</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">a3</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bF</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bD</span><span class="PUNC">=</span><span class="NAME">bF.reference</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">=</span><span class="NAME">bF.referenceCanvas</span><span class="PUNC">,</span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NAME">a</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">bE</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">bG</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="NAME">this.x</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">this.y</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">this.isFloating</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="NAME">this.compute</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bK</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bJ</span><span class="PUNC">=</span><span class="NAME">bK.xy</span><span class="PUNC">,</span><span class="NAME">bI</span><span class="PUNC">=</span><span class="NAME">bK.element</span><span class="PUNC">,</span><span class="NAME">bH</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="NAME">bJ</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bJ</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">bH</span><span class="PUNC">=</span><span class="NAME">bs</span><span class="PUNC">(</span><span class="NAME">bH</span><span class="PUNC">,</span><span class="NAME">bI.canvas</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">bH</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bH</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getOrientation</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bI</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bH</span><span class="PUNC">=</span><span class="NAME">bD.getOrientation</span><span class="PUNC">(</span><span class="NAME">bI</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">bH</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">bA</span><span class="PUNC">*</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">bH</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">bG</span><span class="PUNC">*</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.over</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bH</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">bH.getOrientation</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.out</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bz</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getCurrentLocation</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">au</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bG</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.isSelective</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="NAME">this.isDynamic</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bJ</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bI</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">bH</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bK</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bK.constructor</span><span class="PUNC">==</span><span class="NAME">ab</span><span class="PUNC">?</span><span class="NAME">bK</span><span class="PUNC">:</span><span class="NAME">br.makeAnchor</span><span class="PUNC">(</span><span class="NAME">bK</span><span class="PUNC">,</span><span class="NAME">bG</span><span class="PUNC">,</span><span class="NAME">br</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bF</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bF</span><span class="PUNC">&lt;</span><span class="NAME">bB.length</span><span class="PUNC">;</span><span class="NAME">bF</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bJ</span><span class="PUNC">[</span><span class="NAME">bF</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bH</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">[</span><span class="NAME">bF</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">this.addAnchor</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bK</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bJ.push</span><span class="PUNC">(</span><span class="NAME">bH</span><span class="PUNC">(</span><span class="NAME">bK</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getAnchors</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bJ</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.locked</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">bJ.length</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">?</span><span class="NAME">bJ</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">=</span><span class="NAME">bJ.length</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">?</span><span class="NUMB">0</span><span class="PUNC">:</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">bI</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">bD</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bM</span><span class="PUNC">,</span><span class="NAME">bK</span><span class="PUNC">,</span><span class="NAME">bQ</span><span class="PUNC">,</span><span class="NAME">bP</span><span class="PUNC">,</span><span class="NAME">bL</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bO</span><span class="PUNC">=</span><span class="NAME">bP</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">bM.x</span><span class="PUNC">*</span><span class="NAME">bL</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bN</span><span class="PUNC">=</span><span class="NAME">bP</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">bM.y</span><span class="PUNC">*</span><span class="NAME">bL</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">Math.sqrt</span><span class="PUNC">(</span><span class="NAME">Math.pow</span><span class="PUNC">(</span><span class="NAME">bK</span><span class="PUNC">-</span><span class="NAME">bO</span><span class="PUNC">,</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">Math.pow</span><span class="PUNC">(</span><span class="NAME">bQ</span><span class="PUNC">-</span><span class="NAME">bN</span><span class="PUNC">,</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">bA</span><span class="PUNC">||</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bU</span><span class="PUNC">,</span><span class="NAME">bL</span><span class="PUNC">,</span><span class="NAME">bM</span><span class="PUNC">,</span><span class="NAME">bN</span><span class="PUNC">,</span><span class="NAME">bK</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bP</span><span class="PUNC">=</span><span class="NAME">bM</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">bN</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bO</span><span class="PUNC">=</span><span class="NAME">bM</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">bN</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bR</span><span class="PUNC">=</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">bT</span><span class="PUNC">=</span><span class="NAME">Infinity</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bQ</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bQ</span><span class="PUNC">&lt;</span><span class="NAME">bK.length</span><span class="PUNC">;</span><span class="NAME">bQ</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bS</span><span class="PUNC">=</span><span class="NAME">bD</span><span class="PUNC">(</span><span class="NAME">bK</span><span class="PUNC">[</span><span class="NAME">bQ</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bP</span><span class="PUNC">,</span><span class="NAME">bO</span><span class="PUNC">,</span><span class="NAME">bU</span><span class="PUNC">,</span><span class="NAME">bL</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bS</span><span class="PUNC">&lt;</span><span class="NAME">bT</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bR</span><span class="PUNC">=</span><span class="NAME">bQ</span><span class="PUNC">+</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bT</span><span class="PUNC">=</span><span class="NAME">bS</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bK</span><span class="PUNC">[</span><span class="NAME">bR</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.compute</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bO</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bN</span><span class="PUNC">=</span><span class="NAME">bO.xy</span><span class="PUNC">,</span><span class="NAME">bK</span><span class="PUNC">=</span><span class="NAME">bO.wh</span><span class="PUNC">,</span><span class="NAME">bM</span><span class="PUNC">=</span><span class="NAME">bO.timestamp</span><span class="PUNC">,</span><span class="NAME">bL</span><span class="PUNC">=</span><span class="NAME">bO.txy</span><span class="PUNC">,</span><span class="NAME">bP</span><span class="PUNC">=</span><span class="NAME">bO.twh</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bI.locked</span><span class="PUNC">||</span><span class="NAME">bL</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">||</span><span class="NAME">bP</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bC.compute</span><span class="PUNC">(</span><span class="NAME">bO</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">bO.timestamp</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">bz</span><span class="PUNC">(</span><span class="NAME">bN</span><span class="PUNC">,</span><span class="NAME">bK</span><span class="PUNC">,</span><span class="NAME">bL</span><span class="PUNC">,</span><span class="NAME">bP</span><span class="PUNC">,</span><span class="NAME">bJ</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bI.x</span><span class="PUNC">=</span><span class="NAME">bC.x</span><span class="PUNC">;</span><span class="NAME">bI.y</span><span class="PUNC">=</span><span class="NAME">bC.y</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bC.compute</span><span class="PUNC">(</span><span class="NAME">bO</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getCurrentLocation</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">?</span><span class="NAME">bC.getCurrentLocation</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getOrientation</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bK</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">?</span><span class="NAME">bC.getOrientation</span><span class="PUNC">(</span><span class="NAME">bK</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.over</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bK</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bC.over</span><span class="PUNC">(</span><span class="NAME">bK</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.out</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bC.out</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bn</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">ak</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">aM</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">U</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">HORIZONTAL</span><span class="PUNC">:</span><span class="STRN">"horizontal"</span><span class="PUNC">,</span><span class="NAME">VERTICAL</span><span class="PUNC">:</span><span class="STRN">"vertical"</span><span class="PUNC">,</span><span class="NAME">DIAGONAL</span><span class="PUNC">:</span><span class="STRN">"diagonal"</span><span class="PUNC">,</span><span class="NAME">IDENTITY</span><span class="PUNC">:</span><span class="STRN">"identity"</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bp</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bI</span><span class="PUNC">,</span><span class="NAME">bJ</span><span class="PUNC">,</span><span class="NAME">bF</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bI</span><span class="PUNC">===</span><span class="NAME">bJ</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">{</span><span class="NAME">orientation</span><span class="PUNC">:</span><span class="NAME">U.IDENTITY</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="STRN">"top"</span><span class="PUNC">,</span><span class="STRN">"top"</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NAME">Math.atan2</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">bC.centery</span><span class="PUNC">-</span><span class="NAME">bF.centery</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="PUNC">(</span><span class="NAME">bC.centerx</span><span class="PUNC">-</span><span class="NAME">bF.centerx</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bD</span><span class="PUNC">=</span><span class="NAME">Math.atan2</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">bF.centery</span><span class="PUNC">-</span><span class="NAME">bC.centery</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="PUNC">(</span><span class="NAME">bF.centerx</span><span class="PUNC">-</span><span class="NAME">bC.centerx</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">bF.left</span><span class="PUNC">&lt;=</span><span class="NAME">bC.left</span><span class="PUNC">&&</span><span class="NAME">bF.right</span><span class="PUNC">>=</span><span class="NAME">bC.left</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">bF.left</span><span class="PUNC">&lt;=</span><span class="NAME">bC.right</span><span class="PUNC">&&</span><span class="NAME">bF.right</span><span class="PUNC">>=</span><span class="NAME">bC.right</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">bF.left</span><span class="PUNC">&lt;=</span><span class="NAME">bC.left</span><span class="PUNC">&&</span><span class="NAME">bF.right</span><span class="PUNC">>=</span><span class="NAME">bC.right</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">bC.left</span><span class="PUNC">&lt;=</span><span class="NAME">bF.left</span><span class="PUNC">&&</span><span class="NAME">bC.right</span><span class="PUNC">>=</span><span class="NAME">bF.right</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bK</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">bF.top</span><span class="PUNC">&lt;=</span><span class="NAME">bC.top</span><span class="PUNC">&&</span><span class="NAME">bF.bottom</span><span class="PUNC">>=</span><span class="NAME">bC.top</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">bF.top</span><span class="PUNC">&lt;=</span><span class="NAME">bC.bottom</span><span class="PUNC">&&</span><span class="NAME">bF.bottom</span><span class="PUNC">>=</span><span class="NAME">bC.bottom</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">bF.top</span><span class="PUNC">&lt;=</span><span class="NAME">bC.top</span><span class="PUNC">&&</span><span class="NAME">bF.bottom</span><span class="PUNC">>=</span><span class="NAME">bC.bottom</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">bC.top</span><span class="PUNC">&lt;=</span><span class="NAME">bF.top</span><span class="PUNC">&&</span><span class="NAME">bC.bottom</span><span class="PUNC">>=</span><span class="NAME">bF.bottom</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">bE</span><span class="PUNC">||</span><span class="NAME">bK</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bH</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">bB</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="NAME">bG</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bC.left</span><span class="PUNC">></span><span class="NAME">bF.left</span><span class="PUNC">&&</span><span class="NAME">bC.top</span><span class="PUNC">></span><span class="NAME">bF.top</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bH</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="STRN">"right"</span><span class="PUNC">,</span><span class="STRN">"top"</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bC.left</span><span class="PUNC">></span><span class="NAME">bF.left</span><span class="PUNC">&&</span><span class="NAME">bF.top</span><span class="PUNC">></span><span class="NAME">bC.top</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bH</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="STRN">"top"</span><span class="PUNC">,</span><span class="STRN">"left"</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bC.left</span><span class="PUNC">&lt;</span><span class="NAME">bF.left</span><span class="PUNC">&&</span><span class="NAME">bC.top</span><span class="PUNC">&lt;</span><span class="NAME">bF.top</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bH</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="STRN">"top"</span><span class="PUNC">,</span><span class="STRN">"right"</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bC.left</span><span class="PUNC">&lt;</span><span class="NAME">bF.left</span><span class="PUNC">&&</span><span class="NAME">bC.top</span><span class="PUNC">></span><span class="NAME">bF.top</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bH</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="STRN">"left"</span><span class="PUNC">,</span><span class="STRN">"top"</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="PUNC">{</span><span class="NAME">orientation</span><span class="PUNC">:</span><span class="NAME">U.DIAGONAL</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">:</span><span class="NAME">bH</span><span class="PUNC">,</span><span class="NAME">theta</span><span class="PUNC">:</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">theta2</span><span class="PUNC">:</span><span class="NAME">bD</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bE</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">{</span><span class="NAME">orientation</span><span class="PUNC">:</span><span class="NAME">U.HORIZONTAL</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">:</span><span class="NAME">bF.top</span><span class="PUNC">&lt;</span><span class="NAME">bC.top</span><span class="PUNC">?</span><span class="PUNC">[</span><span class="STRN">"bottom"</span><span class="PUNC">,</span><span class="STRN">"top"</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="STRN">"top"</span><span class="PUNC">,</span><span class="STRN">"bottom"</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">theta</span><span class="PUNC">:</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">theta2</span><span class="PUNC">:</span><span class="NAME">bD</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">{</span><span class="NAME">orientation</span><span class="PUNC">:</span><span class="NAME">U.VERTICAL</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">:</span><span class="NAME">bF.left</span><span class="PUNC">&lt;</span><span class="NAME">bC.left</span><span class="PUNC">?</span><span class="PUNC">[</span><span class="STRN">"right"</span><span class="PUNC">,</span><span class="STRN">"left"</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="STRN">"left"</span><span class="PUNC">,</span><span class="STRN">"right"</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">theta</span><span class="PUNC">:</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">theta2</span><span class="PUNC">:</span><span class="NAME">bD</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">a5</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bN</span><span class="PUNC">,</span><span class="NAME">bJ</span><span class="PUNC">,</span><span class="NAME">bH</span><span class="PUNC">,</span><span class="NAME">bI</span><span class="PUNC">,</span><span class="NAME">bO</span><span class="PUNC">,</span><span class="NAME">bK</span><span class="PUNC">,</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bP</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NAME">bJ</span><span class="PUNC">[</span><span class="NAME">bO</span><span class="PUNC">?</span><span class="NUMB">0</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">/</span><span class="PUNC">(</span><span class="NAME">bI.length</span><span class="PUNC">+</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bL</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bL</span><span class="PUNC">&lt;</span><span class="NAME">bI.length</span><span class="PUNC">;</span><span class="NAME">bL</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bQ</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">bL</span><span class="PUNC">+</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">bK</span><span class="PUNC">*</span><span class="NAME">bJ</span><span class="PUNC">[</span><span class="NAME">bO</span><span class="PUNC">?</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bQ</span><span class="PUNC">=</span><span class="NAME">bJ</span><span class="PUNC">[</span><span class="NAME">bO</span><span class="PUNC">?</span><span class="NUMB">0</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">bQ</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bG</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">bO</span><span class="PUNC">?</span><span class="NAME">bQ</span><span class="PUNC">:</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bD</span><span class="PUNC">=</span><span class="NAME">bH</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="NAME">bG</span><span class="PUNC">,</span><span class="NAME">bF</span><span class="PUNC">=</span><span class="NAME">bG</span><span class="PUNC">/</span><span class="NAME">bJ</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">bO</span><span class="PUNC">?</span><span class="NAME">bz</span><span class="PUNC">:</span><span class="NAME">bQ</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">bH</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="NAME">bE</span><span class="PUNC">,</span><span class="NAME">bM</span><span class="PUNC">=</span><span class="NAME">bE</span><span class="PUNC">/</span><span class="NAME">bJ</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">bP.push</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">bD</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="NAME">bF</span><span class="PUNC">,</span><span class="NAME">bM</span><span class="PUNC">,</span><span class="NAME">bI</span><span class="PUNC">[</span><span class="NAME">bL</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bI</span><span class="PUNC">[</span><span class="NAME">bL</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bP</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bb</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">></span><span class="NAME">bz</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">?</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">aa</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">&lt;</span><span class="NAME">bA</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">bB</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">></span><span class="NAME">bA</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">></span><span class="NAME">bA</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">bB</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">></span><span class="NAME">bA</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="PUNC">===</span><span class="KEYW">false</span><span class="PUNC">?</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">M</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">bA</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">&lt;</span><span class="NUMB">0</span><span class="PUNC">?</span><span class="PUNC">-</span><span class="NAME">Math.PI</span><span class="PUNC">-</span><span class="NAME">bA</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="NAME">Math.PI</span><span class="PUNC">-</span><span class="NAME">bA</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NAME">bz</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">&lt;</span><span class="NUMB">0</span><span class="PUNC">?</span><span class="PUNC">-</span><span class="NAME">Math.PI</span><span class="PUNC">-</span><span class="NAME">bz</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="NAME">Math.PI</span><span class="PUNC">-</span><span class="NAME">bz</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">></span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">></span><span class="NAME">bz</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">?</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">a2</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">top</span><span class="PUNC">:</span><span class="NAME">bb</span><span class="PUNC">,</span><span class="NAME">right</span><span class="PUNC">:</span><span class="NAME">aa</span><span class="PUNC">(</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bottom</span><span class="PUNC">:</span><span class="NAME">aa</span><span class="PUNC">(</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">left</span><span class="PUNC">:</span><span class="NAME">M</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">ar</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bz.sort</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">ao</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">ag</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bD</span><span class="PUNC">=</span><span class="NAME">aj</span><span class="PUNC">[</span><span class="NAME">bA</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bB</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bK</span><span class="PUNC">,</span><span class="NAME">bR</span><span class="PUNC">,</span><span class="NAME">bG</span><span class="PUNC">,</span><span class="NAME">bJ</span><span class="PUNC">,</span><span class="NAME">bP</span><span class="PUNC">,</span><span class="NAME">bO</span><span class="PUNC">,</span><span class="NAME">bF</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bJ.length</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bN</span><span class="PUNC">=</span><span class="NAME">ar</span><span class="PUNC">(</span><span class="NAME">bJ</span><span class="PUNC">,</span><span class="NAME">a2</span><span class="PUNC">[</span><span class="NAME">bK</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bL</span><span class="PUNC">=</span><span class="NAME">bK</span><span class="PUNC">===</span><span class="STRN">"right"</span><span class="PUNC">||</span><span class="NAME">bK</span><span class="PUNC">===</span><span class="STRN">"top"</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">=</span><span class="NAME">a5</span><span class="PUNC">(</span><span class="NAME">bK</span><span class="PUNC">,</span><span class="NAME">bR</span><span class="PUNC">,</span><span class="NAME">bG</span><span class="PUNC">,</span><span class="NAME">bN</span><span class="PUNC">,</span><span class="NAME">bP</span><span class="PUNC">,</span><span class="NAME">bO</span><span class="PUNC">,</span><span class="NAME">bL</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bS</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bV</span><span class="PUNC">,</span><span class="NAME">bU</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bT</span><span class="PUNC">=</span><span class="NAME">bs</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">bU</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bU</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bV.canvas</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">ak</span><span class="PUNC">[</span><span class="NAME">bV.id</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="NAME">bT</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bT</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bU</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bU</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">aM</span><span class="PUNC">[</span><span class="NAME">bV.id</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bF</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bH</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bH</span><span class="PUNC">&lt;</span><span class="NAME">bE.length</span><span class="PUNC">;</span><span class="NAME">bH</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bM</span><span class="PUNC">=</span><span class="NAME">bE</span><span class="PUNC">[</span><span class="NAME">bH</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bQ</span><span class="PUNC">=</span><span class="NAME">bM.endpoints</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">elementId</span><span class="PUNC">===</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">bI</span><span class="PUNC">=</span><span class="NAME">bM.endpoints</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">elementId</span><span class="PUNC">===</span><span class="NAME">bA</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bQ</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bS</span><span class="PUNC">(</span><span class="NAME">bM.endpoints</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">[</span><span class="NAME">bH</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bI</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bS</span><span class="PUNC">(</span><span class="NAME">bM.endpoints</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">[</span><span class="NAME">bH</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">bB</span><span class="PUNC">(</span><span class="STRN">"bottom"</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">bD.left</span><span class="PUNC">,</span><span class="NAME">bD.top</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bz.bottom</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bB</span><span class="PUNC">(</span><span class="STRN">"top"</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">bD.left</span><span class="PUNC">,</span><span class="NAME">bD.top</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bz.top</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bB</span><span class="PUNC">(</span><span class="STRN">"left"</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">bD.left</span><span class="PUNC">,</span><span class="NAME">bD.top</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bz.left</span><span class="PUNC">,</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bB</span><span class="PUNC">(</span><span class="STRN">"right"</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">bD.left</span><span class="PUNC">,</span><span class="NAME">bD.top</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bz.right</span><span class="PUNC">,</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">aG</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bD</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.reset</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bz</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">bD</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.newConnection</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bH</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bJ</span><span class="PUNC">=</span><span class="NAME">bH.sourceId</span><span class="PUNC">,</span><span class="NAME">bG</span><span class="PUNC">=</span><span class="NAME">bH.targetId</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">=</span><span class="NAME">bH.endpoints</span><span class="PUNC">,</span><span class="NAME">bI</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="NAME">bF</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bK</span><span class="PUNC">,</span><span class="NAME">bL</span><span class="PUNC">,</span><span class="NAME">bN</span><span class="PUNC">,</span><span class="NAME">bM</span><span class="PUNC">,</span><span class="NAME">bO</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">bJ</span><span class="PUNC">==</span><span class="NAME">bG</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NAME">bN.isContinuous</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">n.CurrentLibrary.removeElement</span><span class="PUNC">(</span><span class="NAME">bE</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">canvas</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bI</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">}</span><span class="NAME">W</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">,</span><span class="NAME">bM</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">bO</span><span class="PUNC">,</span><span class="NAME">bL</span><span class="PUNC">,</span><span class="NAME">bN.constructor</span><span class="PUNC">==</span><span class="NAME">au</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">bF</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">anchor</span><span class="PUNC">,</span><span class="NAME">bG</span><span class="PUNC">,</span><span class="NAME">bH</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bI</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bF</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">anchor</span><span class="PUNC">,</span><span class="NAME">bJ</span><span class="PUNC">,</span><span class="NAME">bH</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.connectionDetached</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bE</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bF</span><span class="PUNC">=</span><span class="NAME">bE.connection</span><span class="PUNC">||</span><span class="NAME">bE</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bK</span><span class="PUNC">=</span><span class="NAME">bF.sourceId</span><span class="PUNC">,</span><span class="NAME">bL</span><span class="PUNC">=</span><span class="NAME">bF.targetId</span><span class="PUNC">,</span><span class="NAME">bO</span><span class="PUNC">=</span><span class="NAME">bF.endpoints</span><span class="PUNC">,</span><span class="NAME">bJ</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bP</span><span class="PUNC">,</span><span class="NAME">bQ</span><span class="PUNC">,</span><span class="NAME">bS</span><span class="PUNC">,</span><span class="NAME">bR</span><span class="PUNC">,</span><span class="NAME">bT</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bS.constructor</span><span class="PUNC">==</span><span class="NAME">a3</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">A</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">[</span><span class="NAME">bR</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bU</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bU</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">id</span><span class="PUNC">==</span><span class="NAME">bT.id</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">bJ</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">bO</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bO</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">anchor</span><span class="PUNC">,</span><span class="NAME">bK</span><span class="PUNC">,</span><span class="NAME">bF</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bJ</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">bO</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bO</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">anchor</span><span class="PUNC">,</span><span class="NAME">bL</span><span class="PUNC">,</span><span class="NAME">bF</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bG</span><span class="PUNC">=</span><span class="NAME">bF.sourceId</span><span class="PUNC">,</span><span class="NAME">bH</span><span class="PUNC">=</span><span class="NAME">bF.targetId</span><span class="PUNC">,</span><span class="NAME">bN</span><span class="PUNC">=</span><span class="NAME">bF.endpoints</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">id</span><span class="PUNC">,</span><span class="NAME">bI</span><span class="PUNC">=</span><span class="NAME">bF.endpoints</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">id</span><span class="PUNC">,</span><span class="NAME">bM</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bR</span><span class="PUNC">,</span><span class="NAME">bP</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bR</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bQ</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bS</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bS</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NAME">bP</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">A</span><span class="PUNC">(</span><span class="NAME">bR.top</span><span class="PUNC">,</span><span class="NAME">bQ</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">A</span><span class="PUNC">(</span><span class="NAME">bR.left</span><span class="PUNC">,</span><span class="NAME">bQ</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">A</span><span class="PUNC">(</span><span class="NAME">bR.bottom</span><span class="PUNC">,</span><span class="NAME">bQ</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">A</span><span class="PUNC">(</span><span class="NAME">bR.right</span><span class="PUNC">,</span><span class="NAME">bQ</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">bM</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">[</span><span class="NAME">bG</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bN</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bM</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">[</span><span class="NAME">bH</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bI</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bA.redraw</span><span class="PUNC">(</span><span class="NAME">bG</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bA.redraw</span><span class="PUNC">(</span><span class="NAME">bH</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.add</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bF</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">W</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">,</span><span class="NAME">bF</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.changeId</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bF</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bD</span><span class="PUNC">[</span><span class="NAME">bE</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bD</span><span class="PUNC">[</span><span class="NAME">bF</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">bz</span><span class="PUNC">[</span><span class="NAME">bE</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bz</span><span class="PUNC">[</span><span class="NAME">bF</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">bD</span><span class="PUNC">[</span><span class="NAME">bF</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">[</span><span class="NAME">bF</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getConnectionsFor</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bE</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bD</span><span class="PUNC">[</span><span class="NAME">bE</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getEndpointsFor</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bE</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">[</span><span class="NAME">bE</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.deleteEndpoint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bE</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">A</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">[</span><span class="NAME">bE.elementId</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bF</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bF.id</span><span class="PUNC">==</span><span class="NAME">bE.id</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.clearFor</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bE</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">[</span><span class="NAME">bE</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">bz</span><span class="PUNC">[</span><span class="NAME">bE</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bB</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bY</span><span class="PUNC">,</span><span class="NAME">bL</span><span class="PUNC">,</span><span class="NAME">bT</span><span class="PUNC">,</span><span class="NAME">bI</span><span class="PUNC">,</span><span class="NAME">bO</span><span class="PUNC">,</span><span class="NAME">bP</span><span class="PUNC">,</span><span class="NAME">bR</span><span class="PUNC">,</span><span class="NAME">bN</span><span class="PUNC">,</span><span class="NAME">b0</span><span class="PUNC">,</span><span class="NAME">bQ</span><span class="PUNC">,</span><span class="NAME">bH</span><span class="PUNC">,</span><span class="NAME">bX</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bV</span><span class="PUNC">=</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">bG</span><span class="PUNC">=</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">bJ</span><span class="PUNC">=</span><span class="NAME">bI.endpoints</span><span class="PUNC">[</span><span class="NAME">bR</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bS</span><span class="PUNC">=</span><span class="NAME">bJ.id</span><span class="PUNC">,</span><span class="NAME">bM</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">bR</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">[</span><span class="NAME">bL</span><span class="PUNC">,</span><span class="NAME">bT</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bI</span><span class="PUNC">,</span><span class="NAME">bO</span><span class="PUNC">,</span><span class="NAME">bP</span><span class="PUNC">,</span><span class="NAME">bS</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bF</span><span class="PUNC">=</span><span class="NAME">bY</span><span class="PUNC">[</span><span class="NAME">b0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bZ</span><span class="PUNC">=</span><span class="NAME">bJ._continuousAnchorEdge</span><span class="PUNC">?</span><span class="NAME">bY</span><span class="PUNC">[</span><span class="NAME">bJ._continuousAnchorEdge</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bZ</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bW</span><span class="PUNC">=</span><span class="NAME">g</span><span class="PUNC">(</span><span class="NAME">bZ</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">b1</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NAME">bS</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bW</span><span class="PUNC">!=</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bZ.splice</span><span class="PUNC">(</span><span class="NAME">bW</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bU</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bU</span><span class="PUNC">&lt;</span><span class="NAME">bZ.length</span><span class="PUNC">;</span><span class="NAME">bU</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">r</span><span class="PUNC">(</span><span class="NAME">bH</span><span class="PUNC">,</span><span class="NAME">bZ</span><span class="PUNC">[</span><span class="NAME">bU</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">b1.id</span><span class="PUNC">==</span><span class="NAME">bZ</span><span class="PUNC">[</span><span class="NAME">bU</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">id</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">(</span><span class="NAME">bX</span><span class="PUNC">,</span><span class="NAME">bZ</span><span class="PUNC">[</span><span class="NAME">bU</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">endpoints</span><span class="PUNC">[</span><span class="NAME">bR</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">b1.id</span><span class="PUNC">==</span><span class="NAME">bZ</span><span class="PUNC">[</span><span class="NAME">bU</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">endpoints</span><span class="PUNC">[</span><span class="NAME">bR</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">id</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bU</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bU</span><span class="PUNC">&lt;</span><span class="NAME">bF.length</span><span class="PUNC">;</span><span class="NAME">bU</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bR</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">&&</span><span class="NAME">bF</span><span class="PUNC">[</span><span class="NAME">bU</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">===</span><span class="NAME">bP</span><span class="PUNC">&&</span><span class="NAME">bG</span><span class="PUNC">==</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bG</span><span class="PUNC">=</span><span class="NAME">bU</span><span class="PUNC">}</span><span class="NAME">r</span><span class="PUNC">(</span><span class="NAME">bH</span><span class="PUNC">,</span><span class="NAME">bF</span><span class="PUNC">[</span><span class="NAME">bU</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">b1.id</span><span class="PUNC">==</span><span class="NAME">bF</span><span class="PUNC">[</span><span class="NAME">bU</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">id</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">(</span><span class="NAME">bX</span><span class="PUNC">,</span><span class="NAME">bF</span><span class="PUNC">[</span><span class="NAME">bU</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">endpoints</span><span class="PUNC">[</span><span class="NAME">bR</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">b1.id</span><span class="PUNC">==</span><span class="NAME">bF</span><span class="PUNC">[</span><span class="NAME">bU</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">endpoints</span><span class="PUNC">[</span><span class="NAME">bR</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">id</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bV</span><span class="PUNC">!=</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bF</span><span class="PUNC">[</span><span class="NAME">bV</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bE</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bK</span><span class="PUNC">=</span><span class="NAME">bN</span><span class="PUNC">?</span><span class="NAME">bG</span><span class="PUNC">!=</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">?</span><span class="NAME">bG</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">:</span><span class="NAME">bF.length</span><span class="PUNC">;</span><span class="NAME">bF.splice</span><span class="PUNC">(</span><span class="NAME">bK</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">bJ._continuousAnchorEdge</span><span class="PUNC">=</span><span class="NAME">b0</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.redraw</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bT</span><span class="PUNC">,</span><span class="NAME">bV</span><span class="PUNC">,</span><span class="NAME">bG</span><span class="PUNC">,</span><span class="NAME">bJ</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">a9</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b4</span><span class="PUNC">=</span><span class="NAME">bz</span><span class="PUNC">[</span><span class="NAME">bT</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">b3</span><span class="PUNC">=</span><span class="NAME">bD</span><span class="PUNC">[</span><span class="NAME">bT</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bF</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">b2</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bH</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">bG</span><span class="PUNC">=</span><span class="NAME">bG</span><span class="PUNC">||</span><span class="NAME">p</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bJ</span><span class="PUNC">=</span><span class="NAME">bJ</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="NAME">left</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">top</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bV</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bV</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">left</span><span class="PUNC">:</span><span class="NAME">bV.left</span><span class="PUNC">+</span><span class="NAME">bJ.left</span><span class="PUNC">,</span><span class="NAME">top</span><span class="PUNC">:</span><span class="NAME">bV.top</span><span class="PUNC">+</span><span class="NAME">bJ.top</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="NAME">X</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">elId</span><span class="PUNC">:</span><span class="NAME">bT</span><span class="PUNC">,</span><span class="NAME">offset</span><span class="PUNC">:</span><span class="NAME">bV</span><span class="PUNC">,</span><span class="NAME">recalc</span><span class="PUNC">:</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="NAME">timestamp</span><span class="PUNC">:</span><span class="NAME">bG</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bO</span><span class="PUNC">=</span><span class="NAME">aj</span><span class="PUNC">[</span><span class="NAME">bT</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bK</span><span class="PUNC">=</span><span class="NAME">ag</span><span class="PUNC">[</span><span class="NAME">bT</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bQ</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b0</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">b0</span><span class="PUNC">&lt;</span><span class="NAME">b3.length</span><span class="PUNC">;</span><span class="NAME">b0</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bL</span><span class="PUNC">=</span><span class="NAME">b3</span><span class="PUNC">[</span><span class="NAME">b0</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bN</span><span class="PUNC">=</span><span class="NAME">bL.sourceId</span><span class="PUNC">,</span><span class="NAME">bI</span><span class="PUNC">=</span><span class="NAME">bL.targetId</span><span class="PUNC">,</span><span class="NAME">bM</span><span class="PUNC">=</span><span class="NAME">bL.endpoints</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">anchor.isContinuous</span><span class="PUNC">,</span><span class="NAME">bS</span><span class="PUNC">=</span><span class="NAME">bL.endpoints</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">anchor.isContinuous</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bM</span><span class="PUNC">||</span><span class="NAME">bS</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b1</span><span class="PUNC">=</span><span class="NAME">bN</span><span class="PUNC">+</span><span class="STRN">"_"</span><span class="PUNC">+</span><span class="NAME">bI</span><span class="PUNC">,</span><span class="NAME">bY</span><span class="PUNC">=</span><span class="NAME">bI</span><span class="PUNC">+</span><span class="STRN">"_"</span><span class="PUNC">+</span><span class="NAME">bN</span><span class="PUNC">,</span><span class="NAME">bX</span><span class="PUNC">=</span><span class="NAME">bQ</span><span class="PUNC">[</span><span class="NAME">b1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bR</span><span class="PUNC">=</span><span class="NAME">bL.sourceId</span><span class="PUNC">==</span><span class="NAME">bT</span><span class="PUNC">?</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bM</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">bC</span><span class="PUNC">[</span><span class="NAME">bN</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bC</span><span class="PUNC">[</span><span class="NAME">bN</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">top</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">right</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bottom</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">left</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bS</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">bC</span><span class="PUNC">[</span><span class="NAME">bI</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bC</span><span class="PUNC">[</span><span class="NAME">bI</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">top</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">right</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bottom</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">left</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bT</span><span class="PUNC">!=</span><span class="NAME">bI</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">X</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">elId</span><span class="PUNC">:</span><span class="NAME">bI</span><span class="PUNC">,</span><span class="NAME">timestamp</span><span class="PUNC">:</span><span class="NAME">bG</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bT</span><span class="PUNC">!=</span><span class="NAME">bN</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">X</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">elId</span><span class="PUNC">:</span><span class="NAME">bN</span><span class="PUNC">,</span><span class="NAME">timestamp</span><span class="PUNC">:</span><span class="NAME">bG</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bP</span><span class="PUNC">=</span><span class="NAME">aQ</span><span class="PUNC">(</span><span class="NAME">bI</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">=</span><span class="NAME">aQ</span><span class="PUNC">(</span><span class="NAME">bN</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bI</span><span class="PUNC">==</span><span class="NAME">bN</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">bM</span><span class="PUNC">||</span><span class="NAME">bS</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bB</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">[</span><span class="NAME">bN</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">-</span><span class="NAME">Math.PI</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">bL</span><span class="PUNC">,</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="NAME">bI</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="STRN">"top"</span><span class="PUNC">,</span><span class="NAME">bN</span><span class="PUNC">,</span><span class="NAME">bF</span><span class="PUNC">,</span><span class="NAME">b2</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">bX</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bX</span><span class="PUNC">=</span><span class="NAME">bp</span><span class="PUNC">(</span><span class="NAME">bN</span><span class="PUNC">,</span><span class="NAME">bI</span><span class="PUNC">,</span><span class="NAME">bE.o</span><span class="PUNC">,</span><span class="NAME">bP.o</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bQ</span><span class="PUNC">[</span><span class="NAME">b1</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bX</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bM</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bB</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">[</span><span class="NAME">bN</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bX.theta</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">bL</span><span class="PUNC">,</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="NAME">bI</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="NAME">bX.a</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bN</span><span class="PUNC">,</span><span class="NAME">bF</span><span class="PUNC">,</span><span class="NAME">b2</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bS</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bB</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">[</span><span class="NAME">bI</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bX.theta2</span><span class="PUNC">,</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">bL</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="NAME">bN</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="NAME">bX.a</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bI</span><span class="PUNC">,</span><span class="NAME">bF</span><span class="PUNC">,</span><span class="NAME">b2</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bM</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">r</span><span class="PUNC">(</span><span class="NAME">bH</span><span class="PUNC">,</span><span class="NAME">bN</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b5</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">b5</span><span class="PUNC">===</span><span class="NAME">bN</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bS</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">r</span><span class="PUNC">(</span><span class="NAME">bH</span><span class="PUNC">,</span><span class="NAME">bI</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b5</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">b5</span><span class="PUNC">===</span><span class="NAME">bI</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">r</span><span class="PUNC">(</span><span class="NAME">bF</span><span class="PUNC">,</span><span class="NAME">bL</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b5</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">b5.id</span><span class="PUNC">==</span><span class="NAME">bL.id</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">bM</span><span class="PUNC">&&</span><span class="NAME">bR</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">bS</span><span class="PUNC">&&</span><span class="NAME">bR</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">r</span><span class="PUNC">(</span><span class="NAME">b2</span><span class="PUNC">,</span><span class="NAME">bL.endpoints</span><span class="PUNC">[</span><span class="NAME">bR</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b5</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">b5.id</span><span class="PUNC">==</span><span class="NAME">bL.endpoints</span><span class="PUNC">[</span><span class="NAME">bR</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">id</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b0</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">b0</span><span class="PUNC">&lt;</span><span class="NAME">b4.length</span><span class="PUNC">;</span><span class="NAME">b0</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">b4</span><span class="PUNC">[</span><span class="NAME">b0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">connections.length</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">&&</span><span class="NAME">b4</span><span class="PUNC">[</span><span class="NAME">b0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">anchor.isContinuous</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">bC</span><span class="PUNC">[</span><span class="NAME">bT</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bC</span><span class="PUNC">[</span><span class="NAME">bT</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">top</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">right</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bottom</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">left</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="NAME">bB</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">[</span><span class="NAME">bT</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">-</span><span class="NAME">Math.PI</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">endpoints</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NAME">b4</span><span class="PUNC">[</span><span class="NAME">b0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">b4</span><span class="PUNC">[</span><span class="NAME">b0</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">paint</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="NAME">bT</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="STRN">"top"</span><span class="PUNC">,</span><span class="NAME">bT</span><span class="PUNC">,</span><span class="NAME">bF</span><span class="PUNC">,</span><span class="NAME">b2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">(</span><span class="NAME">bH</span><span class="PUNC">,</span><span class="NAME">bT</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b5</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">b5</span><span class="PUNC">===</span><span class="NAME">bT</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b0</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">b0</span><span class="PUNC">&lt;</span><span class="NAME">bH.length</span><span class="PUNC">;</span><span class="NAME">b0</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">ao</span><span class="PUNC">(</span><span class="NAME">bH</span><span class="PUNC">[</span><span class="NAME">b0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">[</span><span class="NAME">bH</span><span class="PUNC">[</span><span class="NAME">b0</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b0</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">b0</span><span class="PUNC">&lt;</span><span class="NAME">b4.length</span><span class="PUNC">;</span><span class="NAME">b0</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">b4</span><span class="PUNC">[</span><span class="NAME">b0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">paint</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">timestamp</span><span class="PUNC">:</span><span class="NAME">bG</span><span class="PUNC">,</span><span class="NAME">offset</span><span class="PUNC">:</span><span class="NAME">bO</span><span class="PUNC">,</span><span class="NAME">dimensions</span><span class="PUNC">:</span><span class="NAME">bK</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b0</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">b0</span><span class="PUNC">&lt;</span><span class="NAME">b2.length</span><span class="PUNC">;</span><span class="NAME">b0</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">b2</span><span class="PUNC">[</span><span class="NAME">b0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">paint</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">timestamp</span><span class="PUNC">:</span><span class="NAME">bG</span><span class="PUNC">,</span><span class="NAME">offset</span><span class="PUNC">:</span><span class="NAME">bO</span><span class="PUNC">,</span><span class="NAME">dimensions</span><span class="PUNC">:</span><span class="NAME">bK</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b0</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">b0</span><span class="PUNC">&lt;</span><span class="NAME">b3.length</span><span class="PUNC">;</span><span class="NAME">b0</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bU</span><span class="PUNC">=</span><span class="NAME">b3</span><span class="PUNC">[</span><span class="NAME">b0</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bU.anchor.constructor</span><span class="PUNC">==</span><span class="NAME">au</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bU.paint</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">elementWithPrecedence</span><span class="PUNC">:</span><span class="NAME">bT</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">(</span><span class="NAME">bF</span><span class="PUNC">,</span><span class="NAME">b3</span><span class="PUNC">[</span><span class="NAME">b0</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b5</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">b5.id</span><span class="PUNC">==</span><span class="NAME">b3</span><span class="PUNC">[</span><span class="NAME">b0</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">id</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bZ</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bZ</span><span class="PUNC">&lt;</span><span class="NAME">bU.connections.length</span><span class="PUNC">;</span><span class="NAME">bZ</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bU.connections</span><span class="PUNC">[</span><span class="NAME">bZ</span><span class="PUNC">]</span><span class="PUNC">!==</span><span class="NAME">b3</span><span class="PUNC">[</span><span class="NAME">b0</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">r</span><span class="PUNC">(</span><span class="NAME">bF</span><span class="PUNC">,</span><span class="NAME">bU.connections</span><span class="PUNC">[</span><span class="NAME">bZ</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b5</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">b5.id</span><span class="PUNC">==</span><span class="NAME">bU.connections</span><span class="PUNC">[</span><span class="NAME">bZ</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">id</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bU.anchor.constructor</span><span class="PUNC">==</span><span class="NAME">ab</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">r</span><span class="PUNC">(</span><span class="NAME">bF</span><span class="PUNC">,</span><span class="NAME">b3</span><span class="PUNC">[</span><span class="NAME">b0</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b5</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">b5.id</span><span class="PUNC">==</span><span class="NAME">b3</span><span class="PUNC">[</span><span class="NAME">b0</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">id</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bW</span><span class="PUNC">=</span><span class="NAME">bk</span><span class="PUNC">[</span><span class="NAME">bT</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bW</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bW.paint</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">timestamp</span><span class="PUNC">:</span><span class="NAME">bG</span><span class="PUNC">,</span><span class="NAME">recalc</span><span class="PUNC">:</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="NAME">elId</span><span class="PUNC">:</span><span class="NAME">bT</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b0</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">b0</span><span class="PUNC">&lt;</span><span class="NAME">bF.length</span><span class="PUNC">;</span><span class="NAME">b0</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bF</span><span class="PUNC">[</span><span class="NAME">b0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">paint</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">elId</span><span class="PUNC">:</span><span class="NAME">bT</span><span class="PUNC">,</span><span class="NAME">timestamp</span><span class="PUNC">:</span><span class="NAME">bG</span><span class="PUNC">,</span><span class="NAME">recalc</span><span class="PUNC">:</span><span class="KEYW">false</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.rehomeEndpoint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bE</span><span class="PUNC">,</span><span class="NAME">bI</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bF</span><span class="PUNC">=</span><span class="NAME">bz</span><span class="PUNC">[</span><span class="NAME">bE</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bG</span><span class="PUNC">=</span><span class="NAME">br.getId</span><span class="PUNC">(</span><span class="NAME">bI</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bG</span><span class="PUNC">!==</span><span class="NAME">bE</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bH</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bH</span><span class="PUNC">&lt;</span><span class="NAME">bF.length</span><span class="PUNC">;</span><span class="NAME">bH</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bA.add</span><span class="PUNC">(</span><span class="NAME">bF</span><span class="PUNC">[</span><span class="NAME">bH</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bG</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">bF.splice</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">bF.length</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">br.anchorManager</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">aG</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">br.continuousAnchorFactory</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">get</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">bn</span><span class="PUNC">[</span><span class="NAME">bA.elementId</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bz</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">type</span><span class="PUNC">:</span><span class="STRN">"Continuous"</span><span class="PUNC">,</span><span class="NAME">compute</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">ak</span><span class="PUNC">[</span><span class="NAME">bB.element.id</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getCurrentLocation</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">ak</span><span class="PUNC">[</span><span class="NAME">bB.id</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getOrientation</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">aM</span><span class="PUNC">[</span><span class="NAME">bB.id</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">isDynamic</span><span class="PUNC">:</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="NAME">isContinuous</span><span class="PUNC">:</span><span class="KEYW">true</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">bn</span><span class="PUNC">[</span><span class="NAME">bA.elementId</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bz</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">jsPlumbAdapter.headless</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">br.dragManager</span><span class="PUNC">=</span><span class="NAME">jsPlumbAdapter.getDragManager</span><span class="PUNC">(</span><span class="NAME">br</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">az</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bU</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bK</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">bB</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="NAME">bP</span><span class="PUNC">,</span><span class="NAME">bQ</span><span class="PUNC">;</span><span class="NAME">bK.idPrefix</span><span class="PUNC">=</span><span class="STRN">"_jsplumb_c_"</span><span class="PUNC">;</span><span class="NAME">bK.defaultLabelLocation</span><span class="PUNC">=</span><span class="NUMB">0.5</span><span class="PUNC">;</span><span class="NAME">bK.defaultOverlayKeys</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="STRN">"Overlays"</span><span class="PUNC">,</span><span class="STRN">"ConnectionOverlays"</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">this.parent</span><span class="PUNC">=</span><span class="NAME">bU.parent</span><span class="PUNC">;</span><span class="NAME">x.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.isVisible</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bB</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.setVisible</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bW</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NAME">bW</span><span class="PUNC">;</span><span class="NAME">bK</span><span class="PUNC">[</span><span class="NAME">bW</span><span class="PUNC">?</span><span class="STRN">"showOverlays"</span><span class="PUNC">:</span><span class="STRN">"hideOverlays"</span><span class="PUNC">]</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bK.connector</span><span class="PUNC">&&</span><span class="NAME">bK.connector.canvas</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bK.connector.canvas.style.display</span><span class="PUNC">=</span><span class="NAME">bW</span><span class="PUNC">?</span><span class="STRN">"block"</span><span class="PUNC">:</span><span class="STRN">"none"</span><span class="PUNC">}</span><span class="NAME">bK.repaint</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getTypeDescriptor</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="STRN">"connection"</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getDefaultType</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">{</span><span class="NAME">parameters</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">scope</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">detachable</span><span class="PUNC">:</span><span class="NAME">bK._jsPlumb.Defaults.ConnectionsDetachable</span><span class="PUNC">,</span><span class="NAME">rettach</span><span class="PUNC">:</span><span class="NAME">bK._jsPlumb.Defaults.ReattachConnections</span><span class="PUNC">,</span><span class="NAME">paintStyle</span><span class="PUNC">:</span><span class="NAME">bK._jsPlumb.Defaults.PaintStyle</span><span class="PUNC">||</span><span class="NAME">n.Defaults.PaintStyle</span><span class="PUNC">,</span><span class="NAME">connector</span><span class="PUNC">:</span><span class="NAME">bK._jsPlumb.Defaults.Connector</span><span class="PUNC">||</span><span class="NAME">n.Defaults.Connector</span><span class="PUNC">,</span><span class="NAME">hoverPaintStyle</span><span class="PUNC">:</span><span class="NAME">bK._jsPlumb.Defaults.HoverPaintStyle</span><span class="PUNC">||</span><span class="NAME">n.Defaults.HoverPaintStyle</span><span class="PUNC">,</span><span class="NAME">overlays</span><span class="PUNC">:</span><span class="NAME">bK._jsPlumb.Defaults.ConnectorOverlays</span><span class="PUNC">||</span><span class="NAME">n.Defaults.ConnectorOverlays</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bS</span><span class="PUNC">=</span><span class="NAME">this.applyType</span><span class="PUNC">;</span><span class="NAME">this.applyType</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bW</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bS</span><span class="PUNC">(</span><span class="NAME">bW</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bW.detachable</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bK.setDetachable</span><span class="PUNC">(</span><span class="NAME">bW.detachable</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bW.reattach</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bK.setReattach</span><span class="PUNC">(</span><span class="NAME">bW.reattach</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bW.scope</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bK.scope</span><span class="PUNC">=</span><span class="NAME">bW.scope</span><span class="PUNC">}</span><span class="NAME">bK.setConnector</span><span class="PUNC">(</span><span class="NAME">bW.connector</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">bQ</span><span class="PUNC">=</span><span class="NAME">bK.setHover</span><span class="PUNC">;</span><span class="NAME">bK.setHover</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bX</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bW</span><span class="PUNC">=</span><span class="NAME">br.ConnectorZIndex</span><span class="PUNC">||</span><span class="NAME">n.Defaults.ConnectorZIndex</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bW</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bK.connector.setZIndex</span><span class="PUNC">(</span><span class="NAME">bW</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">bX</span><span class="PUNC">?</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">bK.connector.setHover.apply</span><span class="PUNC">(</span><span class="NAME">bK.connector</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bQ.apply</span><span class="PUNC">(</span><span class="NAME">bK</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">bP</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bW</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bK.setHover</span><span class="PUNC">(</span><span class="NAME">bW</span><span class="PUNC">,</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.setConnector</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bW</span><span class="PUNC">,</span><span class="NAME">bY</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bK.connector</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">aZ</span><span class="PUNC">(</span><span class="NAME">bK.connector.getDisplayElements</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bK.parent</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bZ</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">_jsPlumb</span><span class="PUNC">:</span><span class="NAME">bK._jsPlumb</span><span class="PUNC">,</span><span class="NAME">parent</span><span class="PUNC">:</span><span class="NAME">bU.parent</span><span class="PUNC">,</span><span class="NAME">cssClass</span><span class="PUNC">:</span><span class="NAME">bU.cssClass</span><span class="PUNC">,</span><span class="NAME">container</span><span class="PUNC">:</span><span class="NAME">bU.container</span><span class="PUNC">,</span><span class="NAME">tooltip</span><span class="PUNC">:</span><span class="NAME">bK.tooltip</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">z</span><span class="PUNC">(</span><span class="NAME">bW</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.connector</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">n.Connectors</span><span class="PUNC">[</span><span class="NAME">Y</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">bW</span><span class="PUNC">]</span><span class="PUNC">(</span><span class="NAME">bZ</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">(</span><span class="NAME">bW</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bW.length</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.connector</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">n.Connectors</span><span class="PUNC">[</span><span class="NAME">Y</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">bW</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">(</span><span class="NAME">bZ</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">this.connector</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">n.Connectors</span><span class="PUNC">[</span><span class="NAME">Y</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">bW</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">(</span><span class="NAME">n.extend</span><span class="PUNC">(</span><span class="NAME">bW</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bZ</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="NAME">bK.canvas</span><span class="PUNC">=</span><span class="NAME">bK.connector.canvas</span><span class="PUNC">;</span><span class="NAME">D</span><span class="PUNC">(</span><span class="NAME">bK.connector</span><span class="PUNC">,</span><span class="NAME">bK</span><span class="PUNC">,</span><span class="NAME">bP</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bX</span><span class="PUNC">=</span><span class="NAME">br.ConnectorZIndex</span><span class="PUNC">||</span><span class="NAME">n.Defaults.ConnectorZIndex</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bX</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bK.connector.setZIndex</span><span class="PUNC">(</span><span class="NAME">bX</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">bY</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bK.repaint</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.source</span><span class="PUNC">=</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">bU.source</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.target</span><span class="PUNC">=</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">bU.target</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bU.sourceEndpoint</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.source</span><span class="PUNC">=</span><span class="NAME">bU.sourceEndpoint.endpointWillMoveTo</span><span class="PUNC">||</span><span class="NAME">bU.sourceEndpoint.getElement</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bU.targetEndpoint</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.target</span><span class="PUNC">=</span><span class="NAME">bU.targetEndpoint.getElement</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">bK.previousConnection</span><span class="PUNC">=</span><span class="NAME">bU.previousConnection</span><span class="PUNC">;</span><span class="NAME">this.sourceId</span><span class="PUNC">=</span><span class="NAME">c</span><span class="PUNC">(</span><span class="NAME">this.source</span><span class="PUNC">,</span><span class="STRN">"id"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.targetId</span><span class="PUNC">=</span><span class="NAME">c</span><span class="PUNC">(</span><span class="NAME">this.target</span><span class="PUNC">,</span><span class="STRN">"id"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.scope</span><span class="PUNC">=</span><span class="NAME">bU.scope</span><span class="PUNC">;</span><span class="NAME">this.endpoints</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">this.endpointStyles</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bT</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bX</span><span class="PUNC">,</span><span class="NAME">bW</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">bX</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NAME">br.makeAnchor</span><span class="PUNC">(</span><span class="NAME">bX</span><span class="PUNC">,</span><span class="NAME">bW</span><span class="PUNC">,</span><span class="NAME">br</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bO</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bW</span><span class="PUNC">,</span><span class="NAME">b2</span><span class="PUNC">,</span><span class="NAME">bX</span><span class="PUNC">,</span><span class="NAME">bZ</span><span class="PUNC">,</span><span class="NAME">b0</span><span class="PUNC">,</span><span class="NAME">bY</span><span class="PUNC">,</span><span class="NAME">b1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b3</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bW</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bK.endpoints</span><span class="PUNC">[</span><span class="NAME">b2</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bW</span><span class="PUNC">;</span><span class="NAME">bW.addConnection</span><span class="PUNC">(</span><span class="NAME">bK</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">bX.endpoints</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bX.endpoints</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="KEYW">null</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b8</span><span class="PUNC">=</span><span class="NAME">bX.endpoints</span><span class="PUNC">[</span><span class="NAME">b2</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="NAME">bX.endpoint</span><span class="PUNC">||</span><span class="NAME">br.Defaults.Endpoints</span><span class="PUNC">[</span><span class="NAME">b2</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="NAME">n.Defaults.Endpoints</span><span class="PUNC">[</span><span class="NAME">b2</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="NAME">br.Defaults.Endpoint</span><span class="PUNC">||</span><span class="NAME">n.Defaults.Endpoint</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">bX.endpointStyles</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bX.endpointStyles</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="KEYW">null</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">bX.endpointHoverStyles</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bX.endpointHoverStyles</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="KEYW">null</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b6</span><span class="PUNC">=</span><span class="NAME">bX.endpointStyles</span><span class="PUNC">[</span><span class="NAME">b2</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="NAME">bX.endpointStyle</span><span class="PUNC">||</span><span class="NAME">br.Defaults.EndpointStyles</span><span class="PUNC">[</span><span class="NAME">b2</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="NAME">n.Defaults.EndpointStyles</span><span class="PUNC">[</span><span class="NAME">b2</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="NAME">br.Defaults.EndpointStyle</span><span class="PUNC">||</span><span class="NAME">n.Defaults.EndpointStyle</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">b6.fillStyle</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">&&</span><span class="NAME">bY</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">b6.fillStyle</span><span class="PUNC">=</span><span class="NAME">bY.strokeStyle</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">b6.outlineColor</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">&&</span><span class="NAME">bY</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">b6.outlineColor</span><span class="PUNC">=</span><span class="NAME">bY.outlineColor</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">b6.outlineWidth</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">&&</span><span class="NAME">bY</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">b6.outlineWidth</span><span class="PUNC">=</span><span class="NAME">bY.outlineWidth</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b5</span><span class="PUNC">=</span><span class="NAME">bX.endpointHoverStyles</span><span class="PUNC">[</span><span class="NAME">b2</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="NAME">bX.endpointHoverStyle</span><span class="PUNC">||</span><span class="NAME">br.Defaults.EndpointHoverStyles</span><span class="PUNC">[</span><span class="NAME">b2</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="NAME">n.Defaults.EndpointHoverStyles</span><span class="PUNC">[</span><span class="NAME">b2</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="NAME">br.Defaults.EndpointHoverStyle</span><span class="PUNC">||</span><span class="NAME">n.Defaults.EndpointHoverStyle</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">b1</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">b5</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">b5</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">b5.fillStyle</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">b5.fillStyle</span><span class="PUNC">=</span><span class="NAME">b1.strokeStyle</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b4</span><span class="PUNC">=</span><span class="NAME">bX.anchors</span><span class="PUNC">?</span><span class="NAME">bX.anchors</span><span class="PUNC">[</span><span class="NAME">b2</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="NAME">bX.anchor</span><span class="PUNC">?</span><span class="NAME">bX.anchor</span><span class="PUNC">:</span><span class="NAME">bT</span><span class="PUNC">(</span><span class="NAME">br.Defaults.Anchors</span><span class="PUNC">[</span><span class="NAME">b2</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">b0</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NAME">bT</span><span class="PUNC">(</span><span class="NAME">n.Defaults.Anchors</span><span class="PUNC">[</span><span class="NAME">b2</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">b0</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NAME">bT</span><span class="PUNC">(</span><span class="NAME">br.Defaults.Anchor</span><span class="PUNC">,</span><span class="NAME">b0</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NAME">bT</span><span class="PUNC">(</span><span class="NAME">n.Defaults.Anchor</span><span class="PUNC">,</span><span class="NAME">b0</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">b7</span><span class="PUNC">=</span><span class="NAME">bX.uuids</span><span class="PUNC">?</span><span class="NAME">bX.uuids</span><span class="PUNC">[</span><span class="NAME">b2</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="NAME">b3</span><span class="PUNC">=</span><span class="NAME">aH</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">paintStyle</span><span class="PUNC">:</span><span class="NAME">b6</span><span class="PUNC">,</span><span class="NAME">hoverPaintStyle</span><span class="PUNC">:</span><span class="NAME">b5</span><span class="PUNC">,</span><span class="NAME">endpoint</span><span class="PUNC">:</span><span class="NAME">b8</span><span class="PUNC">,</span><span class="NAME">connections</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NAME">bK</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">uuid</span><span class="PUNC">:</span><span class="NAME">b7</span><span class="PUNC">,</span><span class="NAME">anchor</span><span class="PUNC">:</span><span class="NAME">b4</span><span class="PUNC">,</span><span class="NAME">source</span><span class="PUNC">:</span><span class="NAME">bZ</span><span class="PUNC">,</span><span class="NAME">scope</span><span class="PUNC">:</span><span class="NAME">bX.scope</span><span class="PUNC">,</span><span class="NAME">container</span><span class="PUNC">:</span><span class="NAME">bX.container</span><span class="PUNC">,</span><span class="NAME">reattach</span><span class="PUNC">:</span><span class="NAME">bX.reattach</span><span class="PUNC">||</span><span class="NAME">br.Defaults.ReattachConnections</span><span class="PUNC">,</span><span class="NAME">detachable</span><span class="PUNC">:</span><span class="NAME">bX.detachable</span><span class="PUNC">||</span><span class="NAME">br.Defaults.ConnectionsDetachable</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bK.endpoints</span><span class="PUNC">[</span><span class="NAME">b2</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">b3</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bX.drawEndpoints</span><span class="PUNC">===</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">b3.setVisible</span><span class="PUNC">(</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">b3</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bM</span><span class="PUNC">=</span><span class="NAME">bO</span><span class="PUNC">(</span><span class="NAME">bU.sourceEndpoint</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">bU</span><span class="PUNC">,</span><span class="NAME">bK.source</span><span class="PUNC">,</span><span class="NAME">bK.sourceId</span><span class="PUNC">,</span><span class="NAME">bU.paintStyle</span><span class="PUNC">,</span><span class="NAME">bU.hoverPaintStyle</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bM</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">W</span><span class="PUNC">(</span><span class="NAME">aV</span><span class="PUNC">,</span><span class="NAME">this.sourceId</span><span class="PUNC">,</span><span class="NAME">bM</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bL</span><span class="PUNC">=</span><span class="NAME">bO</span><span class="PUNC">(</span><span class="NAME">bU.targetEndpoint</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">bU</span><span class="PUNC">,</span><span class="NAME">bK.target</span><span class="PUNC">,</span><span class="NAME">bK.targetId</span><span class="PUNC">,</span><span class="NAME">bU.paintStyle</span><span class="PUNC">,</span><span class="NAME">bU.hoverPaintStyle</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bL</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">W</span><span class="PUNC">(</span><span class="NAME">aV</span><span class="PUNC">,</span><span class="NAME">this.targetId</span><span class="PUNC">,</span><span class="NAME">bL</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.scope</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.scope</span><span class="PUNC">=</span><span class="NAME">this.endpoints</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">scope</span><span class="PUNC">}</span><span class="NAME">bK.endpointsToDeleteOnDetach</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="KEYW">null</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bU.deleteEndpointsOnDetach</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bU.sourceIsNew</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bK.endpointsToDeleteOnDetach</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bK.endpoints</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bU.targetIsNew</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bK.endpointsToDeleteOnDetach</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bK.endpoints</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="NAME">bK.setConnector</span><span class="PUNC">(</span><span class="NAME">this.endpoints</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">connector</span><span class="PUNC">||</span><span class="NAME">this.endpoints</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">connector</span><span class="PUNC">||</span><span class="NAME">bU.connector</span><span class="PUNC">||</span><span class="NAME">br.Defaults.Connector</span><span class="PUNC">||</span><span class="NAME">n.Defaults.Connector</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.setPaintStyle</span><span class="PUNC">(</span><span class="NAME">this.endpoints</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">connectorStyle</span><span class="PUNC">||</span><span class="NAME">this.endpoints</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">connectorStyle</span><span class="PUNC">||</span><span class="NAME">bU.paintStyle</span><span class="PUNC">||</span><span class="NAME">br.Defaults.PaintStyle</span><span class="PUNC">||</span><span class="NAME">n.Defaults.PaintStyle</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.setHoverPaintStyle</span><span class="PUNC">(</span><span class="NAME">this.endpoints</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">connectorHoverStyle</span><span class="PUNC">||</span><span class="NAME">this.endpoints</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">connectorHoverStyle</span><span class="PUNC">||</span><span class="NAME">bU.hoverPaintStyle</span><span class="PUNC">||</span><span class="NAME">br.Defaults.HoverPaintStyle</span><span class="PUNC">||</span><span class="NAME">n.Defaults.HoverPaintStyle</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.paintStyleInUse</span><span class="PUNC">=</span><span class="NAME">this.getPaintStyle</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">X</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">elId</span><span class="PUNC">:</span><span class="NAME">this.sourceId</span><span class="PUNC">,</span><span class="NAME">timestamp</span><span class="PUNC">:</span><span class="NAME">bd</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">X</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">elId</span><span class="PUNC">:</span><span class="NAME">this.targetId</span><span class="PUNC">,</span><span class="NAME">timestamp</span><span class="PUNC">:</span><span class="NAME">bd</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bD</span><span class="PUNC">=</span><span class="NAME">aj</span><span class="PUNC">[</span><span class="NAME">this.sourceId</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">ag</span><span class="PUNC">[</span><span class="NAME">this.sourceId</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">aj</span><span class="PUNC">[</span><span class="NAME">this.targetId</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bH</span><span class="PUNC">=</span><span class="NAME">ag</span><span class="PUNC">[</span><span class="NAME">this.targetId</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bI</span><span class="PUNC">=</span><span class="NAME">bd</span><span class="PUNC">||</span><span class="NAME">p</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bN</span><span class="PUNC">=</span><span class="NAME">this.endpoints</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">anchor.compute</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">xy</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NAME">bD.left</span><span class="PUNC">,</span><span class="NAME">bD.top</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">wh</span><span class="PUNC">:</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="NAME">element</span><span class="PUNC">:</span><span class="NAME">this.endpoints</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">elementId</span><span class="PUNC">:</span><span class="NAME">this.endpoints</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">elementId</span><span class="PUNC">,</span><span class="NAME">txy</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NAME">bz.left</span><span class="PUNC">,</span><span class="NAME">bz.top</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">twh</span><span class="PUNC">:</span><span class="NAME">bH</span><span class="PUNC">,</span><span class="NAME">tElement</span><span class="PUNC">:</span><span class="NAME">this.endpoints</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">timestamp</span><span class="PUNC">:</span><span class="NAME">bI</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.endpoints</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">paint</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">anchorLoc</span><span class="PUNC">:</span><span class="NAME">bN</span><span class="PUNC">,</span><span class="NAME">timestamp</span><span class="PUNC">:</span><span class="NAME">bI</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bN</span><span class="PUNC">=</span><span class="NAME">this.endpoints</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">anchor.compute</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">xy</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NAME">bz.left</span><span class="PUNC">,</span><span class="NAME">bz.top</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">wh</span><span class="PUNC">:</span><span class="NAME">bH</span><span class="PUNC">,</span><span class="NAME">element</span><span class="PUNC">:</span><span class="NAME">this.endpoints</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">elementId</span><span class="PUNC">:</span><span class="NAME">this.endpoints</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">elementId</span><span class="PUNC">,</span><span class="NAME">txy</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NAME">bD.left</span><span class="PUNC">,</span><span class="NAME">bD.top</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">twh</span><span class="PUNC">:</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="NAME">tElement</span><span class="PUNC">:</span><span class="NAME">this.endpoints</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">timestamp</span><span class="PUNC">:</span><span class="NAME">bI</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.endpoints</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">paint</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">anchorLoc</span><span class="PUNC">:</span><span class="NAME">bN</span><span class="PUNC">,</span><span class="NAME">timestamp</span><span class="PUNC">:</span><span class="NAME">bI</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NAME">br.Defaults.ConnectionsDetachable</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bU.detachable</span><span class="PUNC">===</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bA</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bK.endpoints</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">connectionsDetachable</span><span class="PUNC">===</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bA</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bK.endpoints</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">connectionsDetachable</span><span class="PUNC">===</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bA</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">}</span><span class="NAME">this.isDetachable</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">===</span><span class="KEYW">true</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.setDetachable</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bW</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NAME">bW</span><span class="PUNC">===</span><span class="KEYW">true</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bG</span><span class="PUNC">=</span><span class="NAME">bU.reattach</span><span class="PUNC">||</span><span class="NAME">bK.endpoints</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">reattachConnections</span><span class="PUNC">||</span><span class="NAME">bK.endpoints</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">reattachConnections</span><span class="PUNC">||</span><span class="NAME">br.Defaults.ReattachConnections</span><span class="PUNC">;</span><span class="NAME">this.isReattach</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bG</span><span class="PUNC">===</span><span class="KEYW">true</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.setReattach</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bW</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bG</span><span class="PUNC">=</span><span class="NAME">bW</span><span class="PUNC">===</span><span class="KEYW">true</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bF</span><span class="PUNC">=</span><span class="NAME">bU.cost</span><span class="PUNC">||</span><span class="NAME">bK.endpoints</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getConnectionCost</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bK.getCost</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bF</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">bK.setCost</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bW</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bF</span><span class="PUNC">=</span><span class="NAME">bW</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bE</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">bU.bidirectional</span><span class="PUNC">===</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bU.bidirectional</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bE</span><span class="PUNC">=</span><span class="NAME">bK.endpoints</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">areConnectionsBidirectional</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">bK.isBidirectional</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bE</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bV</span><span class="PUNC">=</span><span class="NAME">n.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">this.endpoints</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getParameters</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n.extend</span><span class="PUNC">(</span><span class="NAME">bV</span><span class="PUNC">,</span><span class="NAME">this.endpoints</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getParameters</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n.extend</span><span class="PUNC">(</span><span class="NAME">bV</span><span class="PUNC">,</span><span class="NAME">bK.getParameters</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bK.setParameters</span><span class="PUNC">(</span><span class="NAME">bV</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.getAttachedElements</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bK.endpoints</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.moveParent</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bZ</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bY</span><span class="PUNC">=</span><span class="NAME">n.CurrentLibrary</span><span class="PUNC">,</span><span class="NAME">bX</span><span class="PUNC">=</span><span class="NAME">bY.getParent</span><span class="PUNC">(</span><span class="NAME">bK.connector.canvas</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bK.connector.bgCanvas</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bY.removeElement</span><span class="PUNC">(</span><span class="NAME">bK.connector.bgCanvas</span><span class="PUNC">,</span><span class="NAME">bX</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bY.appendElement</span><span class="PUNC">(</span><span class="NAME">bK.connector.bgCanvas</span><span class="PUNC">,</span><span class="NAME">bZ</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">bY.removeElement</span><span class="PUNC">(</span><span class="NAME">bK.connector.canvas</span><span class="PUNC">,</span><span class="NAME">bX</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bY.appendElement</span><span class="PUNC">(</span><span class="NAME">bK.connector.canvas</span><span class="PUNC">,</span><span class="NAME">bZ</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bW</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">bW</span><span class="PUNC">&lt;</span><span class="NAME">bK.overlays.length</span><span class="PUNC">;</span><span class="NAME">bW</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bK.overlays</span><span class="PUNC">[</span><span class="NAME">bW</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">isAppendedAtTopLevel</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bY.removeElement</span><span class="PUNC">(</span><span class="NAME">bK.overlays</span><span class="PUNC">[</span><span class="NAME">bW</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">canvas</span><span class="PUNC">,</span><span class="NAME">bX</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bY.appendElement</span><span class="PUNC">(</span><span class="NAME">bK.overlays</span><span class="PUNC">[</span><span class="NAME">bW</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">canvas</span><span class="PUNC">,</span><span class="NAME">bZ</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bK.overlays</span><span class="PUNC">[</span><span class="NAME">bW</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">reattachListeners</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bK.overlays</span><span class="PUNC">[</span><span class="NAME">bW</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">reattachListeners</span><span class="PUNC">(</span><span class="NAME">bK.connector</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bK.connector.reattachListeners</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bK.connector.reattachListeners</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bJ</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="NAME">this.paint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">cd</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">cd</span><span class="PUNC">=</span><span class="NAME">cd</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b4</span><span class="PUNC">=</span><span class="NAME">cd.elId</span><span class="PUNC">,</span><span class="NAME">b5</span><span class="PUNC">=</span><span class="NAME">cd.ui</span><span class="PUNC">,</span><span class="NAME">b2</span><span class="PUNC">=</span><span class="NAME">cd.recalc</span><span class="PUNC">,</span><span class="NAME">bX</span><span class="PUNC">=</span><span class="NAME">cd.timestamp</span><span class="PUNC">,</span><span class="NAME">b6</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="NAME">cc</span><span class="PUNC">=</span><span class="NAME">b6</span><span class="PUNC">?</span><span class="NAME">this.sourceId</span><span class="PUNC">:</span><span class="NAME">this.targetId</span><span class="PUNC">,</span><span class="NAME">b1</span><span class="PUNC">=</span><span class="NAME">b6</span><span class="PUNC">?</span><span class="NAME">this.targetId</span><span class="PUNC">:</span><span class="NAME">this.sourceId</span><span class="PUNC">,</span><span class="NAME">bY</span><span class="PUNC">=</span><span class="NAME">b6</span><span class="PUNC">?</span><span class="NUMB">0</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">ce</span><span class="PUNC">=</span><span class="NAME">b6</span><span class="PUNC">?</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bX</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">||</span><span class="NAME">bX</span><span class="PUNC">!=</span><span class="NAME">bJ</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">cf</span><span class="PUNC">=</span><span class="NAME">X</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">elId</span><span class="PUNC">:</span><span class="NAME">b4</span><span class="PUNC">,</span><span class="NAME">offset</span><span class="PUNC">:</span><span class="NAME">b5</span><span class="PUNC">,</span><span class="NAME">recalc</span><span class="PUNC">:</span><span class="NAME">b2</span><span class="PUNC">,</span><span class="NAME">timestamp</span><span class="PUNC">:</span><span class="NAME">bX</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">b3</span><span class="PUNC">=</span><span class="NAME">X</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">elId</span><span class="PUNC">:</span><span class="NAME">cc</span><span class="PUNC">,</span><span class="NAME">timestamp</span><span class="PUNC">:</span><span class="NAME">bX</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b8</span><span class="PUNC">=</span><span class="NAME">this.endpoints</span><span class="PUNC">[</span><span class="NAME">ce</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bW</span><span class="PUNC">=</span><span class="NAME">this.endpoints</span><span class="PUNC">[</span><span class="NAME">bY</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">b0</span><span class="PUNC">=</span><span class="NAME">b8.anchor.getCurrentLocation</span><span class="PUNC">(</span><span class="NAME">b8</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">cb</span><span class="PUNC">=</span><span class="NAME">bW.anchor.getCurrentLocation</span><span class="PUNC">(</span><span class="NAME">bW</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bZ</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ca</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">ca</span><span class="PUNC">&lt;</span><span class="NAME">bK.overlays.length</span><span class="PUNC">;</span><span class="NAME">ca</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b7</span><span class="PUNC">=</span><span class="NAME">bK.overlays</span><span class="PUNC">[</span><span class="NAME">ca</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">b7.isVisible</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bZ</span><span class="PUNC">=</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">bZ</span><span class="PUNC">,</span><span class="NAME">b7.computeMaxSize</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b9</span><span class="PUNC">=</span><span class="NAME">this.connector.compute</span><span class="PUNC">(</span><span class="NAME">b0</span><span class="PUNC">,</span><span class="NAME">cb</span><span class="PUNC">,</span><span class="NAME">this.endpoints</span><span class="PUNC">[</span><span class="NAME">ce</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">this.endpoints</span><span class="PUNC">[</span><span class="NAME">bY</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">this.endpoints</span><span class="PUNC">[</span><span class="NAME">ce</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">anchor</span><span class="PUNC">,</span><span class="NAME">this.endpoints</span><span class="PUNC">[</span><span class="NAME">bY</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">anchor</span><span class="PUNC">,</span><span class="NAME">bK.paintStyleInUse.lineWidth</span><span class="PUNC">,</span><span class="NAME">bZ</span><span class="PUNC">,</span><span class="NAME">cf</span><span class="PUNC">,</span><span class="NAME">b3</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bK.connector.paint</span><span class="PUNC">(</span><span class="NAME">b9</span><span class="PUNC">,</span><span class="NAME">bK.paintStyleInUse</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ca</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">ca</span><span class="PUNC">&lt;</span><span class="NAME">bK.overlays.length</span><span class="PUNC">;</span><span class="NAME">ca</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b7</span><span class="PUNC">=</span><span class="NAME">bK.overlays</span><span class="PUNC">[</span><span class="NAME">ca</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">b7.isVisible</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bK.overlayPlacements</span><span class="PUNC">[</span><span class="NAME">ca</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">b7.draw</span><span class="PUNC">(</span><span class="NAME">bK.connector</span><span class="PUNC">,</span><span class="NAME">bK.paintStyleInUse</span><span class="PUNC">,</span><span class="NAME">b9</span><span class="PUNC">,</span><span class="NAME">bX</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="NAME">bJ</span><span class="PUNC">=</span><span class="NAME">bX</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.repaint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bX</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bX</span><span class="PUNC">=</span><span class="NAME">bX</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bW</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">bX.recalc</span><span class="PUNC">===</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.paint</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">elId</span><span class="PUNC">:</span><span class="NAME">this.sourceId</span><span class="PUNC">,</span><span class="NAME">recalc</span><span class="PUNC">:</span><span class="NAME">bW</span><span class="PUNC">,</span><span class="NAME">timestamp</span><span class="PUNC">:</span><span class="NAME">bX.timestamp</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bR</span><span class="PUNC">=</span><span class="NAME">bU.type</span><span class="PUNC">||</span><span class="NAME">bK.endpoints</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">connectionType</span><span class="PUNC">||</span><span class="NAME">bK.endpoints</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">connectionType</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bR</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bK.addType</span><span class="PUNC">(</span><span class="NAME">bR</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bh</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bz</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">{</span><span class="NAME">drag</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bz</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NAME">n.CurrentLibrary.getUIPosition</span><span class="PUNC">(</span><span class="NAME">arguments</span><span class="PUNC">,</span><span class="NAME">br.getZoom</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">bA.element</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">n.CurrentLibrary.setOffset</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">be</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">bC</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bB</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">stopDrag</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bz</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">av</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="NAME">bE</span><span class="PUNC">,</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">a3</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">reference</span><span class="PUNC">:</span><span class="NAME">bC</span><span class="PUNC">,</span><span class="NAME">referenceCanvas</span><span class="PUNC">:</span><span class="NAME">bB</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">aH</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">paintStyle</span><span class="PUNC">:</span><span class="NAME">bD</span><span class="PUNC">,</span><span class="NAME">endpoint</span><span class="PUNC">:</span><span class="NAME">bE</span><span class="PUNC">,</span><span class="NAME">anchor</span><span class="PUNC">:</span><span class="NAME">bA</span><span class="PUNC">,</span><span class="NAME">source</span><span class="PUNC">:</span><span class="NAME">bz</span><span class="PUNC">,</span><span class="NAME">scope</span><span class="PUNC">:</span><span class="STRN">"__floating"</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">S</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">bB</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bD</span><span class="PUNC">=</span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bD.style.position</span><span class="PUNC">=</span><span class="STRN">"absolute"</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bA</span><span class="PUNC">=</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">aX</span><span class="PUNC">(</span><span class="NAME">bD</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">H</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">X</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">elId</span><span class="PUNC">:</span><span class="NAME">bC</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bB.id</span><span class="PUNC">=</span><span class="NAME">bC</span><span class="PUNC">;</span><span class="NAME">bB.element</span><span class="PUNC">=</span><span class="NAME">bA</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ah</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b5</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bS</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">;</span><span class="NAME">bS.idPrefix</span><span class="PUNC">=</span><span class="STRN">"_jsplumb_e_"</span><span class="PUNC">;</span><span class="NAME">bS.defaultLabelLocation</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="NUMB">0.5</span><span class="PUNC">,</span><span class="NUMB">0.5</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">bS.defaultOverlayKeys</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="STRN">"Overlays"</span><span class="PUNC">,</span><span class="STRN">"EndpointOverlays"</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">this.parent</span><span class="PUNC">=</span><span class="NAME">b5.parent</span><span class="PUNC">;</span><span class="NAME">x.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">b5</span><span class="PUNC">=</span><span class="NAME">b5</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getTypeDescriptor</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="STRN">"endpoint"</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getDefaultType</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">{</span><span class="NAME">parameters</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">scope</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">maxConnections</span><span class="PUNC">:</span><span class="NAME">bS._jsPlumb.Defaults.MaxConnections</span><span class="PUNC">,</span><span class="NAME">paintStyle</span><span class="PUNC">:</span><span class="NAME">bS._jsPlumb.Defaults.EndpointStyle</span><span class="PUNC">||</span><span class="NAME">n.Defaults.EndpointStyle</span><span class="PUNC">,</span><span class="NAME">endpoint</span><span class="PUNC">:</span><span class="NAME">bS._jsPlumb.Defaults.Endpoint</span><span class="PUNC">||</span><span class="NAME">n.Defaults.Endpoint</span><span class="PUNC">,</span><span class="NAME">hoverPaintStyle</span><span class="PUNC">:</span><span class="NAME">bS._jsPlumb.Defaults.EndpointHoverStyle</span><span class="PUNC">||</span><span class="NAME">n.Defaults.EndpointHoverStyle</span><span class="PUNC">,</span><span class="NAME">overlays</span><span class="PUNC">:</span><span class="NAME">bS._jsPlumb.Defaults.EndpointOverlays</span><span class="PUNC">||</span><span class="NAME">n.Defaults.EndpointOverlays</span><span class="PUNC">,</span><span class="NAME">connectorStyle</span><span class="PUNC">:</span><span class="NAME">b5.connectorStyle</span><span class="PUNC">,</span><span class="NAME">connectorHoverStyle</span><span class="PUNC">:</span><span class="NAME">b5.connectorHoverStyle</span><span class="PUNC">,</span><span class="NAME">connectorClass</span><span class="PUNC">:</span><span class="NAME">b5.connectorClass</span><span class="PUNC">,</span><span class="NAME">connectorHoverClass</span><span class="PUNC">:</span><span class="NAME">b5.connectorHoverClass</span><span class="PUNC">,</span><span class="NAME">connectorOverlays</span><span class="PUNC">:</span><span class="NAME">b5.connectorOverlays</span><span class="PUNC">,</span><span class="NAME">connector</span><span class="PUNC">:</span><span class="NAME">b5.connector</span><span class="PUNC">,</span><span class="NAME">connectorTooltip</span><span class="PUNC">:</span><span class="NAME">b5.connectorTooltip</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b3</span><span class="PUNC">=</span><span class="NAME">this.applyType</span><span class="PUNC">;</span><span class="NAME">this.applyType</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b7</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">b3</span><span class="PUNC">(</span><span class="NAME">b7</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">b7.maxConnections</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bY</span><span class="PUNC">=</span><span class="NAME">b7.maxConnections</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">b7.scope</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bS.scope</span><span class="PUNC">=</span><span class="NAME">b7.scope</span><span class="PUNC">}</span><span class="NAME">bS.connectorStyle</span><span class="PUNC">=</span><span class="NAME">b7.connectorStyle</span><span class="PUNC">;</span><span class="NAME">bS.connectorHoverStyle</span><span class="PUNC">=</span><span class="NAME">b7.connectorHoverStyle</span><span class="PUNC">;</span><span class="NAME">bS.connectorOverlays</span><span class="PUNC">=</span><span class="NAME">b7.connectorOverlays</span><span class="PUNC">;</span><span class="NAME">bS.connector</span><span class="PUNC">=</span><span class="NAME">b7.connector</span><span class="PUNC">;</span><span class="NAME">bS.connectorTooltip</span><span class="PUNC">=</span><span class="NAME">b7.connectorTooltip</span><span class="PUNC">;</span><span class="NAME">bS.connectionType</span><span class="PUNC">=</span><span class="NAME">b7.connectionType</span><span class="PUNC">;</span><span class="NAME">bS.connectorClass</span><span class="PUNC">=</span><span class="NAME">b7.connectorClass</span><span class="PUNC">;</span><span class="NAME">bS.connectorHoverClass</span><span class="PUNC">=</span><span class="NAME">b7.connectorHoverClass</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bE</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">b5.enabled</span><span class="PUNC">===</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.isVisible</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bE</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.setVisible</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b8</span><span class="PUNC">,</span><span class="NAME">cb</span><span class="PUNC">,</span><span class="NAME">b7</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bE</span><span class="PUNC">=</span><span class="NAME">b8</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bS.canvas</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bS.canvas.style.display</span><span class="PUNC">=</span><span class="NAME">b8</span><span class="PUNC">?</span><span class="STRN">"block"</span><span class="PUNC">:</span><span class="STRN">"none"</span><span class="PUNC">}</span><span class="NAME">bS</span><span class="PUNC">[</span><span class="NAME">b8</span><span class="PUNC">?</span><span class="STRN">"showOverlays"</span><span class="PUNC">:</span><span class="STRN">"hideOverlays"</span><span class="PUNC">]</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">cb</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ca</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">ca</span><span class="PUNC">&lt;</span><span class="NAME">bS.connections.length</span><span class="PUNC">;</span><span class="NAME">ca</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bS.connections</span><span class="PUNC">[</span><span class="NAME">ca</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">setVisible</span><span class="PUNC">(</span><span class="NAME">b8</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">b7</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b9</span><span class="PUNC">=</span><span class="NAME">bS</span><span class="PUNC">===</span><span class="NAME">bS.connections</span><span class="PUNC">[</span><span class="NAME">ca</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">endpoints</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">?</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bS.connections</span><span class="PUNC">[</span><span class="NAME">ca</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">endpoints</span><span class="PUNC">[</span><span class="NAME">b9</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">connections.length</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bS.connections</span><span class="PUNC">[</span><span class="NAME">ca</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">endpoints</span><span class="PUNC">[</span><span class="NAME">b9</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">setVisible</span><span class="PUNC">(</span><span class="NAME">b8</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.isEnabled</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bC</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.setEnabled</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b7</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bC</span><span class="PUNC">=</span><span class="NAME">b7</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bR</span><span class="PUNC">=</span><span class="NAME">b5.source</span><span class="PUNC">,</span><span class="NAME">bL</span><span class="PUNC">=</span><span class="NAME">b5.uuid</span><span class="PUNC">,</span><span class="NAME">b2</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">bG</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bL</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">aW</span><span class="PUNC">[</span><span class="NAME">bL</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bS</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bJ</span><span class="PUNC">=</span><span class="NAME">c</span><span class="PUNC">(</span><span class="NAME">bR</span><span class="PUNC">,</span><span class="STRN">"id"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.elementId</span><span class="PUNC">=</span><span class="NAME">bJ</span><span class="PUNC">;</span><span class="NAME">this.element</span><span class="PUNC">=</span><span class="NAME">bR</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NAME">b5.connectionCost</span><span class="PUNC">;</span><span class="NAME">this.getConnectionCost</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bB</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.setConnectionCost</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b7</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bB</span><span class="PUNC">=</span><span class="NAME">b7</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b1</span><span class="PUNC">=</span><span class="NAME">b5.connectionsBidirectional</span><span class="PUNC">===</span><span class="KEYW">false</span><span class="PUNC">?</span><span class="KEYW">false</span><span class="PUNC">:</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="NAME">this.areConnectionsBidirectional</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">b1</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.setConnectionsBidirectional</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b7</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">b1</span><span class="PUNC">=</span><span class="NAME">b7</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">bS.anchor</span><span class="PUNC">=</span><span class="NAME">b5.anchor</span><span class="PUNC">?</span><span class="NAME">br.makeAnchor</span><span class="PUNC">(</span><span class="NAME">b5.anchor</span><span class="PUNC">,</span><span class="NAME">bJ</span><span class="PUNC">,</span><span class="NAME">br</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">b5.anchors</span><span class="PUNC">?</span><span class="NAME">br.makeAnchor</span><span class="PUNC">(</span><span class="NAME">b5.anchors</span><span class="PUNC">,</span><span class="NAME">bJ</span><span class="PUNC">,</span><span class="NAME">br</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">br.makeAnchor</span><span class="PUNC">(</span><span class="NAME">br.Defaults.Anchor</span><span class="PUNC">||</span><span class="STRN">"TopCenter"</span><span class="PUNC">,</span><span class="NAME">bJ</span><span class="PUNC">,</span><span class="NAME">br</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">b5._transient</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">br.anchorManager.add</span><span class="PUNC">(</span><span class="NAME">bS</span><span class="PUNC">,</span><span class="NAME">bJ</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bP</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">bU</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="NAME">this.setEndpoint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b7</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b8</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">_jsPlumb</span><span class="PUNC">:</span><span class="NAME">bS._jsPlumb</span><span class="PUNC">,</span><span class="NAME">parent</span><span class="PUNC">:</span><span class="NAME">b5.parent</span><span class="PUNC">,</span><span class="NAME">container</span><span class="PUNC">:</span><span class="NAME">b5.container</span><span class="PUNC">,</span><span class="NAME">tooltip</span><span class="PUNC">:</span><span class="NAME">b5.tooltip</span><span class="PUNC">,</span><span class="NAME">connectorTooltip</span><span class="PUNC">:</span><span class="NAME">b5.connectorTooltip</span><span class="PUNC">,</span><span class="NAME">endpoint</span><span class="PUNC">:</span><span class="NAME">bS</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">z</span><span class="PUNC">(</span><span class="NAME">b7</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bP</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">n.Endpoints</span><span class="PUNC">[</span><span class="NAME">Y</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">b7</span><span class="PUNC">]</span><span class="PUNC">(</span><span class="NAME">b8</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">(</span><span class="NAME">b7</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">b8</span><span class="PUNC">=</span><span class="NAME">n.extend</span><span class="PUNC">(</span><span class="NAME">b7</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">b8</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bP</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">n.Endpoints</span><span class="PUNC">[</span><span class="NAME">Y</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">b7</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">(</span><span class="NAME">b8</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">bP</span><span class="PUNC">=</span><span class="NAME">b7.clone</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b9</span><span class="PUNC">=</span><span class="NAME">n.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">b8</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bP.clone</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ca</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Object</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bP.constructor.apply</span><span class="PUNC">(</span><span class="NAME">ca</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">b9</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">ca</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">bS.endpoint</span><span class="PUNC">=</span><span class="NAME">bP</span><span class="PUNC">;</span><span class="NAME">bS.type</span><span class="PUNC">=</span><span class="NAME">bS.endpoint.type</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.setEndpoint</span><span class="PUNC">(</span><span class="NAME">b5.endpoint</span><span class="PUNC">||</span><span class="NAME">br.Defaults.Endpoint</span><span class="PUNC">||</span><span class="NAME">n.Defaults.Endpoint</span><span class="PUNC">||</span><span class="STRN">"Dot"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bU</span><span class="PUNC">=</span><span class="NAME">bP</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bQ</span><span class="PUNC">=</span><span class="NAME">bS.setHover</span><span class="PUNC">;</span><span class="NAME">bS.setHover</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bS.endpoint.setHover.apply</span><span class="PUNC">(</span><span class="NAME">bS.endpoint</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bQ.apply</span><span class="PUNC">(</span><span class="NAME">bS</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b6</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b7</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bS.connections.length</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bS.connections</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">setHover</span><span class="PUNC">(</span><span class="NAME">b7</span><span class="PUNC">,</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">bS.setHover</span><span class="PUNC">(</span><span class="NAME">b7</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">D</span><span class="PUNC">(</span><span class="NAME">bS.endpoint</span><span class="PUNC">,</span><span class="NAME">bS</span><span class="PUNC">,</span><span class="NAME">b6</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.setPaintStyle</span><span class="PUNC">(</span><span class="NAME">b5.paintStyle</span><span class="PUNC">||</span><span class="NAME">b5.style</span><span class="PUNC">||</span><span class="NAME">br.Defaults.EndpointStyle</span><span class="PUNC">||</span><span class="NAME">n.Defaults.EndpointStyle</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.setHoverPaintStyle</span><span class="PUNC">(</span><span class="NAME">b5.hoverPaintStyle</span><span class="PUNC">||</span><span class="NAME">br.Defaults.EndpointHoverStyle</span><span class="PUNC">||</span><span class="NAME">n.Defaults.EndpointHoverStyle</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.paintStyleInUse</span><span class="PUNC">=</span><span class="NAME">this.getPaintStyle</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bN</span><span class="PUNC">=</span><span class="NAME">this.getPaintStyle</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.connectorStyle</span><span class="PUNC">=</span><span class="NAME">b5.connectorStyle</span><span class="PUNC">;</span><span class="NAME">this.connectorHoverStyle</span><span class="PUNC">=</span><span class="NAME">b5.connectorHoverStyle</span><span class="PUNC">;</span><span class="NAME">this.connectorOverlays</span><span class="PUNC">=</span><span class="NAME">b5.connectorOverlays</span><span class="PUNC">;</span><span class="NAME">this.connector</span><span class="PUNC">=</span><span class="NAME">b5.connector</span><span class="PUNC">;</span><span class="NAME">this.connectorTooltip</span><span class="PUNC">=</span><span class="NAME">b5.connectorTooltip</span><span class="PUNC">;</span><span class="NAME">this.connectorClass</span><span class="PUNC">=</span><span class="NAME">b5.connectorClass</span><span class="PUNC">;</span><span class="NAME">this.connectorHoverClass</span><span class="PUNC">=</span><span class="NAME">b5.connectorHoverClass</span><span class="PUNC">;</span><span class="NAME">this.isSource</span><span class="PUNC">=</span><span class="NAME">b5.isSource</span><span class="PUNC">||</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="NAME">this.isTarget</span><span class="PUNC">=</span><span class="NAME">b5.isTarget</span><span class="PUNC">||</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bY</span><span class="PUNC">=</span><span class="NAME">b5.maxConnections</span><span class="PUNC">||</span><span class="NAME">br.Defaults.MaxConnections</span><span class="PUNC">;</span><span class="NAME">this.getAttachedElements</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bS.connections</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.canvas</span><span class="PUNC">=</span><span class="NAME">this.endpoint.canvas</span><span class="PUNC">;</span><span class="NAME">this.connections</span><span class="PUNC">=</span><span class="NAME">b5.connections</span><span class="PUNC">||</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">this.scope</span><span class="PUNC">=</span><span class="NAME">b5.scope</span><span class="PUNC">||</span><span class="NAME">R</span><span class="PUNC">;</span><span class="NAME">this.connectionType</span><span class="PUNC">=</span><span class="NAME">b5.connectionType</span><span class="PUNC">;</span><span class="NAME">this.timestamp</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="NAME">bS.reattachConnections</span><span class="PUNC">=</span><span class="NAME">b5.reattach</span><span class="PUNC">||</span><span class="NAME">br.Defaults.ReattachConnections</span><span class="PUNC">;</span><span class="NAME">bS.connectionsDetachable</span><span class="PUNC">=</span><span class="NAME">br.Defaults.ConnectionsDetachable</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">b5.connectionsDetachable</span><span class="PUNC">===</span><span class="KEYW">false</span><span class="PUNC">||</span><span class="NAME">b5.detachable</span><span class="PUNC">===</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bS.connectionsDetachable</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bM</span><span class="PUNC">=</span><span class="NAME">b5.dragAllowedWhenFull</span><span class="PUNC">||</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">b5.onMaxConnections</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bS.bind</span><span class="PUNC">(</span><span class="STRN">"maxConnections"</span><span class="PUNC">,</span><span class="NAME">b5.onMaxConnections</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">this.computeAnchor</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b7</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bS.anchor.compute</span><span class="PUNC">(</span><span class="NAME">b7</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.addConnection</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b7</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bS.connections.push</span><span class="PUNC">(</span><span class="NAME">b7</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.detach</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b8</span><span class="PUNC">,</span><span class="NAME">cd</span><span class="PUNC">,</span><span class="NAME">b9</span><span class="PUNC">,</span><span class="NAME">cg</span><span class="PUNC">,</span><span class="NAME">b7</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">cf</span><span class="PUNC">=</span><span class="NAME">g</span><span class="PUNC">(</span><span class="NAME">bS.connections</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">ci</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">ci.id</span><span class="PUNC">==</span><span class="NAME">b8.id</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">ce</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="NAME">cg</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">cg</span><span class="PUNC">!==</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">cf</span><span class="PUNC">>=</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">b9</span><span class="PUNC">||</span><span class="NAME">b8._forceDetach</span><span class="PUNC">||</span><span class="NAME">b8.isDetachable</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NAME">b8.isDetachAllowed</span><span class="PUNC">(</span><span class="NAME">b8</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ch</span><span class="PUNC">=</span><span class="NAME">b8.endpoints</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NAME">bS</span><span class="PUNC">?</span><span class="NAME">b8.endpoints</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="NAME">b8.endpoints</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">b9</span><span class="PUNC">||</span><span class="NAME">b8._forceDetach</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">bS.isDetachAllowed</span><span class="PUNC">(</span><span class="NAME">b8</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bS.connections.splice</span><span class="PUNC">(</span><span class="NAME">cf</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">cd</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">ch.detach</span><span class="PUNC">(</span><span class="NAME">b8</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="NAME">b9</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">b8.endpointsToDeleteOnDetach</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">cc</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">cc</span><span class="PUNC">&lt;</span><span class="NAME">b8.endpointsToDeleteOnDetach.length</span><span class="PUNC">;</span><span class="NAME">cc</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ca</span><span class="PUNC">=</span><span class="NAME">b8.endpointsToDeleteOnDetach</span><span class="PUNC">[</span><span class="NAME">cc</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">ca</span><span class="PUNC">&&</span><span class="NAME">ca.connections.length</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">br.deleteEndpoint</span><span class="PUNC">(</span><span class="NAME">ca</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="NAME">aZ</span><span class="PUNC">(</span><span class="NAME">b8.connector.getDisplayElements</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">b8.parent</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">A</span><span class="PUNC">(</span><span class="NAME">a0</span><span class="PUNC">[</span><span class="NAME">b8.scope</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">ci</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">ci.id</span><span class="PUNC">==</span><span class="NAME">b8.id</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">ce</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">cb</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">cd</span><span class="PUNC">&&</span><span class="NAME">cg</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">ba</span><span class="PUNC">(</span><span class="NAME">b8</span><span class="PUNC">,</span><span class="NAME">cb</span><span class="PUNC">,</span><span class="NAME">b7</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">ce</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.detachAll</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b8</span><span class="PUNC">,</span><span class="NAME">b7</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">while</span><span class="PUNC">(</span><span class="NAME">bS.connections.length</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bS.detach</span><span class="PUNC">(</span><span class="NAME">bS.connections</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="NAME">b8</span><span class="PUNC">,</span><span class="NAME">b7</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.detachFrom</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">ca</span><span class="PUNC">,</span><span class="NAME">b9</span><span class="PUNC">,</span><span class="NAME">b7</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">cb</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b8</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">b8</span><span class="PUNC">&lt;</span><span class="NAME">bS.connections.length</span><span class="PUNC">;</span><span class="NAME">b8</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bS.connections</span><span class="PUNC">[</span><span class="NAME">b8</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">endpoints</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NAME">ca</span><span class="PUNC">||</span><span class="NAME">bS.connections</span><span class="PUNC">[</span><span class="NAME">b8</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">endpoints</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NAME">ca</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">cb.push</span><span class="PUNC">(</span><span class="NAME">bS.connections</span><span class="PUNC">[</span><span class="NAME">b8</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b8</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">b8</span><span class="PUNC">&lt;</span><span class="NAME">cb.length</span><span class="PUNC">;</span><span class="NAME">b8</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bS.detach</span><span class="PUNC">(</span><span class="NAME">cb</span><span class="PUNC">[</span><span class="NAME">b8</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="NAME">b9</span><span class="PUNC">,</span><span class="NAME">b7</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">cb</span><span class="PUNC">[</span><span class="NAME">b8</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">setHover</span><span class="PUNC">(</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.detachFromConnection</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b8</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b7</span><span class="PUNC">=</span><span class="NAME">g</span><span class="PUNC">(</span><span class="NAME">bS.connections</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b9</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">b9.id</span><span class="PUNC">==</span><span class="NAME">b8.id</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">b7</span><span class="PUNC">>=</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bS.connections.splice</span><span class="PUNC">(</span><span class="NAME">b7</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getElement</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bR</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.setElement</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">ca</span><span class="PUNC">,</span><span class="NAME">b7</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">cc</span><span class="PUNC">=</span><span class="NAME">H</span><span class="PUNC">(</span><span class="NAME">ca</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">A</span><span class="PUNC">(</span><span class="NAME">aV</span><span class="PUNC">[</span><span class="NAME">bS.elementId</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">cd</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">cd.id</span><span class="PUNC">==</span><span class="NAME">bS.id</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bR</span><span class="PUNC">=</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">ca</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bJ</span><span class="PUNC">=</span><span class="NAME">H</span><span class="PUNC">(</span><span class="NAME">bR</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bS.elementId</span><span class="PUNC">=</span><span class="NAME">bJ</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">cb</span><span class="PUNC">=</span><span class="NAME">ay</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">source</span><span class="PUNC">:</span><span class="NAME">cc</span><span class="PUNC">,</span><span class="NAME">container</span><span class="PUNC">:</span><span class="NAME">b7</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">b9</span><span class="PUNC">=</span><span class="NAME">bD.getParent</span><span class="PUNC">(</span><span class="NAME">bS.canvas</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bD.removeElement</span><span class="PUNC">(</span><span class="NAME">bS.canvas</span><span class="PUNC">,</span><span class="NAME">b9</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bD.appendElement</span><span class="PUNC">(</span><span class="NAME">bS.canvas</span><span class="PUNC">,</span><span class="NAME">cb</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b8</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">b8</span><span class="PUNC">&lt;</span><span class="NAME">bS.connections.length</span><span class="PUNC">;</span><span class="NAME">b8</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bS.connections</span><span class="PUNC">[</span><span class="NAME">b8</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">moveParent</span><span class="PUNC">(</span><span class="NAME">cb</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bS.connections</span><span class="PUNC">[</span><span class="NAME">b8</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">sourceId</span><span class="PUNC">=</span><span class="NAME">bJ</span><span class="PUNC">;</span><span class="NAME">bS.connections</span><span class="PUNC">[</span><span class="NAME">b8</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">source</span><span class="PUNC">=</span><span class="NAME">bR</span><span class="PUNC">}</span><span class="NAME">W</span><span class="PUNC">(</span><span class="NAME">aV</span><span class="PUNC">,</span><span class="NAME">cc</span><span class="PUNC">,</span><span class="NAME">bS</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getUuid</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bL</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.makeInPlaceCopy</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b9</span><span class="PUNC">=</span><span class="NAME">bS.anchor.getCurrentLocation</span><span class="PUNC">(</span><span class="NAME">bS</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">b8</span><span class="PUNC">=</span><span class="NAME">bS.anchor.getOrientation</span><span class="PUNC">(</span><span class="NAME">bS</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">b7</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">compute</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="NAME">b9</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">b9</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getCurrentLocation</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="NAME">b9</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">b9</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getOrientation</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">b8</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">aH</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">anchor</span><span class="PUNC">:</span><span class="NAME">b7</span><span class="PUNC">,</span><span class="NAME">source</span><span class="PUNC">:</span><span class="NAME">bR</span><span class="PUNC">,</span><span class="NAME">paintStyle</span><span class="PUNC">:</span><span class="NAME">this.getPaintStyle</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">endpoint</span><span class="PUNC">:</span><span class="NAME">bP</span><span class="PUNC">,</span><span class="NAME">_transient</span><span class="PUNC">:</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="NAME">scope</span><span class="PUNC">:</span><span class="NAME">bS.scope</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.isConnectedTo</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b9</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b8</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">b9</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b7</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">b7</span><span class="PUNC">&lt;</span><span class="NAME">bS.connections.length</span><span class="PUNC">;</span><span class="NAME">b7</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bS.connections</span><span class="PUNC">[</span><span class="NAME">b7</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">endpoints</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NAME">b9</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">b8</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="KEYW">break</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">b8</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.isFloating</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">b2</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.connectorSelector</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b7</span><span class="PUNC">=</span><span class="NAME">bS.connections</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bS.isTarget</span><span class="PUNC">&&</span><span class="NAME">b7</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">b7</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">bS.connections.length</span><span class="PUNC">&lt;</span><span class="NAME">bY</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NAME">bY</span><span class="PUNC">==</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">?</span><span class="KEYW">null</span><span class="PUNC">:</span><span class="NAME">b7</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.isFull</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">bS.isFloating</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NAME">bY</span><span class="PUNC">&lt;</span><span class="NUMB">1</span><span class="PUNC">||</span><span class="NAME">bS.connections.length</span><span class="PUNC">&lt;</span><span class="NAME">bY</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.setDragAllowedWhenFull</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b7</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bM</span><span class="PUNC">=</span><span class="NAME">b7</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.setStyle</span><span class="PUNC">=</span><span class="NAME">bS.setPaintStyle</span><span class="PUNC">;</span><span class="NAME">this.equals</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b7</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.anchor.equals</span><span class="PUNC">(</span><span class="NAME">b7.anchor</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bO</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b8</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b7</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">b8</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b9</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">b9</span><span class="PUNC">&lt;</span><span class="NAME">bS.connections.length</span><span class="PUNC">;</span><span class="NAME">b9</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bS.connections</span><span class="PUNC">[</span><span class="NAME">b9</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">sourceId</span><span class="PUNC">==</span><span class="NAME">b8</span><span class="PUNC">||</span><span class="NAME">bS.connections</span><span class="PUNC">[</span><span class="NAME">b9</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">targetId</span><span class="PUNC">==</span><span class="NAME">b8</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">b7</span><span class="PUNC">=</span><span class="NAME">b9</span><span class="PUNC">;</span><span class="KEYW">break</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bS.connections</span><span class="PUNC">[</span><span class="NAME">b7</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.paint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">ca</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">ca</span><span class="PUNC">=</span><span class="NAME">ca</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">cg</span><span class="PUNC">=</span><span class="NAME">ca.timestamp</span><span class="PUNC">,</span><span class="NAME">cf</span><span class="PUNC">=</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">ca.recalc</span><span class="PUNC">===</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">cg</span><span class="PUNC">||</span><span class="NAME">bS.timestamp</span><span class="PUNC">!==</span><span class="NAME">cg</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">X</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">elId</span><span class="PUNC">:</span><span class="NAME">bJ</span><span class="PUNC">,</span><span class="NAME">timestamp</span><span class="PUNC">:</span><span class="NAME">cg</span><span class="PUNC">,</span><span class="NAME">recalc</span><span class="PUNC">:</span><span class="NAME">cf</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">cm</span><span class="PUNC">=</span><span class="NAME">ca.offset</span><span class="PUNC">||</span><span class="NAME">aj</span><span class="PUNC">[</span><span class="NAME">bJ</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">cm</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">cd</span><span class="PUNC">=</span><span class="NAME">ca.anchorPoint</span><span class="PUNC">,</span><span class="NAME">cb</span><span class="PUNC">=</span><span class="NAME">ca.connectorPaintStyle</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">cd</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b7</span><span class="PUNC">=</span><span class="NAME">ca.dimensions</span><span class="PUNC">||</span><span class="NAME">ag</span><span class="PUNC">[</span><span class="NAME">bJ</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">cm</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">||</span><span class="NAME">b7</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">X</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">elId</span><span class="PUNC">:</span><span class="NAME">bJ</span><span class="PUNC">,</span><span class="NAME">timestamp</span><span class="PUNC">:</span><span class="NAME">cg</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">cm</span><span class="PUNC">=</span><span class="NAME">aj</span><span class="PUNC">[</span><span class="NAME">bJ</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">b7</span><span class="PUNC">=</span><span class="NAME">ag</span><span class="PUNC">[</span><span class="NAME">bJ</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b9</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">xy</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NAME">cm.left</span><span class="PUNC">,</span><span class="NAME">cm.top</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">wh</span><span class="PUNC">:</span><span class="NAME">b7</span><span class="PUNC">,</span><span class="NAME">element</span><span class="PUNC">:</span><span class="NAME">bS</span><span class="PUNC">,</span><span class="NAME">timestamp</span><span class="PUNC">:</span><span class="NAME">cg</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">cf</span><span class="PUNC">&&</span><span class="NAME">bS.anchor.isDynamic</span><span class="PUNC">&&</span><span class="NAME">bS.connections.length</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">cj</span><span class="PUNC">=</span><span class="NAME">bO</span><span class="PUNC">(</span><span class="NAME">ca.elementWithPrecedence</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">cl</span><span class="PUNC">=</span><span class="NAME">cj.endpoints</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NAME">bS</span><span class="PUNC">?</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">cc</span><span class="PUNC">=</span><span class="NAME">cl</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">?</span><span class="NAME">cj.sourceId</span><span class="PUNC">:</span><span class="NAME">cj.targetId</span><span class="PUNC">,</span><span class="NAME">ci</span><span class="PUNC">=</span><span class="NAME">aj</span><span class="PUNC">[</span><span class="NAME">cc</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">ck</span><span class="PUNC">=</span><span class="NAME">ag</span><span class="PUNC">[</span><span class="NAME">cc</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">b9.txy</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="NAME">ci.left</span><span class="PUNC">,</span><span class="NAME">ci.top</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">b9.twh</span><span class="PUNC">=</span><span class="NAME">ck</span><span class="PUNC">;</span><span class="NAME">b9.tElement</span><span class="PUNC">=</span><span class="NAME">cj.endpoints</span><span class="PUNC">[</span><span class="NAME">cl</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="NAME">cd</span><span class="PUNC">=</span><span class="NAME">bS.anchor.compute</span><span class="PUNC">(</span><span class="NAME">b9</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ch</span><span class="PUNC">=</span><span class="NAME">bP.compute</span><span class="PUNC">(</span><span class="NAME">cd</span><span class="PUNC">,</span><span class="NAME">bS.anchor.getOrientation</span><span class="PUNC">(</span><span class="NAME">bS</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bS.paintStyleInUse</span><span class="PUNC">,</span><span class="NAME">cb</span><span class="PUNC">||</span><span class="NAME">bS.paintStyleInUse</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bP.paint</span><span class="PUNC">(</span><span class="NAME">ch</span><span class="PUNC">,</span><span class="NAME">bS.paintStyleInUse</span><span class="PUNC">,</span><span class="NAME">bS.anchor</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bS.timestamp</span><span class="PUNC">=</span><span class="NAME">cg</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ce</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">ce</span><span class="PUNC">&lt;</span><span class="NAME">bS.overlays.length</span><span class="PUNC">;</span><span class="NAME">ce</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b8</span><span class="PUNC">=</span><span class="NAME">bS.overlays</span><span class="PUNC">[</span><span class="NAME">ce</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">b8.isVisible</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bS.overlayPlacements</span><span class="PUNC">[</span><span class="NAME">ce</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">b8.draw</span><span class="PUNC">(</span><span class="NAME">bS.endpoint</span><span class="PUNC">,</span><span class="NAME">bS.paintStyleInUse</span><span class="PUNC">,</span><span class="NAME">ch</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.repaint</span><span class="PUNC">=</span><span class="NAME">this.paint</span><span class="PUNC">;</span><span class="NAME">this.removeConnection</span><span class="PUNC">=</span><span class="NAME">this.detach</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">n.CurrentLibrary.isDragSupported</span><span class="PUNC">(</span><span class="NAME">bR</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bX</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">id</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">element</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bW</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">bA</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="NAME">bF</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">bz</span><span class="PUNC">=</span><span class="NAME">bh</span><span class="PUNC">(</span><span class="NAME">bX</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bH</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bW</span><span class="PUNC">=</span><span class="NAME">bS.connectorSelector</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b7</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">bS.isEnabled</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">b7</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bW</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">b5.isSource</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">b7</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">b5.isSource</span><span class="PUNC">&&</span><span class="NAME">bS.isFull</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">bM</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">b7</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bW</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">bW.isDetachable</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">b7</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">b7</span><span class="PUNC">===</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">n.CurrentLibrary.stopDrag</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">n.CurrentLibrary.stopDrag</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">bz.stopDrag</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bW</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">bS.isFull</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NAME">b5.isSource</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bW</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="NAME">X</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">elId</span><span class="PUNC">:</span><span class="NAME">bJ</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bG</span><span class="PUNC">=</span><span class="NAME">bS.makeInPlaceCopy</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bG.referenceEndpoint</span><span class="PUNC">=</span><span class="NAME">bS</span><span class="PUNC">;</span><span class="NAME">bG.paint</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">S</span><span class="PUNC">(</span><span class="NAME">bX</span><span class="PUNC">,</span><span class="NAME">bS.parent</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">cd</span><span class="PUNC">=</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">bG.canvas</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">cb</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">(</span><span class="NAME">cd</span><span class="PUNC">,</span><span class="NAME">br</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">b8</span><span class="PUNC">=</span><span class="NAME">bs</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">cb.left</span><span class="PUNC">,</span><span class="NAME">cb.top</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bG.canvas</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n.CurrentLibrary.setOffset</span><span class="PUNC">(</span><span class="NAME">bX.element</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">left</span><span class="PUNC">:</span><span class="NAME">b8</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">top</span><span class="PUNC">:</span><span class="NAME">b8</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bS.parentAnchor</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bS.anchor</span><span class="PUNC">=</span><span class="NAME">br.makeAnchor</span><span class="PUNC">(</span><span class="NAME">bS.parentAnchor</span><span class="PUNC">,</span><span class="NAME">bS.elementId</span><span class="PUNC">,</span><span class="NAME">br</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">d</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">bS.canvas</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="STRN">"dragId"</span><span class="PUNC">,</span><span class="NAME">bX.id</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">d</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">bS.canvas</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="STRN">"elId"</span><span class="PUNC">,</span><span class="NAME">bJ</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">b5.proxy</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bS.setPaintStyle</span><span class="PUNC">(</span><span class="NAME">b5.proxy.paintStyle</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">b2</span><span class="PUNC">=</span><span class="NAME">av</span><span class="PUNC">(</span><span class="NAME">bS.getPaintStyle</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bS.anchor</span><span class="PUNC">,</span><span class="NAME">bP</span><span class="PUNC">,</span><span class="NAME">bS.canvas</span><span class="PUNC">,</span><span class="NAME">bX.element</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bW</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bS.anchor.locked</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="NAME">bS.setHover</span><span class="PUNC">(</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bW</span><span class="PUNC">=</span><span class="NAME">af</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">sourceEndpoint</span><span class="PUNC">:</span><span class="NAME">bS</span><span class="PUNC">,</span><span class="NAME">targetEndpoint</span><span class="PUNC">:</span><span class="NAME">b2</span><span class="PUNC">,</span><span class="NAME">source</span><span class="PUNC">:</span><span class="NAME">bS.endpointWillMoveTo</span><span class="PUNC">||</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">bR</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">target</span><span class="PUNC">:</span><span class="NAME">bX.element</span><span class="PUNC">,</span><span class="NAME">anchors</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="NAME">bS.anchor</span><span class="PUNC">,</span><span class="NAME">b2.anchor</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">paintStyle</span><span class="PUNC">:</span><span class="NAME">b5.connectorStyle</span><span class="PUNC">,</span><span class="NAME">hoverPaintStyle</span><span class="PUNC">:</span><span class="NAME">b5.connectorHoverStyle</span><span class="PUNC">,</span><span class="NAME">connector</span><span class="PUNC">:</span><span class="NAME">b5.connector</span><span class="PUNC">,</span><span class="NAME">overlays</span><span class="PUNC">:</span><span class="NAME">b5.connectorOverlays</span><span class="PUNC">,</span><span class="NAME">type</span><span class="PUNC">:</span><span class="NAME">bS.connectionType</span><span class="PUNC">,</span><span class="NAME">cssClass</span><span class="PUNC">:</span><span class="NAME">bS.connectorClass</span><span class="PUNC">,</span><span class="NAME">hoverClass</span><span class="PUNC">:</span><span class="NAME">bS.connectorHoverClass</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">bA</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="NAME">bW.connector.setHover</span><span class="PUNC">(</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bI</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">bG.canvas</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ca</span><span class="PUNC">=</span><span class="NAME">bW.endpoints</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">id</span><span class="PUNC">==</span><span class="NAME">bS.id</span><span class="PUNC">?</span><span class="NUMB">0</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NAME">bW.floatingAnchorIndex</span><span class="PUNC">=</span><span class="NAME">ca</span><span class="PUNC">;</span><span class="NAME">bS.detachFromConnection</span><span class="PUNC">(</span><span class="NAME">bW</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ce</span><span class="PUNC">=</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">bS.canvas</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">cc</span><span class="PUNC">=</span><span class="NAME">n.CurrentLibrary.getDragScope</span><span class="PUNC">(</span><span class="NAME">ce</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">d</span><span class="PUNC">(</span><span class="NAME">ce</span><span class="PUNC">,</span><span class="STRN">"originalScope"</span><span class="PUNC">,</span><span class="NAME">cc</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b9</span><span class="PUNC">=</span><span class="NAME">n.CurrentLibrary.getDropScope</span><span class="PUNC">(</span><span class="NAME">ce</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n.CurrentLibrary.setDragScope</span><span class="PUNC">(</span><span class="NAME">ce</span><span class="PUNC">,</span><span class="NAME">b9</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">ca</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bF</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="NAME">bW.source</span><span class="PUNC">,</span><span class="NAME">bW.sourceId</span><span class="PUNC">,</span><span class="NAME">b0</span><span class="PUNC">,</span><span class="NAME">cc</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">bW.source</span><span class="PUNC">=</span><span class="NAME">bX.element</span><span class="PUNC">;</span><span class="NAME">bW.sourceId</span><span class="PUNC">=</span><span class="NAME">bX.id</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">bF</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="NAME">bW.target</span><span class="PUNC">,</span><span class="NAME">bW.targetId</span><span class="PUNC">,</span><span class="NAME">b0</span><span class="PUNC">,</span><span class="NAME">cc</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">bW.target</span><span class="PUNC">=</span><span class="NAME">bX.element</span><span class="PUNC">;</span><span class="NAME">bW.targetId</span><span class="PUNC">=</span><span class="NAME">bX.id</span><span class="PUNC">}</span><span class="NAME">bW.endpoints</span><span class="PUNC">[</span><span class="NAME">ca</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">?</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">anchor.locked</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="NAME">bW.suspendedEndpoint</span><span class="PUNC">=</span><span class="NAME">bW.endpoints</span><span class="PUNC">[</span><span class="NAME">ca</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">bW.suspendedEndpoint.setHover</span><span class="PUNC">(</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">b2.referenceEndpoint</span><span class="PUNC">=</span><span class="NAME">bW.suspendedEndpoint</span><span class="PUNC">;</span><span class="NAME">bW.endpoints</span><span class="PUNC">[</span><span class="NAME">ca</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">b2</span><span class="PUNC">;</span><span class="NAME">a8</span><span class="PUNC">(</span><span class="NAME">bW</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">bk</span><span class="PUNC">[</span><span class="NAME">bX.id</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bW</span><span class="PUNC">;</span><span class="NAME">b2.addConnection</span><span class="PUNC">(</span><span class="NAME">bW</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">W</span><span class="PUNC">(</span><span class="NAME">aV</span><span class="PUNC">,</span><span class="NAME">bX.id</span><span class="PUNC">,</span><span class="NAME">b2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">br.currentlyDragging</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bD</span><span class="PUNC">=</span><span class="NAME">n.CurrentLibrary</span><span class="PUNC">,</span><span class="NAME">bZ</span><span class="PUNC">=</span><span class="NAME">b5.dragOptions</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bT</span><span class="PUNC">=</span><span class="NAME">n.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bD.defaultDragOptions</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bV</span><span class="PUNC">=</span><span class="NAME">bD.dragEvents.start</span><span class="PUNC">,</span><span class="NAME">b4</span><span class="PUNC">=</span><span class="NAME">bD.dragEvents.stop</span><span class="PUNC">,</span><span class="NAME">bK</span><span class="PUNC">=</span><span class="NAME">bD.dragEvents.drag</span><span class="PUNC">;</span><span class="NAME">bZ</span><span class="PUNC">=</span><span class="NAME">n.extend</span><span class="PUNC">(</span><span class="NAME">bT</span><span class="PUNC">,</span><span class="NAME">bZ</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bZ.scope</span><span class="PUNC">=</span><span class="NAME">bZ.scope</span><span class="PUNC">||</span><span class="NAME">bS.scope</span><span class="PUNC">;</span><span class="NAME">bZ</span><span class="PUNC">[</span><span class="NAME">bV</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">ap</span><span class="PUNC">(</span><span class="NAME">bZ</span><span class="PUNC">[</span><span class="NAME">bV</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bH</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bZ</span><span class="PUNC">[</span><span class="NAME">bK</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">ap</span><span class="PUNC">(</span><span class="NAME">bZ</span><span class="PUNC">[</span><span class="NAME">bK</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bz.drag</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bZ</span><span class="PUNC">[</span><span class="NAME">b4</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">ap</span><span class="PUNC">(</span><span class="NAME">bZ</span><span class="PUNC">[</span><span class="NAME">b4</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b8</span><span class="PUNC">=</span><span class="NAME">bD.getDropEvent</span><span class="PUNC">(</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">br.currentlyDragging</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="NAME">A</span><span class="PUNC">(</span><span class="NAME">aV</span><span class="PUNC">[</span><span class="NAME">bX.id</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b9</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">b9.id</span><span class="PUNC">==</span><span class="NAME">b2.id</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">aZ</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">bX.element</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">b2.canvas</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bR</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">aw</span><span class="PUNC">(</span><span class="NAME">bG.canvas</span><span class="PUNC">,</span><span class="NAME">bR</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">br.anchorManager.clearFor</span><span class="PUNC">(</span><span class="NAME">bX.id</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b7</span><span class="PUNC">=</span><span class="NAME">bW.floatingAnchorIndex</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">?</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="NAME">bW.floatingAnchorIndex</span><span class="PUNC">;</span><span class="NAME">bW.endpoints</span><span class="PUNC">[</span><span class="NAME">b7</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">?</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">anchor.locked</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="NAME">bS.setPaintStyle</span><span class="PUNC">(</span><span class="NAME">bN</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bW.endpoints</span><span class="PUNC">[</span><span class="NAME">b7</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NAME">b2</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bA</span><span class="PUNC">&&</span><span class="NAME">bW.suspendedEndpoint</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">b7</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bW.source</span><span class="PUNC">=</span><span class="NAME">bF</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">bW.sourceId</span><span class="PUNC">=</span><span class="NAME">bF</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">bW.target</span><span class="PUNC">=</span><span class="NAME">bF</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">bW.targetId</span><span class="PUNC">=</span><span class="NAME">bF</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="NAME">n.CurrentLibrary.setDragScope</span><span class="PUNC">(</span><span class="NAME">bF</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">bF</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bW.endpoints</span><span class="PUNC">[</span><span class="NAME">b7</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bW.suspendedEndpoint</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bW.isReattach</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NAME">bW._forceReattach</span><span class="PUNC">||</span><span class="NAME">bW._forceDetach</span><span class="PUNC">||</span><span class="PUNC">!</span><span class="NAME">bW.endpoints</span><span class="PUNC">[</span><span class="NAME">b7</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">?</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">detach</span><span class="PUNC">(</span><span class="NAME">bW</span><span class="PUNC">,</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="NAME">b8</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bW.setHover</span><span class="PUNC">(</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bW.floatingAnchorIndex</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="NAME">bW.suspendedEndpoint.addConnection</span><span class="PUNC">(</span><span class="NAME">bW</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">br.repaint</span><span class="PUNC">(</span><span class="NAME">bF</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">bW._forceDetach</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="NAME">bW._forceReattach</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">aZ</span><span class="PUNC">(</span><span class="NAME">bW.connector.getDisplayElements</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bS.parent</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bS.detachFromConnection</span><span class="PUNC">(</span><span class="NAME">bW</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="NAME">bS.anchor.locked</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="NAME">bS.paint</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">recalc</span><span class="PUNC">:</span><span class="KEYW">false</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bW.setHover</span><span class="PUNC">(</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">aT</span><span class="PUNC">(</span><span class="NAME">bW</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">bW</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="NAME">bG</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">aV</span><span class="PUNC">[</span><span class="NAME">b2.elementId</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">b2.anchor</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="NAME">b2</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="NAME">br.currentlyDragging</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b0</span><span class="PUNC">=</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">bS.canvas</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n.CurrentLibrary.initDraggable</span><span class="PUNC">(</span><span class="NAME">b0</span><span class="PUNC">,</span><span class="NAME">bZ</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bI</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">b9</span><span class="PUNC">,</span><span class="NAME">ce</span><span class="PUNC">,</span><span class="NAME">cc</span><span class="PUNC">,</span><span class="NAME">cf</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">b5.isTarget</span><span class="PUNC">||</span><span class="NAME">ce</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NAME">n.CurrentLibrary.isDropSupported</span><span class="PUNC">(</span><span class="NAME">bR</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ca</span><span class="PUNC">=</span><span class="NAME">b5.dropOptions</span><span class="PUNC">||</span><span class="NAME">br.Defaults.DropOptions</span><span class="PUNC">||</span><span class="NAME">n.Defaults.DropOptions</span><span class="PUNC">;</span><span class="NAME">ca</span><span class="PUNC">=</span><span class="NAME">n.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">ca</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">ca.scope</span><span class="PUNC">=</span><span class="NAME">ca.scope</span><span class="PUNC">||</span><span class="NAME">bS.scope</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b8</span><span class="PUNC">=</span><span class="NAME">n.CurrentLibrary.dragEvents.drop</span><span class="PUNC">,</span><span class="NAME">cd</span><span class="PUNC">=</span><span class="NAME">n.CurrentLibrary.dragEvents.over</span><span class="PUNC">,</span><span class="NAME">b7</span><span class="PUNC">=</span><span class="NAME">n.CurrentLibrary.dragEvents.out</span><span class="PUNC">,</span><span class="NAME">cb</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">cg</span><span class="PUNC">=</span><span class="NAME">n.CurrentLibrary.getDropEvent</span><span class="PUNC">(</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">cu</span><span class="PUNC">=</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">n.CurrentLibrary.getDragObject</span><span class="PUNC">(</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">ch</span><span class="PUNC">=</span><span class="NAME">c</span><span class="PUNC">(</span><span class="NAME">cu</span><span class="PUNC">,</span><span class="STRN">"dragId"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">ck</span><span class="PUNC">=</span><span class="NAME">c</span><span class="PUNC">(</span><span class="NAME">cu</span><span class="PUNC">,</span><span class="STRN">"elId"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">ct</span><span class="PUNC">=</span><span class="NAME">c</span><span class="PUNC">(</span><span class="NAME">cu</span><span class="PUNC">,</span><span class="STRN">"originalScope"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">co</span><span class="PUNC">=</span><span class="NAME">bk</span><span class="PUNC">[</span><span class="NAME">ch</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">cl</span><span class="PUNC">=</span><span class="NAME">co.suspendedEndpoint</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">co.suspendedEndpoint.id</span><span class="PUNC">==</span><span class="NAME">bS.id</span><span class="PUNC">||</span><span class="NAME">bS.referenceEndpoint</span><span class="PUNC">&&</span><span class="NAME">co.suspendedEndpoint.id</span><span class="PUNC">==</span><span class="NAME">bS.referenceEndpoint.id</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">cl</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">co._forceReattach</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">co</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">cq</span><span class="PUNC">=</span><span class="NAME">co.floatingAnchorIndex</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">?</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="NAME">co.floatingAnchorIndex</span><span class="PUNC">,</span><span class="NAME">cr</span><span class="PUNC">=</span><span class="NAME">cq</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">?</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">ct</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">n.CurrentLibrary.setDragScope</span><span class="PUNC">(</span><span class="NAME">cu</span><span class="PUNC">,</span><span class="NAME">ct</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">cs</span><span class="PUNC">=</span><span class="NAME">cf</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">?</span><span class="NAME">cf.isEnabled</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">bS.isFull</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bS.fire</span><span class="PUNC">(</span><span class="STRN">"maxConnections"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">endpoint</span><span class="PUNC">:</span><span class="NAME">bS</span><span class="PUNC">,</span><span class="NAME">connection</span><span class="PUNC">:</span><span class="NAME">co</span><span class="PUNC">,</span><span class="NAME">maxConnections</span><span class="PUNC">:</span><span class="NAME">bY</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">cg</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">bS.isFull</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">cq</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">bS.isSource</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">cq</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">bS.isTarget</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="NAME">cs</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">cm</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">co.suspendedEndpoint</span><span class="PUNC">&&</span><span class="NAME">co.suspendedEndpoint.id</span><span class="PUNC">!=</span><span class="NAME">bS.id</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">cq</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">co.source</span><span class="PUNC">=</span><span class="NAME">co.suspendedEndpoint.element</span><span class="PUNC">;</span><span class="NAME">co.sourceId</span><span class="PUNC">=</span><span class="NAME">co.suspendedEndpoint.elementId</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">co.target</span><span class="PUNC">=</span><span class="NAME">co.suspendedEndpoint.element</span><span class="PUNC">;</span><span class="NAME">co.targetId</span><span class="PUNC">=</span><span class="NAME">co.suspendedEndpoint.elementId</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">co.isDetachAllowed</span><span class="PUNC">(</span><span class="NAME">co</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">!</span><span class="NAME">co.endpoints</span><span class="PUNC">[</span><span class="NAME">cq</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">isDetachAllowed</span><span class="PUNC">(</span><span class="NAME">co</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">!</span><span class="NAME">co.suspendedEndpoint.isDetachAllowed</span><span class="PUNC">(</span><span class="NAME">co</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">!</span><span class="NAME">br.checkCondition</span><span class="PUNC">(</span><span class="STRN">"beforeDetach"</span><span class="PUNC">,</span><span class="NAME">co</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">cm</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">cq</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">co.source</span><span class="PUNC">=</span><span class="NAME">bS.element</span><span class="PUNC">;</span><span class="NAME">co.sourceId</span><span class="PUNC">=</span><span class="NAME">bS.elementId</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">co.target</span><span class="PUNC">=</span><span class="NAME">bS.element</span><span class="PUNC">;</span><span class="NAME">co.targetId</span><span class="PUNC">=</span><span class="NAME">bS.elementId</span><span class="PUNC">}</span><span class="NAME">cm</span><span class="PUNC">=</span><span class="NAME">cm</span><span class="PUNC">&&</span><span class="NAME">bS.isDropAllowed</span><span class="PUNC">(</span><span class="NAME">co.sourceId</span><span class="PUNC">,</span><span class="NAME">co.targetId</span><span class="PUNC">,</span><span class="NAME">co.scope</span><span class="PUNC">,</span><span class="NAME">co</span><span class="PUNC">,</span><span class="NAME">bS</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">cm</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">co.endpoints</span><span class="PUNC">[</span><span class="NAME">cq</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">detachFromConnection</span><span class="PUNC">(</span><span class="NAME">co</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">co.suspendedEndpoint</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">co.suspendedEndpoint.detachFromConnection</span><span class="PUNC">(</span><span class="NAME">co</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">co.endpoints</span><span class="PUNC">[</span><span class="NAME">cq</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">bS</span><span class="PUNC">;</span><span class="NAME">bS.addConnection</span><span class="PUNC">(</span><span class="NAME">co</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">cj</span><span class="PUNC">=</span><span class="NAME">bS.getParameters</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">cp</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">cj</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">co.setParameter</span><span class="PUNC">(</span><span class="NAME">cp</span><span class="PUNC">,</span><span class="NAME">cj</span><span class="PUNC">[</span><span class="NAME">cp</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">co.suspendedEndpoint</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">cj.draggable</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">n.CurrentLibrary.initDraggable</span><span class="PUNC">(</span><span class="NAME">bS.element</span><span class="PUNC">,</span><span class="NAME">bZ</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">cn</span><span class="PUNC">=</span><span class="NAME">co.suspendedEndpoint.getElement</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">ci</span><span class="PUNC">=</span><span class="NAME">co.suspendedEndpoint.elementId</span><span class="PUNC">;</span><span class="NAME">ba</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">source</span><span class="PUNC">:</span><span class="NAME">cq</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">?</span><span class="NAME">cn</span><span class="PUNC">:</span><span class="NAME">co.source</span><span class="PUNC">,</span><span class="NAME">target</span><span class="PUNC">:</span><span class="NAME">cq</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">?</span><span class="NAME">cn</span><span class="PUNC">:</span><span class="NAME">co.target</span><span class="PUNC">,</span><span class="NAME">sourceId</span><span class="PUNC">:</span><span class="NAME">cq</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">?</span><span class="NAME">ci</span><span class="PUNC">:</span><span class="NAME">co.sourceId</span><span class="PUNC">,</span><span class="NAME">targetId</span><span class="PUNC">:</span><span class="NAME">cq</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">?</span><span class="NAME">ci</span><span class="PUNC">:</span><span class="NAME">co.targetId</span><span class="PUNC">,</span><span class="NAME">sourceEndpoint</span><span class="PUNC">:</span><span class="NAME">cq</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">?</span><span class="NAME">co.suspendedEndpoint</span><span class="PUNC">:</span><span class="NAME">co.endpoints</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">targetEndpoint</span><span class="PUNC">:</span><span class="NAME">cq</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">?</span><span class="NAME">co.suspendedEndpoint</span><span class="PUNC">:</span><span class="NAME">co.endpoints</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">connection</span><span class="PUNC">:</span><span class="NAME">co</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="NAME">cg</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">bx</span><span class="PUNC">(</span><span class="NAME">co</span><span class="PUNC">,</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">cg</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">co.suspendedEndpoint</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">co.endpoints</span><span class="PUNC">[</span><span class="NAME">cq</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">co.suspendedEndpoint</span><span class="PUNC">;</span><span class="NAME">co.setHover</span><span class="PUNC">(</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">co._forceDetach</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">cq</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">co.source</span><span class="PUNC">=</span><span class="NAME">co.suspendedEndpoint.element</span><span class="PUNC">;</span><span class="NAME">co.sourceId</span><span class="PUNC">=</span><span class="NAME">co.suspendedEndpoint.elementId</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">co.target</span><span class="PUNC">=</span><span class="NAME">co.suspendedEndpoint.element</span><span class="PUNC">;</span><span class="NAME">co.targetId</span><span class="PUNC">=</span><span class="NAME">co.suspendedEndpoint.elementId</span><span class="PUNC">}</span><span class="NAME">co.suspendedEndpoint.addConnection</span><span class="PUNC">(</span><span class="NAME">co</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">co.endpoints</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">repaint</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">co.repaint</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">br.repaint</span><span class="PUNC">(</span><span class="NAME">co.source.elementId</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">co._forceDetach</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="NAME">co.floatingAnchorIndex</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="NAME">br.currentlyDragging</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="KEYW">delete</span><span class="WHIT"> </span><span class="NAME">bk</span><span class="PUNC">[</span><span class="NAME">ch</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">co.suspendedEndpoint</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">ca</span><span class="PUNC">[</span><span class="NAME">b8</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">ap</span><span class="PUNC">(</span><span class="NAME">ca</span><span class="PUNC">[</span><span class="NAME">b8</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">cb</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">ca</span><span class="PUNC">[</span><span class="NAME">cd</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">ap</span><span class="PUNC">(</span><span class="NAME">ca</span><span class="PUNC">[</span><span class="NAME">cd</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ch</span><span class="PUNC">=</span><span class="NAME">n.CurrentLibrary.getDragObject</span><span class="PUNC">(</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">ck</span><span class="PUNC">=</span><span class="NAME">c</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">ch</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="STRN">"dragId"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">cj</span><span class="PUNC">=</span><span class="NAME">bk</span><span class="PUNC">[</span><span class="NAME">ck</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">cj</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">cg</span><span class="PUNC">=</span><span class="NAME">cj.floatingAnchorIndex</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">?</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="NAME">cj.floatingAnchorIndex</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ci</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">bS.isTarget</span><span class="PUNC">&&</span><span class="NAME">cj.floatingAnchorIndex</span><span class="PUNC">!=</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">cj.suspendedEndpoint</span><span class="PUNC">&&</span><span class="NAME">bS.referenceEndpoint</span><span class="PUNC">&&</span><span class="NAME">bS.referenceEndpoint.id</span><span class="PUNC">==</span><span class="NAME">cj.suspendedEndpoint.id</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">ci</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">cj.endpoints</span><span class="PUNC">[</span><span class="NAME">cg</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">anchor.over</span><span class="PUNC">(</span><span class="NAME">bS.anchor</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">ca</span><span class="PUNC">[</span><span class="NAME">b7</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">ap</span><span class="PUNC">(</span><span class="NAME">ca</span><span class="PUNC">[</span><span class="NAME">b7</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ch</span><span class="PUNC">=</span><span class="NAME">n.CurrentLibrary.getDragObject</span><span class="PUNC">(</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">ck</span><span class="PUNC">=</span><span class="NAME">c</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">ch</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="STRN">"dragId"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">cj</span><span class="PUNC">=</span><span class="NAME">bk</span><span class="PUNC">[</span><span class="NAME">ck</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">cj</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">cg</span><span class="PUNC">=</span><span class="NAME">cj.floatingAnchorIndex</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">?</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="NAME">cj.floatingAnchorIndex</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ci</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">bS.isTarget</span><span class="PUNC">&&</span><span class="NAME">cj.floatingAnchorIndex</span><span class="PUNC">!=</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">cj.suspendedEndpoint</span><span class="PUNC">&&</span><span class="NAME">bS.referenceEndpoint</span><span class="PUNC">&&</span><span class="NAME">bS.referenceEndpoint.id</span><span class="PUNC">==</span><span class="NAME">cj.suspendedEndpoint.id</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">ci</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">cj.endpoints</span><span class="PUNC">[</span><span class="NAME">cg</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">anchor.out</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n.CurrentLibrary.initDroppable</span><span class="PUNC">(</span><span class="NAME">b9</span><span class="PUNC">,</span><span class="NAME">ca</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="NAME">cc</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">bI</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">(</span><span class="NAME">bS.canvas</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="PUNC">(</span><span class="NAME">b5._transient</span><span class="PUNC">||</span><span class="NAME">bS.anchor.isFloating</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">bS</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">b5.type</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">bS.addType</span><span class="PUNC">(</span><span class="NAME">b5.type</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bS</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">w</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">window</span><span class="PUNC">!=</span><span class="STRN">"undefined"</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">window.jsPlumb</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">}</span><span class="NAME">n.getInstance</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">H</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">w</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">H.init</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">H</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">q</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">H</span><span class="PUNC">,</span><span class="NAME">M</span><span class="PUNC">,</span><span class="NAME">J</span><span class="PUNC">,</span><span class="NAME">I</span><span class="PUNC">,</span><span class="NAME">L</span><span class="PUNC">,</span><span class="NAME">K</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">O</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">O</span><span class="PUNC">=</span><span class="NAME">O</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">N</span><span class="PUNC">=</span><span class="NAME">O.jsPlumbInstance.makeAnchor</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">H</span><span class="PUNC">,</span><span class="NAME">M</span><span class="PUNC">,</span><span class="NAME">J</span><span class="PUNC">,</span><span class="NAME">I</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">O.elementId</span><span class="PUNC">,</span><span class="NAME">O.jsPlumbInstance</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">N.type</span><span class="PUNC">=</span><span class="NAME">L</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">K</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">K</span><span class="PUNC">(</span><span class="NAME">N</span><span class="PUNC">,</span><span class="NAME">O</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">N</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">n.Anchors.TopCenter</span><span class="PUNC">=</span><span class="NAME">q</span><span class="PUNC">(</span><span class="NUMB">0.5</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="STRN">"TopCenter"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n.Anchors.BottomCenter</span><span class="PUNC">=</span><span class="NAME">q</span><span class="PUNC">(</span><span class="NUMB">0.5</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="STRN">"BottomCenter"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n.Anchors.LeftMiddle</span><span class="PUNC">=</span><span class="NAME">q</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0.5</span><span class="PUNC">,</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="STRN">"LeftMiddle"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n.Anchors.RightMiddle</span><span class="PUNC">=</span><span class="NAME">q</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">0.5</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="STRN">"RightMiddle"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n.Anchors.Center</span><span class="PUNC">=</span><span class="NAME">q</span><span class="PUNC">(</span><span class="NUMB">0.5</span><span class="PUNC">,</span><span class="NUMB">0.5</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="STRN">"Center"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n.Anchors.TopRight</span><span class="PUNC">=</span><span class="NAME">q</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="STRN">"TopRight"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n.Anchors.BottomRight</span><span class="PUNC">=</span><span class="NAME">q</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="STRN">"BottomRight"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n.Anchors.TopLeft</span><span class="PUNC">=</span><span class="NAME">q</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="STRN">"TopLeft"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n.Anchors.BottomLeft</span><span class="PUNC">=</span><span class="NAME">q</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="STRN">"BottomLeft"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n.Defaults.DynamicAnchors</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">H</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">H.jsPlumbInstance.makeAnchors</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="STRN">"TopCenter"</span><span class="PUNC">,</span><span class="STRN">"RightMiddle"</span><span class="PUNC">,</span><span class="STRN">"BottomCenter"</span><span class="PUNC">,</span><span class="STRN">"LeftMiddle"</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">H.elementId</span><span class="PUNC">,</span><span class="NAME">H.jsPlumbInstance</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">n.Anchors.AutoDefault</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">H</span><span class="PUNC">=</span><span class="NAME">I.jsPlumbInstance.makeDynamicAnchor</span><span class="PUNC">(</span><span class="NAME">n.Defaults.DynamicAnchors</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">H.type</span><span class="PUNC">=</span><span class="STRN">"AutoDefault"</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">H</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">n.Anchors.Assign</span><span class="PUNC">=</span><span class="NAME">q</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="STRN">"Assign"</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">,</span><span class="NAME">J</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">H</span><span class="PUNC">=</span><span class="NAME">J.position</span><span class="PUNC">||</span><span class="STRN">"Fixed"</span><span class="PUNC">;</span><span class="NAME">I.positionFinder</span><span class="PUNC">=</span><span class="NAME">H.constructor</span><span class="PUNC">==</span><span class="NAME">String</span><span class="PUNC">?</span><span class="NAME">J.jsPlumbInstance.AnchorPositionFinders</span><span class="PUNC">[</span><span class="NAME">H</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="NAME">H</span><span class="PUNC">;</span><span class="NAME">I.constructorParams</span><span class="PUNC">=</span><span class="NAME">J</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n.Anchors.Continuous</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">H</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">H.jsPlumbInstance.continuousAnchorFactory.get</span><span class="PUNC">(</span><span class="NAME">H</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">n.AnchorPositionFinders</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">Fixed</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">K</span><span class="PUNC">,</span><span class="NAME">H</span><span class="PUNC">,</span><span class="NAME">J</span><span class="PUNC">,</span><span class="NAME">I</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="PUNC">(</span><span class="NAME">K.left</span><span class="PUNC">-</span><span class="NAME">H.left</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">J</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">(</span><span class="NAME">K.top</span><span class="PUNC">-</span><span class="NAME">H.top</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">J</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">Grid</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">H</span><span class="PUNC">,</span><span class="NAME">Q</span><span class="PUNC">,</span><span class="NAME">L</span><span class="PUNC">,</span><span class="NAME">I</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">P</span><span class="PUNC">=</span><span class="NAME">H.left</span><span class="PUNC">-</span><span class="NAME">Q.left</span><span class="PUNC">,</span><span class="NAME">O</span><span class="PUNC">=</span><span class="NAME">H.top</span><span class="PUNC">-</span><span class="NAME">Q.top</span><span class="PUNC">,</span><span class="NAME">N</span><span class="PUNC">=</span><span class="NAME">L</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">/</span><span class="PUNC">(</span><span class="NAME">I.grid</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">M</span><span class="PUNC">=</span><span class="NAME">L</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">/</span><span class="PUNC">(</span><span class="NAME">I.grid</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">K</span><span class="PUNC">=</span><span class="NAME">Math.floor</span><span class="PUNC">(</span><span class="NAME">P</span><span class="PUNC">/</span><span class="NAME">N</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">J</span><span class="PUNC">=</span><span class="NAME">Math.floor</span><span class="PUNC">(</span><span class="NAME">O</span><span class="PUNC">/</span><span class="NAME">M</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">K</span><span class="PUNC">*</span><span class="NAME">N</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">N</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">L</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">J</span><span class="PUNC">*</span><span class="NAME">M</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">M</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">L</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">n.Anchors.Perimeter</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">H</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">H</span><span class="PUNC">=</span><span class="NAME">H</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">I</span><span class="PUNC">=</span><span class="NAME">H.anchorCount</span><span class="PUNC">||</span><span class="NUMB">60</span><span class="PUNC">,</span><span class="NAME">L</span><span class="PUNC">=</span><span class="NAME">H.shape</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">L</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="STRN">"no shape supplied to Perimeter Anchor type"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">J</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">W</span><span class="PUNC">=</span><span class="NUMB">0.5</span><span class="PUNC">,</span><span class="NAME">V</span><span class="PUNC">=</span><span class="NAME">Math.PI</span><span class="PUNC">*</span><span class="NUMB">2</span><span class="PUNC">/</span><span class="NAME">I</span><span class="PUNC">,</span><span class="NAME">X</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">T</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">U</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">U</span><span class="PUNC">&lt;</span><span class="NAME">I</span><span class="PUNC">;</span><span class="NAME">U</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">S</span><span class="PUNC">=</span><span class="NAME">W</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">W</span><span class="PUNC">*</span><span class="NAME">Math.sin</span><span class="PUNC">(</span><span class="NAME">X</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">Y</span><span class="PUNC">=</span><span class="NAME">W</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">W</span><span class="PUNC">*</span><span class="NAME">Math.cos</span><span class="PUNC">(</span><span class="NAME">X</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">T.push</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">S</span><span class="PUNC">,</span><span class="NAME">Y</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">X</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="NAME">V</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">T</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">M</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">U</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">W</span><span class="PUNC">=</span><span class="NAME">I</span><span class="PUNC">/</span><span class="NAME">U.length</span><span class="PUNC">,</span><span class="NAME">S</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">T</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">aa</span><span class="PUNC">,</span><span class="NAME">ad</span><span class="PUNC">,</span><span class="NAME">Z</span><span class="PUNC">,</span><span class="NAME">ac</span><span class="PUNC">,</span><span class="NAME">ae</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">W</span><span class="PUNC">=</span><span class="NAME">I</span><span class="PUNC">*</span><span class="NAME">ae</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">Y</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">Z</span><span class="PUNC">-</span><span class="NAME">aa</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">W</span><span class="PUNC">,</span><span class="NAME">X</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">ac</span><span class="PUNC">-</span><span class="NAME">ad</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">W</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ab</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">ab</span><span class="PUNC">&lt;</span><span class="NAME">W</span><span class="PUNC">;</span><span class="NAME">ab</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">S.push</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">aa</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">Y</span><span class="PUNC">*</span><span class="NAME">ab</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">ad</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">X</span><span class="PUNC">*</span><span class="NAME">ab</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">V</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">V</span><span class="PUNC">&lt;</span><span class="NAME">U.length</span><span class="PUNC">;</span><span class="NAME">V</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">T.apply</span><span class="PUNC">(</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">U</span><span class="PUNC">[</span><span class="NAME">V</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">S</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">P</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">S</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">U</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">T</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">T</span><span class="PUNC">&lt;</span><span class="NAME">S.length</span><span class="PUNC">;</span><span class="NAME">T</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">U.push</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">S</span><span class="PUNC">[</span><span class="NAME">T</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">S</span><span class="PUNC">[</span><span class="NAME">T</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">S</span><span class="PUNC">[</span><span class="NAME">T</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">S</span><span class="PUNC">[</span><span class="NAME">T</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">/</span><span class="NAME">S.length</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">M</span><span class="PUNC">(</span><span class="NAME">U</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">N</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">P</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">K</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">circle</span><span class="PUNC">:</span><span class="NAME">J</span><span class="PUNC">,</span><span class="NAME">ellipse</span><span class="PUNC">:</span><span class="NAME">J</span><span class="PUNC">,</span><span class="NAME">diamond</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">P</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="PUNC">[</span><span class="NUMB">0.5</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">0.5</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">0.5</span><span class="PUNC">,</span><span class="NUMB">0.5</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NUMB">0.5</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0.5</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0.5</span><span class="PUNC">,</span><span class="NUMB">0.5</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">rectangle</span><span class="PUNC">:</span><span class="NAME">N</span><span class="PUNC">,</span><span class="NAME">square</span><span class="PUNC">:</span><span class="NAME">N</span><span class="PUNC">,</span><span class="NAME">triangle</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">P</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="PUNC">[</span><span class="NUMB">0.5</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">0.5</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">path</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">X</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">V</span><span class="PUNC">=</span><span class="NAME">X.points</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">W</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">T</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">U</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">U</span><span class="PUNC">&lt;</span><span class="NAME">V.length</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NAME">U</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">S</span><span class="PUNC">=</span><span class="NAME">Math.sqrt</span><span class="PUNC">(</span><span class="NAME">Math.pow</span><span class="PUNC">(</span><span class="NAME">V</span><span class="PUNC">[</span><span class="NAME">U</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">V</span><span class="PUNC">[</span><span class="NAME">U</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">Math.pow</span><span class="PUNC">(</span><span class="NAME">V</span><span class="PUNC">[</span><span class="NAME">U</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">V</span><span class="PUNC">[</span><span class="NAME">U</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">T</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="NAME">S</span><span class="PUNC">;</span><span class="NAME">W.push</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">V</span><span class="PUNC">[</span><span class="NAME">U</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">V</span><span class="PUNC">[</span><span class="NAME">U</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">V</span><span class="PUNC">[</span><span class="NAME">U</span><span class="PUNC">+</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">V</span><span class="PUNC">[</span><span class="NAME">U</span><span class="PUNC">+</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">S</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">U</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">U</span><span class="PUNC">&lt;</span><span class="NAME">W.length</span><span class="PUNC">;</span><span class="NAME">U</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">W</span><span class="PUNC">[</span><span class="NAME">U</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">W</span><span class="PUNC">[</span><span class="NAME">U</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">/</span><span class="NAME">T</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">M</span><span class="PUNC">(</span><span class="NAME">W</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">Q</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">X</span><span class="PUNC">,</span><span class="NAME">W</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">Y</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">V</span><span class="PUNC">=</span><span class="NAME">W</span><span class="PUNC">/</span><span class="NUMB">180</span><span class="PUNC">*</span><span class="NAME">Math.PI</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">U</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">U</span><span class="PUNC">&lt;</span><span class="NAME">X.length</span><span class="PUNC">;</span><span class="NAME">U</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">T</span><span class="PUNC">=</span><span class="NAME">X</span><span class="PUNC">[</span><span class="NAME">U</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NUMB">0.5</span><span class="PUNC">,</span><span class="NAME">S</span><span class="PUNC">=</span><span class="NAME">X</span><span class="PUNC">[</span><span class="NAME">U</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NUMB">0.5</span><span class="PUNC">;</span><span class="NAME">Y.push</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NUMB">0.5</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">T</span><span class="PUNC">*</span><span class="NAME">Math.cos</span><span class="PUNC">(</span><span class="NAME">V</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">S</span><span class="PUNC">*</span><span class="NAME">Math.sin</span><span class="PUNC">(</span><span class="NAME">V</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NUMB">0.5</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">T</span><span class="PUNC">*</span><span class="NAME">Math.sin</span><span class="PUNC">(</span><span class="NAME">V</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">S</span><span class="PUNC">*</span><span class="NAME">Math.cos</span><span class="PUNC">(</span><span class="NAME">V</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">X</span><span class="PUNC">[</span><span class="NAME">U</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">X</span><span class="PUNC">[</span><span class="NAME">U</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">Y</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">K</span><span class="PUNC">[</span><span class="NAME">L</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="STRN">"Shape ["</span><span class="PUNC">+</span><span class="NAME">L</span><span class="PUNC">+</span><span class="STRN">"] is unknown by Perimeter Anchor type"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">R</span><span class="PUNC">=</span><span class="NAME">K</span><span class="PUNC">[</span><span class="NAME">L</span><span class="PUNC">]</span><span class="PUNC">(</span><span class="NAME">H</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">H.rotation</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">R</span><span class="PUNC">=</span><span class="NAME">Q</span><span class="PUNC">(</span><span class="NAME">R</span><span class="PUNC">,</span><span class="NAME">H.rotation</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">O</span><span class="PUNC">=</span><span class="NAME">H.jsPlumbInstance.makeDynamicAnchor</span><span class="PUNC">(</span><span class="NAME">R</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">O.type</span><span class="PUNC">=</span><span class="STRN">"Perimeter"</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">O</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">jsPlumb.DOMElementComponent</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">jsPlumb.jsPlumbUIComponent.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.mousemove</span><span class="PUNC">=</span><span class="NAME">this.dblclick</span><span class="PUNC">=</span><span class="NAME">this.click</span><span class="PUNC">=</span><span class="NAME">this.mousedown</span><span class="PUNC">=</span><span class="NAME">this.mouseup</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">f</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Connectors.Straight</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.type</span><span class="PUNC">=</span><span class="STRN">"Straight"</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">k</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">,</span><span class="NAME">m</span><span class="PUNC">,</span><span class="NAME">g</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">,</span><span class="NAME">p</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">;</span><span class="NAME">this.compute</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">B</span><span class="PUNC">,</span><span class="NAME">K</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">A</span><span class="PUNC">,</span><span class="NAME">G</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">,</span><span class="NAME">E</span><span class="PUNC">,</span><span class="NAME">z</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">J</span><span class="PUNC">=</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">B</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">K</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">=</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">B</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">K</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">C</span><span class="PUNC">=</span><span class="NUMB">0.45</span><span class="PUNC">*</span><span class="NAME">J</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">=</span><span class="NUMB">0.45</span><span class="PUNC">*</span><span class="NAME">D</span><span class="PUNC">;</span><span class="NAME">J</span><span class="PUNC">*</span><span class="PUNC">=</span><span class="NUMB">1.9</span><span class="PUNC">;</span><span class="NAME">D</span><span class="PUNC">*</span><span class="PUNC">=</span><span class="NUMB">1.9</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">H</span><span class="PUNC">=</span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">B</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">K</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">C</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">F</span><span class="PUNC">=</span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">B</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">K</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">v</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">I</span><span class="PUNC">=</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">E</span><span class="PUNC">,</span><span class="NAME">z</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">J</span><span class="PUNC">&lt;</span><span class="NAME">I</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">J</span><span class="PUNC">=</span><span class="NAME">I</span><span class="PUNC">;</span><span class="NAME">H</span><span class="PUNC">=</span><span class="NAME">B</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">K</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">B</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">C</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">J</span><span class="PUNC">-</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">B</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">K</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">D</span><span class="PUNC">&lt;</span><span class="NAME">I</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">D</span><span class="PUNC">=</span><span class="NAME">I</span><span class="PUNC">;</span><span class="NAME">F</span><span class="PUNC">=</span><span class="NAME">B</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">K</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">B</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">v</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">D</span><span class="PUNC">-</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">B</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">K</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">}</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">B</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">&lt;</span><span class="NAME">K</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">?</span><span class="NAME">C</span><span class="PUNC">:</span><span class="NAME">J</span><span class="PUNC">-</span><span class="NAME">C</span><span class="PUNC">;</span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">B</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">&lt;</span><span class="NAME">K</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">?</span><span class="NAME">v</span><span class="PUNC">:</span><span class="NAME">D</span><span class="PUNC">-</span><span class="NAME">v</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">B</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">&lt;</span><span class="NAME">K</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">?</span><span class="NAME">J</span><span class="PUNC">-</span><span class="NAME">C</span><span class="PUNC">:</span><span class="NAME">C</span><span class="PUNC">;</span><span class="NAME">d</span><span class="PUNC">=</span><span class="NAME">B</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">&lt;</span><span class="NAME">K</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">?</span><span class="NAME">D</span><span class="PUNC">-</span><span class="NAME">v</span><span class="PUNC">:</span><span class="NAME">v</span><span class="PUNC">;</span><span class="NAME">k</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="NAME">H</span><span class="PUNC">,</span><span class="NAME">F</span><span class="PUNC">,</span><span class="NAME">J</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">-</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">m</span><span class="PUNC">=</span><span class="NAME">d</span><span class="PUNC">-</span><span class="NAME">h</span><span class="PUNC">;</span><span class="NAME">f</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.gradient</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">:</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">:</span><span class="NAME">h</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">:</span><span class="NAME">d</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">/</span><span class="NAME">f</span><span class="PUNC">;</span><span class="NAME">q</span><span class="PUNC">=</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">*</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">f</span><span class="PUNC">*</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">h</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">g</span><span class="PUNC">=</span><span class="NAME">Math.atan</span><span class="PUNC">(</span><span class="NAME">f</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">Math.atan</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">Math.sqrt</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">*</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">*</span><span class="NAME">m</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">k</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.pointOnPath</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">:</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">:</span><span class="NAME">h</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">:</span><span class="NAME">d</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">v</span><span class="PUNC">?</span><span class="NAME">u</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">?</span><span class="NAME">u</span><span class="PUNC">:</span><span class="NAME">n</span><span class="PUNC">+</span><span class="NAME">u</span><span class="PUNC">:</span><span class="NAME">u</span><span class="PUNC">*</span><span class="NAME">n</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">jsPlumbUtil.pointOnLine</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">:</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">:</span><span class="NAME">h</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">:</span><span class="NAME">d</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.gradientAtPoint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">f</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.pointAlongPathFrom</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">w</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">v</span><span class="PUNC">=</span><span class="NAME">s.pointOnPath</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">w</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">?</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">:</span><span class="NAME">i</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">-</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NUMB">10</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">:</span><span class="NAME">h</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">-</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NUMB">10</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">:</span><span class="NAME">d</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">jsPlumbUtil.pointOnLine</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Connectors.Bezier</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">w</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">q</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">;</span><span class="NAME">w</span><span class="PUNC">=</span><span class="NAME">w</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.majorAnchor</span><span class="PUNC">=</span><span class="NAME">w.curviness</span><span class="PUNC">||</span><span class="NUMB">150</span><span class="PUNC">;</span><span class="NAME">this.minorAnchor</span><span class="PUNC">=</span><span class="NUMB">10</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">u</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="NAME">this.type</span><span class="PUNC">=</span><span class="STRN">"Bezier"</span><span class="PUNC">;</span><span class="NAME">this._findControlPoint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">,</span><span class="NAME">B</span><span class="PUNC">,</span><span class="NAME">G</span><span class="PUNC">,</span><span class="NAME">z</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">F</span><span class="PUNC">=</span><span class="NAME">G.getOrientation</span><span class="PUNC">(</span><span class="NAME">y</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">H</span><span class="PUNC">=</span><span class="NAME">z.getOrientation</span><span class="PUNC">(</span><span class="NAME">B</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">C</span><span class="PUNC">=</span><span class="NAME">F</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">!=</span><span class="NAME">H</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="NAME">F</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NAME">H</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">A</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">J</span><span class="PUNC">=</span><span class="NAME">q.majorAnchor</span><span class="PUNC">,</span><span class="NAME">E</span><span class="PUNC">=</span><span class="NAME">q.minorAnchor</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">C</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">F</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">A.push</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">&lt;</span><span class="NAME">D</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">?</span><span class="NAME">I</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="NAME">E</span><span class="PUNC">:</span><span class="NAME">I</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">E</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">A.push</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">J</span><span class="PUNC">*</span><span class="NAME">F</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">F</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">A.push</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">&lt;</span><span class="NAME">D</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">?</span><span class="NAME">I</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="NAME">E</span><span class="PUNC">:</span><span class="NAME">I</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">E</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">A.push</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">J</span><span class="PUNC">*</span><span class="NAME">H</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">H</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">A.push</span><span class="PUNC">(</span><span class="NAME">D</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">&lt;</span><span class="NAME">x</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">?</span><span class="NAME">I</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="NAME">E</span><span class="PUNC">:</span><span class="NAME">I</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">E</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">A.push</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">J</span><span class="PUNC">*</span><span class="NAME">H</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">H</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">A.push</span><span class="PUNC">(</span><span class="NAME">D</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">&lt;</span><span class="NAME">x</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">?</span><span class="NAME">I</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="NAME">E</span><span class="PUNC">:</span><span class="NAME">I</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">E</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">A.push</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">J</span><span class="PUNC">*</span><span class="NAME">F</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">A</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">m</span><span class="PUNC">,</span><span class="NAME">g</span><span class="PUNC">,</span><span class="NAME">p</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">,</span><span class="NAME">g</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">,</span><span class="NAME">k</span><span class="PUNC">;</span><span class="NAME">this.compute</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">T</span><span class="PUNC">,</span><span class="NAME">A</span><span class="PUNC">,</span><span class="NAME">N</span><span class="PUNC">,</span><span class="NAME">B</span><span class="PUNC">,</span><span class="NAME">R</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">M</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">=</span><span class="NAME">x</span><span class="PUNC">||</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">v</span><span class="PUNC">=</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">T</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">A</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">x</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">T</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">A</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">x</span><span class="PUNC">;</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">T</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">A</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">T</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">A</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">g</span><span class="PUNC">=</span><span class="NAME">T</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">&lt;</span><span class="NAME">A</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">?</span><span class="NAME">v</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">f</span><span class="PUNC">=</span><span class="NAME">T</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">&lt;</span><span class="NAME">A</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">?</span><span class="NAME">e</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">p</span><span class="PUNC">=</span><span class="NAME">T</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">&lt;</span><span class="NAME">A</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">v</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">T</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">&lt;</span><span class="NAME">A</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">q._findControlPoint</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">g</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">T</span><span class="PUNC">,</span><span class="NAME">A</span><span class="PUNC">,</span><span class="NAME">N</span><span class="PUNC">,</span><span class="NAME">B</span><span class="PUNC">,</span><span class="NAME">R</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">m</span><span class="PUNC">=</span><span class="NAME">q._findControlPoint</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">p</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">A</span><span class="PUNC">,</span><span class="NAME">T</span><span class="PUNC">,</span><span class="NAME">B</span><span class="PUNC">,</span><span class="NAME">N</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">,</span><span class="NAME">R</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">L</span><span class="PUNC">=</span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">g</span><span class="PUNC">,</span><span class="NAME">p</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">K</span><span class="PUNC">=</span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">m</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">G</span><span class="PUNC">=</span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">L</span><span class="PUNC">,</span><span class="NAME">K</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">S</span><span class="PUNC">=</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">g</span><span class="PUNC">,</span><span class="NAME">p</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">P</span><span class="PUNC">=</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">m</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">=</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">S</span><span class="PUNC">,</span><span class="NAME">P</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">D</span><span class="PUNC">></span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">v</span><span class="PUNC">=</span><span class="NAME">D</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">G</span><span class="PUNC">&lt;</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">t</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="NAME">G</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">I</span><span class="PUNC">=</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">G</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">v</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="NAME">I</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="NAME">I</span><span class="PUNC">;</span><span class="NAME">g</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="NAME">I</span><span class="PUNC">;</span><span class="NAME">p</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="NAME">I</span><span class="PUNC">;</span><span class="NAME">m</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="NAME">I</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">Q</span><span class="PUNC">=</span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">f</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">O</span><span class="PUNC">=</span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">m</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">C</span><span class="PUNC">=</span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">Q</span><span class="PUNC">,</span><span class="NAME">O</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">H</span><span class="PUNC">=</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">f</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">F</span><span class="PUNC">=</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">m</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">z</span><span class="PUNC">=</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">H</span><span class="PUNC">,</span><span class="NAME">F</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">z</span><span class="PUNC">></span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">z</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">&lt;</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">s</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="NAME">C</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">E</span><span class="PUNC">=</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="NAME">E</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="NAME">E</span><span class="PUNC">;</span><span class="NAME">f</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="NAME">E</span><span class="PUNC">;</span><span class="NAME">o</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="NAME">E</span><span class="PUNC">;</span><span class="NAME">m</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="NAME">E</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">M</span><span class="PUNC">&&</span><span class="NAME">v</span><span class="PUNC">&lt;</span><span class="NAME">M</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">J</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">M</span><span class="PUNC">-</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">;</span><span class="NAME">v</span><span class="PUNC">=</span><span class="NAME">M</span><span class="PUNC">;</span><span class="NAME">t</span><span class="PUNC">-</span><span class="PUNC">=</span><span class="NAME">J</span><span class="PUNC">;</span><span class="NAME">g</span><span class="PUNC">=</span><span class="NAME">g</span><span class="PUNC">+</span><span class="NAME">J</span><span class="PUNC">;</span><span class="NAME">p</span><span class="PUNC">=</span><span class="NAME">p</span><span class="PUNC">+</span><span class="NAME">J</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="NAME">J</span><span class="PUNC">;</span><span class="NAME">m</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">m</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="NAME">J</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">M</span><span class="PUNC">&&</span><span class="NAME">e</span><span class="PUNC">&lt;</span><span class="NAME">M</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">J</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">M</span><span class="PUNC">-</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">M</span><span class="PUNC">;</span><span class="NAME">s</span><span class="PUNC">-</span><span class="PUNC">=</span><span class="NAME">J</span><span class="PUNC">;</span><span class="NAME">f</span><span class="PUNC">=</span><span class="NAME">f</span><span class="PUNC">+</span><span class="NAME">J</span><span class="PUNC">;</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">o</span><span class="PUNC">+</span><span class="NAME">J</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="NAME">J</span><span class="PUNC">;</span><span class="NAME">m</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">m</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="NAME">J</span><span class="PUNC">}</span><span class="NAME">u</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">g</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">,</span><span class="NAME">p</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">m</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">m</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">u</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">d</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">:</span><span class="NAME">g</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">:</span><span class="NAME">f</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">:</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">:</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">:</span><span class="NAME">m</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">:</span><span class="NAME">m</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">:</span><span class="NAME">p</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">:</span><span class="NAME">o</span><span class="PUNC">}</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">y</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">z</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">z</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">=</span><span class="NAME">jsBezier.locationAlongCurveFrom</span><span class="PUNC">(</span><span class="NAME">y</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">?</span><span class="NUMB">0</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">x</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.pointOnPath</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">z</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">y</span><span class="PUNC">=</span><span class="NAME">d</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">x</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">(</span><span class="NAME">y</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">z</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">jsBezier.pointOnCurve</span><span class="PUNC">(</span><span class="NAME">y</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.gradientAtPoint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">z</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">y</span><span class="PUNC">=</span><span class="NAME">d</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">x</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">(</span><span class="NAME">y</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">z</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">jsBezier.gradientAtPoint</span><span class="PUNC">(</span><span class="NAME">y</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.pointAlongPathFrom</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">A</span><span class="PUNC">,</span><span class="NAME">z</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">y</span><span class="PUNC">=</span><span class="NAME">d</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">x</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">(</span><span class="NAME">y</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">z</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">jsBezier.pointAlongCurveFrom</span><span class="PUNC">(</span><span class="NAME">y</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">A</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Connectors.Flowchart</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">z</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.type</span><span class="PUNC">=</span><span class="STRN">"Flowchart"</span><span class="PUNC">;</span><span class="NAME">z</span><span class="PUNC">=</span><span class="NAME">z</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">z.stub</span><span class="PUNC">||</span><span class="NAME">z.minStubLength</span><span class="PUNC">||</span><span class="NUMB">30</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.isArray</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.isArray</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">z.gap</span><span class="PUNC">||</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">m</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">g</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">p</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">=</span><span class="PUNC">-</span><span class="NAME">Infinity</span><span class="PUNC">,</span><span class="NAME">w</span><span class="PUNC">=</span><span class="PUNC">-</span><span class="NAME">Infinity</span><span class="PUNC">,</span><span class="NAME">A</span><span class="PUNC">=</span><span class="NAME">Infinity</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">=</span><span class="NAME">Infinity</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">=</span><span class="NAME">z.grid</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">G</span><span class="PUNC">,</span><span class="NAME">C</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">F</span><span class="PUNC">=</span><span class="NAME">G</span><span class="PUNC">%</span><span class="NAME">C</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">=</span><span class="NAME">Math.floor</span><span class="PUNC">(</span><span class="NAME">G</span><span class="PUNC">/</span><span class="NAME">C</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">E</span><span class="PUNC">=</span><span class="NAME">F</span><span class="PUNC">></span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">(</span><span class="NAME">D</span><span class="PUNC">+</span><span class="NAME">E</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">C</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">,</span><span class="NAME">F</span><span class="PUNC">,</span><span class="NAME">E</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="NAME">E</span><span class="PUNC">||</span><span class="NAME">d</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">?</span><span class="NAME">C</span><span class="PUNC">:</span><span class="NAME">f</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">||</span><span class="NAME">d</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">?</span><span class="NAME">F</span><span class="PUNC">:</span><span class="NAME">f</span><span class="PUNC">(</span><span class="NAME">F</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">B</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">D</span><span class="PUNC">,</span><span class="NAME">C</span><span class="PUNC">,</span><span class="NAME">H</span><span class="PUNC">,</span><span class="NAME">G</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">F</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">E</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">E</span><span class="PUNC">&lt;</span><span class="NAME">u.length</span><span class="PUNC">;</span><span class="NAME">E</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">q</span><span class="PUNC">[</span><span class="NAME">E</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">u</span><span class="PUNC">[</span><span class="NAME">E</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">5</span><span class="PUNC">]</span><span class="PUNC">/</span><span class="NAME">m</span><span class="PUNC">;</span><span class="NAME">g</span><span class="PUNC">[</span><span class="NAME">E</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="NAME">F</span><span class="PUNC">,</span><span class="PUNC">(</span><span class="NAME">F</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">[</span><span class="NAME">E</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">5</span><span class="PUNC">]</span><span class="PUNC">/</span><span class="NAME">m</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">v.push</span><span class="PUNC">(</span><span class="NAME">u.length</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">C</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">C</span><span class="PUNC">&lt;</span><span class="NAME">u.length</span><span class="PUNC">;</span><span class="NAME">C</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">v.push</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">[</span><span class="NAME">C</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">v.push</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">[</span><span class="NAME">C</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">k</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">L</span><span class="PUNC">,</span><span class="NAME">I</span><span class="PUNC">,</span><span class="NAME">K</span><span class="PUNC">,</span><span class="NAME">J</span><span class="PUNC">,</span><span class="NAME">H</span><span class="PUNC">,</span><span class="NAME">G</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">D</span><span class="PUNC">=</span><span class="NAME">u.length</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">?</span><span class="NAME">K</span><span class="PUNC">:</span><span class="NAME">u</span><span class="PUNC">[</span><span class="NAME">u.length</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">C</span><span class="PUNC">=</span><span class="NAME">u.length</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">?</span><span class="NAME">J</span><span class="PUNC">:</span><span class="NAME">u</span><span class="PUNC">[</span><span class="NAME">u.length</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">E</span><span class="PUNC">=</span><span class="NAME">L</span><span class="PUNC">==</span><span class="NAME">D</span><span class="PUNC">?</span><span class="NAME">Infinity</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">F</span><span class="PUNC">=</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">L</span><span class="PUNC">==</span><span class="NAME">D</span><span class="PUNC">?</span><span class="NAME">I</span><span class="PUNC">-</span><span class="NAME">C</span><span class="PUNC">:</span><span class="NAME">L</span><span class="PUNC">-</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">u.push</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">L</span><span class="PUNC">,</span><span class="NAME">I</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">,</span><span class="NAME">C</span><span class="PUNC">,</span><span class="NAME">E</span><span class="PUNC">,</span><span class="NAME">F</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">m</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="NAME">F</span><span class="PUNC">;</span><span class="NAME">y</span><span class="PUNC">=</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">y</span><span class="PUNC">,</span><span class="NAME">L</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">w</span><span class="PUNC">=</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">w</span><span class="PUNC">,</span><span class="NAME">I</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">A</span><span class="PUNC">=</span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">A</span><span class="PUNC">,</span><span class="NAME">L</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">x</span><span class="PUNC">=</span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">I</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">E</span><span class="PUNC">,</span><span class="NAME">G</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">G</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">E</span><span class="PUNC">=</span><span class="NAME">E</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">?</span><span class="NAME">E</span><span class="PUNC">/</span><span class="NAME">m</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">+</span><span class="NAME">E</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">m</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">C</span><span class="PUNC">=</span><span class="NAME">g.length</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">F</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">F</span><span class="PUNC">&lt;</span><span class="NAME">g.length</span><span class="PUNC">;</span><span class="NAME">F</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">g</span><span class="PUNC">[</span><span class="NAME">F</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">>=</span><span class="NAME">E</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">C</span><span class="PUNC">=</span><span class="NAME">F</span><span class="PUNC">;</span><span class="NAME">D</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">E</span><span class="PUNC">-</span><span class="NAME">g</span><span class="PUNC">[</span><span class="NAME">F</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">q</span><span class="PUNC">[</span><span class="NAME">F</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">break</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="PUNC">{</span><span class="NAME">segment</span><span class="PUNC">:</span><span class="NAME">u</span><span class="PUNC">[</span><span class="NAME">C</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">proportion</span><span class="PUNC">:</span><span class="NAME">D</span><span class="PUNC">,</span><span class="NAME">index</span><span class="PUNC">:</span><span class="NAME">C</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.compute</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">Z</span><span class="PUNC">,</span><span class="NAME">an</span><span class="PUNC">,</span><span class="NAME">C</span><span class="PUNC">,</span><span class="NAME">T</span><span class="PUNC">,</span><span class="NAME">ay</span><span class="PUNC">,</span><span class="NAME">N</span><span class="PUNC">,</span><span class="NAME">X</span><span class="PUNC">,</span><span class="NAME">S</span><span class="PUNC">,</span><span class="NAME">at</span><span class="PUNC">,</span><span class="NAME">ap</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">u</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">g</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">m</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">q</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">y</span><span class="PUNC">=</span><span class="NAME">w</span><span class="PUNC">=</span><span class="PUNC">-</span><span class="NAME">Infinity</span><span class="PUNC">;</span><span class="NAME">A</span><span class="PUNC">=</span><span class="NAME">x</span><span class="PUNC">=</span><span class="NAME">Infinity</span><span class="PUNC">;</span><span class="NAME">r.lineWidth</span><span class="PUNC">=</span><span class="NAME">X</span><span class="PUNC">;</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">an</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">&lt;</span><span class="NAME">Z</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">p</span><span class="PUNC">=</span><span class="NAME">an</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">&lt;</span><span class="NAME">Z</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ad</span><span class="PUNC">=</span><span class="NAME">X</span><span class="PUNC">||</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">H</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">ad</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">+</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">E</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">ad</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">+</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">G</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">ad</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">+</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">ad</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">+</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">Q</span><span class="PUNC">=</span><span class="NAME">ay.orientation</span><span class="PUNC">||</span><span class="NAME">ay.getOrientation</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">az</span><span class="PUNC">=</span><span class="NAME">N.orientation</span><span class="PUNC">||</span><span class="NAME">N.getOrientation</span><span class="PUNC">(</span><span class="NAME">T</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">am</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">?</span><span class="NAME">an</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="NAME">Z</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">al</span><span class="PUNC">=</span><span class="NAME">p</span><span class="PUNC">?</span><span class="NAME">an</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="NAME">Z</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">ao</span><span class="PUNC">=</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">an</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">Z</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">H</span><span class="PUNC">+</span><span class="NAME">E</span><span class="PUNC">,</span><span class="NAME">ax</span><span class="PUNC">=</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">an</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">Z</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">G</span><span class="PUNC">+</span><span class="NAME">D</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">Q</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">&&</span><span class="NAME">Q</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">||</span><span class="NAME">az</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">&&</span><span class="NAME">az</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">af</span><span class="PUNC">=</span><span class="NAME">ao</span><span class="PUNC">></span><span class="NAME">ax</span><span class="PUNC">?</span><span class="NUMB">0</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">ah</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">af</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">Q</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">az</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">Q</span><span class="PUNC">[</span><span class="NAME">af</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">Z</span><span class="PUNC">[</span><span class="NAME">af</span><span class="PUNC">]</span><span class="PUNC">></span><span class="NAME">an</span><span class="PUNC">[</span><span class="NAME">af</span><span class="PUNC">]</span><span class="PUNC">?</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NAME">az</span><span class="PUNC">[</span><span class="NAME">af</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">Z</span><span class="PUNC">[</span><span class="NAME">af</span><span class="PUNC">]</span><span class="PUNC">></span><span class="NAME">an</span><span class="PUNC">[</span><span class="NAME">af</span><span class="PUNC">]</span><span class="PUNC">?</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NAME">Q</span><span class="PUNC">[</span><span class="NAME">ah</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">az</span><span class="PUNC">[</span><span class="NAME">ah</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">L</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">ao</span><span class="PUNC">-</span><span class="NAME">E</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">*</span><span class="NAME">Q</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">H</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">*</span><span class="NAME">Q</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">K</span><span class="PUNC">=</span><span class="NAME">p</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">ax</span><span class="PUNC">-</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">*</span><span class="NAME">Q</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">G</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">*</span><span class="NAME">Q</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">av</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">?</span><span class="NAME">H</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">*</span><span class="NAME">az</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">ao</span><span class="PUNC">-</span><span class="NAME">E</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">*</span><span class="NAME">az</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">au</span><span class="PUNC">=</span><span class="NAME">p</span><span class="PUNC">?</span><span class="NAME">G</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">*</span><span class="NAME">az</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="PUNC">(</span><span class="NAME">ax</span><span class="PUNC">-</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">*</span><span class="NAME">az</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">ac</span><span class="PUNC">=</span><span class="NAME">L</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">Q</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">*</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">ab</span><span class="PUNC">=</span><span class="NAME">K</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">Q</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">*</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">O</span><span class="PUNC">=</span><span class="NAME">av</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">az</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">*</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">M</span><span class="PUNC">=</span><span class="NAME">au</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">az</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">*</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">Y</span><span class="PUNC">=</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">L</span><span class="PUNC">-</span><span class="NAME">av</span><span class="PUNC">)</span><span class="PUNC">></span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">+</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">aa</span><span class="PUNC">=</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">K</span><span class="PUNC">-</span><span class="NAME">au</span><span class="PUNC">)</span><span class="PUNC">></span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">+</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">ak</span><span class="PUNC">=</span><span class="NAME">ac</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">O</span><span class="PUNC">-</span><span class="NAME">ac</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">ai</span><span class="PUNC">=</span><span class="NAME">ab</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">M</span><span class="PUNC">-</span><span class="NAME">ab</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">R</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">Q</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">*</span><span class="NAME">az</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">Q</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">*</span><span class="NAME">az</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">ae</span><span class="PUNC">=</span><span class="NAME">R</span><span class="PUNC">==</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">ag</span><span class="PUNC">=</span><span class="NAME">R</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">F</span><span class="PUNC">=</span><span class="NAME">R</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NAME">am</span><span class="PUNC">-</span><span class="PUNC">=</span><span class="NAME">H</span><span class="PUNC">;</span><span class="NAME">al</span><span class="PUNC">-</span><span class="PUNC">=</span><span class="NAME">G</span><span class="PUNC">;</span><span class="NAME">v</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="NAME">am</span><span class="PUNC">,</span><span class="NAME">al</span><span class="PUNC">,</span><span class="NAME">ao</span><span class="PUNC">,</span><span class="NAME">ax</span><span class="PUNC">,</span><span class="NAME">L</span><span class="PUNC">,</span><span class="NAME">K</span><span class="PUNC">,</span><span class="NAME">av</span><span class="PUNC">,</span><span class="NAME">au</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">ar</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">V</span><span class="PUNC">=</span><span class="NAME">Q</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">?</span><span class="STRN">"y"</span><span class="PUNC">:</span><span class="STRN">"x"</span><span class="PUNC">,</span><span class="NAME">P</span><span class="PUNC">=</span><span class="NAME">ae</span><span class="PUNC">?</span><span class="STRN">"opposite"</span><span class="PUNC">:</span><span class="NAME">F</span><span class="PUNC">?</span><span class="STRN">"orthogonal"</span><span class="PUNC">:</span><span class="STRN">"perpendicular"</span><span class="PUNC">,</span><span class="NAME">I</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.segment</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">L</span><span class="PUNC">,</span><span class="NAME">K</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">av</span><span class="PUNC">,</span><span class="NAME">au</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">aj</span><span class="PUNC">=</span><span class="NAME">Q</span><span class="PUNC">[</span><span class="NAME">V</span><span class="PUNC">==</span><span class="STRN">"x"</span><span class="PUNC">?</span><span class="NUMB">0</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">U</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NUMB">4</span><span class="PUNC">,</span><span class="NUMB">3</span><span class="PUNC">,</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">4</span><span class="PUNC">,</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">aj</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">I</span><span class="PUNC">=</span><span class="NAME">U</span><span class="PUNC">[</span><span class="NAME">V</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">I</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="NAME">k</span><span class="PUNC">(</span><span class="NAME">ac</span><span class="PUNC">,</span><span class="NAME">ab</span><span class="PUNC">,</span><span class="NAME">L</span><span class="PUNC">,</span><span class="NAME">K</span><span class="PUNC">,</span><span class="NAME">av</span><span class="PUNC">,</span><span class="NAME">au</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">W</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">aD</span><span class="PUNC">,</span><span class="NAME">aC</span><span class="PUNC">,</span><span class="NAME">aA</span><span class="PUNC">,</span><span class="NAME">aB</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">aD</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">aC</span><span class="PUNC">*</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">-</span><span class="NAME">aA</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">aB</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">J</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">oppositex</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">C.elementId</span><span class="PUNC">==</span><span class="NAME">T.elementId</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">aA</span><span class="PUNC">=</span><span class="NAME">ab</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">-</span><span class="NAME">ay.y</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">at.height</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="PUNC">[</span><span class="NAME">ac</span><span class="PUNC">,</span><span class="NAME">aA</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">O</span><span class="PUNC">,</span><span class="NAME">aA</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">Y</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">||</span><span class="NAME">I</span><span class="PUNC">==</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="PUNC">[</span><span class="NAME">ak</span><span class="PUNC">,</span><span class="NAME">K</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">ak</span><span class="PUNC">,</span><span class="NAME">au</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="PUNC">[</span><span class="NAME">ac</span><span class="PUNC">,</span><span class="NAME">ai</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">O</span><span class="PUNC">,</span><span class="NAME">ai</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">orthogonalx</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">||</span><span class="NAME">I</span><span class="PUNC">==</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="PUNC">[</span><span class="NAME">O</span><span class="PUNC">,</span><span class="NAME">ab</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="PUNC">[</span><span class="NAME">ac</span><span class="PUNC">,</span><span class="NAME">M</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">perpendicularx</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">aA</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">au</span><span class="PUNC">+</span><span class="NAME">K</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">&&</span><span class="NAME">az</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">==</span><span class="NUMB">2</span><span class="PUNC">&&</span><span class="NAME">az</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">av</span><span class="PUNC">-</span><span class="NAME">L</span><span class="PUNC">)</span><span class="PUNC">></span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="PUNC">[</span><span class="NAME">O</span><span class="PUNC">,</span><span class="NAME">ab</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="PUNC">[</span><span class="NAME">ac</span><span class="PUNC">,</span><span class="NAME">ab</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">ac</span><span class="PUNC">,</span><span class="NAME">aA</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">O</span><span class="PUNC">,</span><span class="NAME">aA</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">==</span><span class="NUMB">3</span><span class="PUNC">&&</span><span class="NAME">az</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">==</span><span class="NUMB">4</span><span class="PUNC">&&</span><span class="NAME">az</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="PUNC">[</span><span class="NAME">ac</span><span class="PUNC">,</span><span class="NAME">aA</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">O</span><span class="PUNC">,</span><span class="NAME">aA</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">==</span><span class="NUMB">3</span><span class="PUNC">&&</span><span class="NAME">az</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">==</span><span class="NUMB">4</span><span class="PUNC">&&</span><span class="NAME">az</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="PUNC">[</span><span class="NAME">ac</span><span class="PUNC">,</span><span class="NAME">M</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">&&</span><span class="NAME">az</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">==</span><span class="NUMB">2</span><span class="PUNC">&&</span><span class="NAME">az</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">av</span><span class="PUNC">-</span><span class="NAME">L</span><span class="PUNC">)</span><span class="PUNC">></span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="PUNC">[</span><span class="NAME">ak</span><span class="PUNC">,</span><span class="NAME">ab</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">ak</span><span class="PUNC">,</span><span class="NAME">M</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="PUNC">[</span><span class="NAME">ac</span><span class="PUNC">,</span><span class="NAME">M</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">oppositey</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">C.elementId</span><span class="PUNC">==</span><span class="NAME">T.elementId</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">aA</span><span class="PUNC">=</span><span class="NAME">ac</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">-</span><span class="NAME">ay.x</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">at.width</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="PUNC">[</span><span class="NAME">aA</span><span class="PUNC">,</span><span class="NAME">ab</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">aA</span><span class="PUNC">,</span><span class="NAME">M</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">aa</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">==</span><span class="NUMB">2</span><span class="PUNC">||</span><span class="NAME">I</span><span class="PUNC">==</span><span class="NUMB">3</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="PUNC">[</span><span class="NAME">L</span><span class="PUNC">,</span><span class="NAME">ai</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">av</span><span class="PUNC">,</span><span class="NAME">ai</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="PUNC">[</span><span class="NAME">ak</span><span class="PUNC">,</span><span class="NAME">ab</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">ak</span><span class="PUNC">,</span><span class="NAME">M</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">orthogonaly</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">==</span><span class="NUMB">2</span><span class="PUNC">||</span><span class="NAME">I</span><span class="PUNC">==</span><span class="NUMB">3</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="PUNC">[</span><span class="NAME">ac</span><span class="PUNC">,</span><span class="NAME">M</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="PUNC">[</span><span class="NAME">O</span><span class="PUNC">,</span><span class="NAME">ab</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">perpendiculary</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">aA</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">av</span><span class="PUNC">+</span><span class="NAME">L</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">==</span><span class="NUMB">2</span><span class="PUNC">&&</span><span class="NAME">az</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">==</span><span class="NUMB">3</span><span class="PUNC">&&</span><span class="NAME">az</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">av</span><span class="PUNC">-</span><span class="NAME">L</span><span class="PUNC">)</span><span class="PUNC">></span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="PUNC">[</span><span class="NAME">ac</span><span class="PUNC">,</span><span class="NAME">M</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="PUNC">[</span><span class="NAME">ac</span><span class="PUNC">,</span><span class="NAME">ai</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">O</span><span class="PUNC">,</span><span class="NAME">ai</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">&&</span><span class="NAME">az</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">==</span><span class="NUMB">4</span><span class="PUNC">&&</span><span class="NAME">az</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">aA</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">av</span><span class="PUNC">+</span><span class="NAME">L</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="PUNC">[</span><span class="NAME">aA</span><span class="PUNC">,</span><span class="NAME">ab</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">aA</span><span class="PUNC">,</span><span class="NAME">M</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">&&</span><span class="NAME">az</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">==</span><span class="NUMB">4</span><span class="PUNC">&&</span><span class="NAME">az</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="PUNC">[</span><span class="NAME">O</span><span class="PUNC">,</span><span class="NAME">ab</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">==</span><span class="NUMB">2</span><span class="PUNC">&&</span><span class="NAME">az</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">==</span><span class="NUMB">3</span><span class="PUNC">&&</span><span class="NAME">az</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">au</span><span class="PUNC">-</span><span class="NAME">K</span><span class="PUNC">)</span><span class="PUNC">></span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="PUNC">[</span><span class="NAME">ac</span><span class="PUNC">,</span><span class="NAME">ai</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">O</span><span class="PUNC">,</span><span class="NAME">ai</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="PUNC">[</span><span class="NAME">O</span><span class="PUNC">,</span><span class="NAME">ab</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">aq</span><span class="PUNC">=</span><span class="NAME">J</span><span class="PUNC">[</span><span class="NAME">P</span><span class="PUNC">+</span><span class="NAME">V</span><span class="PUNC">]</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">aq</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">aw</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">aw</span><span class="PUNC">&lt;</span><span class="NAME">aq.length</span><span class="PUNC">;</span><span class="NAME">aw</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">k</span><span class="PUNC">(</span><span class="NAME">aq</span><span class="PUNC">[</span><span class="NAME">aw</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">aq</span><span class="PUNC">[</span><span class="NAME">aw</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">L</span><span class="PUNC">,</span><span class="NAME">K</span><span class="PUNC">,</span><span class="NAME">av</span><span class="PUNC">,</span><span class="NAME">au</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="NAME">k</span><span class="PUNC">(</span><span class="NAME">O</span><span class="PUNC">,</span><span class="NAME">M</span><span class="PUNC">,</span><span class="NAME">L</span><span class="PUNC">,</span><span class="NAME">K</span><span class="PUNC">,</span><span class="NAME">av</span><span class="PUNC">,</span><span class="NAME">au</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">k</span><span class="PUNC">(</span><span class="NAME">av</span><span class="PUNC">,</span><span class="NAME">au</span><span class="PUNC">,</span><span class="NAME">L</span><span class="PUNC">,</span><span class="NAME">K</span><span class="PUNC">,</span><span class="NAME">av</span><span class="PUNC">,</span><span class="NAME">au</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">l</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">B</span><span class="PUNC">(</span><span class="NAME">L</span><span class="PUNC">,</span><span class="NAME">K</span><span class="PUNC">,</span><span class="NAME">av</span><span class="PUNC">,</span><span class="NAME">au</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">w</span><span class="PUNC">></span><span class="NAME">v</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">v</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">w</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">X</span><span class="PUNC">*</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">y</span><span class="PUNC">></span><span class="NAME">v</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">v</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">y</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">X</span><span class="PUNC">*</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">v</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.pointOnPath</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">r.pointAlongPathFrom</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.gradientAtPoint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">u</span><span class="PUNC">[</span><span class="NAME">h</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="STRN">"index"</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.pointAlongPathFrom</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">J</span><span class="PUNC">,</span><span class="NAME">C</span><span class="PUNC">,</span><span class="NAME">I</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">K</span><span class="PUNC">=</span><span class="NAME">h</span><span class="PUNC">(</span><span class="NAME">J</span><span class="PUNC">,</span><span class="NAME">I</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">G</span><span class="PUNC">=</span><span class="NAME">K.segment</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">=</span><span class="NAME">K.proportion</span><span class="PUNC">,</span><span class="NAME">F</span><span class="PUNC">=</span><span class="NAME">u</span><span class="PUNC">[</span><span class="NAME">K.index</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">5</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">E</span><span class="PUNC">=</span><span class="NAME">u</span><span class="PUNC">[</span><span class="NAME">K.index</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">H</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">:</span><span class="NAME">E</span><span class="PUNC">==</span><span class="NAME">Infinity</span><span class="PUNC">?</span><span class="NAME">G</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="NAME">G</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">></span><span class="NAME">G</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">?</span><span class="NAME">G</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">-</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">F</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">C</span><span class="PUNC">:</span><span class="NAME">G</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">D</span><span class="PUNC">*</span><span class="NAME">F</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">C</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">:</span><span class="NAME">E</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">?</span><span class="NAME">G</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="NAME">G</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">></span><span class="NAME">G</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">?</span><span class="NAME">G</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">-</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">F</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">C</span><span class="PUNC">:</span><span class="NAME">G</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">D</span><span class="PUNC">*</span><span class="NAME">F</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">C</span><span class="PUNC">,</span><span class="NAME">segmentInfo</span><span class="PUNC">:</span><span class="NAME">K</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">H</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Endpoints.Dot</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.type</span><span class="PUNC">=</span><span class="STRN">"Dot"</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">d</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.radius</span><span class="PUNC">=</span><span class="NAME">e.radius</span><span class="PUNC">||</span><span class="NUMB">10</span><span class="PUNC">;</span><span class="NAME">this.defaultOffset</span><span class="PUNC">=</span><span class="NUMB">0.5</span><span class="PUNC">*</span><span class="NAME">this.radius</span><span class="PUNC">;</span><span class="NAME">this.defaultInnerRadius</span><span class="PUNC">=</span><span class="NAME">this.radius</span><span class="PUNC">/</span><span class="NUMB">3</span><span class="PUNC">;</span><span class="NAME">this.compute</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">k</span><span class="PUNC">,</span><span class="NAME">g</span><span class="PUNC">,</span><span class="NAME">m</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">m.radius</span><span class="PUNC">||</span><span class="NAME">d.radius</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">=</span><span class="NAME">k</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">h</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">k</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">h</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="NAME">f</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">*</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">*</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Endpoints.Rectangle</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.type</span><span class="PUNC">=</span><span class="STRN">"Rectangle"</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">d</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.width</span><span class="PUNC">=</span><span class="NAME">e.width</span><span class="PUNC">||</span><span class="NUMB">20</span><span class="PUNC">;</span><span class="NAME">this.height</span><span class="PUNC">=</span><span class="NAME">e.height</span><span class="PUNC">||</span><span class="NUMB">20</span><span class="PUNC">;</span><span class="NAME">this.compute</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">k</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">n.width</span><span class="PUNC">||</span><span class="NAME">d.width</span><span class="PUNC">,</span><span class="NAME">g</span><span class="PUNC">=</span><span class="NAME">n.height</span><span class="PUNC">||</span><span class="NAME">d.height</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">=</span><span class="NAME">l</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">m</span><span class="PUNC">=</span><span class="NAME">l</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">g</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="NAME">f</span><span class="PUNC">,</span><span class="NAME">m</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">g</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">f</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">jsPlumb.DOMElementComponent.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">d</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">this.getDisplayElements</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.appendDisplayElement</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">g</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">e.push</span><span class="PUNC">(</span><span class="NAME">g</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Endpoints.Image</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.type</span><span class="PUNC">=</span><span class="STRN">"Image"</span><span class="PUNC">;</span><span class="NAME">b.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="NAME">g</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">=</span><span class="NAME">i.width</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">i.height</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">=</span><span class="NAME">i.endpoint</span><span class="PUNC">;</span><span class="NAME">this.img</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Image</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n.ready</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="NAME">this.img.onload</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">n.ready</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="NAME">f</span><span class="PUNC">=</span><span class="NAME">f</span><span class="PUNC">||</span><span class="NAME">n.img.width</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">||</span><span class="NAME">n.img.height</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">l</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">d.setImage</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">p</span><span class="PUNC">=</span><span class="NAME">o.constructor</span><span class="PUNC">==</span><span class="NAME">String</span><span class="PUNC">?</span><span class="NAME">o</span><span class="PUNC">:</span><span class="NAME">o.src</span><span class="PUNC">;</span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">q</span><span class="PUNC">;</span><span class="NAME">n.img.src</span><span class="PUNC">=</span><span class="NAME">o</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">n.canvas</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">n.canvas.setAttribute</span><span class="PUNC">(</span><span class="STRN">"src"</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">d.setImage</span><span class="PUNC">(</span><span class="NAME">i.src</span><span class="PUNC">||</span><span class="NAME">i.url</span><span class="PUNC">,</span><span class="NAME">i.onload</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.compute</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">q</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">p</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">n.anchorPoint</span><span class="PUNC">=</span><span class="NAME">q</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">n.ready</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="NAME">q</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">f</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">e</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">n.canvas</span><span class="PUNC">=</span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"img"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="NAME">n.canvas.style.margin</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">n.canvas.style.padding</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">n.canvas.style.outline</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">n.canvas.style.position</span><span class="PUNC">=</span><span class="STRN">"absolute"</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">k</span><span class="PUNC">=</span><span class="NAME">i.cssClass</span><span class="PUNC">?</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="NAME">i.cssClass</span><span class="PUNC">:</span><span class="STRN">""</span><span class="PUNC">;</span><span class="NAME">n.canvas.className</span><span class="PUNC">=</span><span class="NAME">jsPlumb.endpointClass</span><span class="PUNC">+</span><span class="NAME">k</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">f</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">n.canvas.setAttribute</span><span class="PUNC">(</span><span class="STRN">"width"</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">n.canvas.setAttribute</span><span class="PUNC">(</span><span class="STRN">"height"</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">jsPlumb.appendElement</span><span class="PUNC">(</span><span class="NAME">n.canvas</span><span class="PUNC">,</span><span class="NAME">i.parent</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n.attachListeners</span><span class="PUNC">(</span><span class="NAME">n.canvas</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n.cleanup</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">g</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">m</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">,</span><span class="NAME">p</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">g</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">h</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">n.canvas.setAttribute</span><span class="PUNC">(</span><span class="STRN">"src"</span><span class="PUNC">,</span><span class="NAME">n.img.src</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n.appendDisplayElement</span><span class="PUNC">(</span><span class="NAME">n.canvas</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">h</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">n.anchorPoint</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">f</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">n.anchorPoint</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">jsPlumb.sizeCanvas</span><span class="PUNC">(</span><span class="NAME">n.canvas</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.paint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">q</span><span class="PUNC">,</span><span class="NAME">p</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">n.ready</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">m</span><span class="PUNC">(</span><span class="NAME">q</span><span class="PUNC">,</span><span class="NAME">p</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">window.setTimeout</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">n.paint</span><span class="PUNC">(</span><span class="NAME">q</span><span class="PUNC">,</span><span class="NAME">p</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NUMB">200</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Endpoints.Blank</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">d</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">;</span><span class="NAME">this.type</span><span class="PUNC">=</span><span class="STRN">"Blank"</span><span class="PUNC">;</span><span class="NAME">b.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.compute</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">g</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="NAME">h</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NUMB">10</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">d.canvas</span><span class="PUNC">=</span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">d.canvas.style.display</span><span class="PUNC">=</span><span class="STRN">"block"</span><span class="PUNC">;</span><span class="NAME">d.canvas.style.width</span><span class="PUNC">=</span><span class="STRN">"1px"</span><span class="PUNC">;</span><span class="NAME">d.canvas.style.height</span><span class="PUNC">=</span><span class="STRN">"1px"</span><span class="PUNC">;</span><span class="NAME">d.canvas.style.background</span><span class="PUNC">=</span><span class="STRN">"transparent"</span><span class="PUNC">;</span><span class="NAME">d.canvas.style.position</span><span class="PUNC">=</span><span class="STRN">"absolute"</span><span class="PUNC">;</span><span class="NAME">d.canvas.className</span><span class="PUNC">=</span><span class="NAME">d._jsPlumb.endpointClass</span><span class="PUNC">;</span><span class="NAME">jsPlumb.appendElement</span><span class="PUNC">(</span><span class="NAME">d.canvas</span><span class="PUNC">,</span><span class="NAME">e.parent</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.paint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">,</span><span class="NAME">g</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">jsPlumb.sizeCanvas</span><span class="PUNC">(</span><span class="NAME">d.canvas</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Endpoints.Triangle</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.type</span><span class="PUNC">=</span><span class="STRN">"Triangle"</span><span class="PUNC">;</span><span class="NAME">d</span><span class="PUNC">=</span><span class="NAME">d</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">d.width</span><span class="PUNC">=</span><span class="NAME">d.width</span><span class="PUNC">||</span><span class="NUMB">55</span><span class="PUNC">;</span><span class="NAME">d.height</span><span class="PUNC">=</span><span class="NAME">d.height</span><span class="PUNC">||</span><span class="NUMB">55</span><span class="PUNC">;</span><span class="NAME">this.width</span><span class="PUNC">=</span><span class="NAME">d.width</span><span class="PUNC">;</span><span class="NAME">this.height</span><span class="PUNC">=</span><span class="NAME">d.height</span><span class="PUNC">;</span><span class="NAME">this.compute</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">k</span><span class="PUNC">,</span><span class="NAME">g</span><span class="PUNC">,</span><span class="NAME">m</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">m.width</span><span class="PUNC">||</span><span class="NAME">self.width</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">=</span><span class="NAME">m.height</span><span class="PUNC">||</span><span class="NAME">self.height</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">k</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">k</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">f</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">c</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">f</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">;</span><span class="NAME">this.isAppendedAtTopLevel</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="NAME">this.component</span><span class="PUNC">=</span><span class="NAME">f.component</span><span class="PUNC">;</span><span class="NAME">this.loc</span><span class="PUNC">=</span><span class="NAME">f.location</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">?</span><span class="NUMB">0.5</span><span class="PUNC">:</span><span class="NAME">f.location</span><span class="PUNC">;</span><span class="NAME">this.endpointLoc</span><span class="PUNC">=</span><span class="NAME">f.endpointLocation</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">?</span><span class="PUNC">[</span><span class="NUMB">0.5</span><span class="PUNC">,</span><span class="NUMB">0.5</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="NAME">f.endpointLocation</span><span class="PUNC">;</span><span class="NAME">this.setVisible</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">g</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">g</span><span class="PUNC">;</span><span class="NAME">d.component.repaint</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.isVisible</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.hide</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">d.setVisible</span><span class="PUNC">(</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.show</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">d.setVisible</span><span class="PUNC">(</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.incrementLocation</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">g</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">d.loc</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="NAME">g</span><span class="PUNC">;</span><span class="NAME">d.component.repaint</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.setLocation</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">g</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">d.loc</span><span class="PUNC">=</span><span class="NAME">g</span><span class="PUNC">;</span><span class="NAME">d.component.repaint</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getLocation</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">d.loc</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Overlays.Arrow</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.type</span><span class="PUNC">=</span><span class="STRN">"Arrow"</span><span class="PUNC">;</span><span class="NAME">c.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.isAppendedAtTopLevel</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">h</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">;</span><span class="NAME">this.length</span><span class="PUNC">=</span><span class="NAME">h.length</span><span class="PUNC">||</span><span class="NUMB">20</span><span class="PUNC">;</span><span class="NAME">this.width</span><span class="PUNC">=</span><span class="NAME">h.width</span><span class="PUNC">||</span><span class="NUMB">20</span><span class="PUNC">;</span><span class="NAME">this.id</span><span class="PUNC">=</span><span class="NAME">h.id</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">g</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">h.direction</span><span class="PUNC">||</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">&lt;</span><span class="NUMB">0</span><span class="PUNC">?</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">=</span><span class="NAME">h.paintStyle</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="NAME">lineWidth</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">=</span><span class="NAME">h.foldback</span><span class="PUNC">||</span><span class="NUMB">0.623</span><span class="PUNC">;</span><span class="NAME">this.computeMaxSize</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">e.width</span><span class="PUNC">*</span><span class="NUMB">1.5</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.cleanup</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.draw</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">,</span><span class="NAME">A</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">p</span><span class="PUNC">,</span><span class="NAME">w</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">m.pointAlongPathFrom</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">jsPlumbUtil.isString</span><span class="PUNC">(</span><span class="NAME">e.loc</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NAME">e.loc</span><span class="PUNC">></span><span class="NUMB">1</span><span class="PUNC">||</span><span class="NAME">e.loc</span><span class="PUNC">&lt;</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">k</span><span class="PUNC">=</span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">e.loc</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">p</span><span class="PUNC">=</span><span class="NAME">m.pointAlongPathFrom</span><span class="PUNC">(</span><span class="NAME">k</span><span class="PUNC">,</span><span class="NAME">g</span><span class="PUNC">*</span><span class="NAME">e.length</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">w</span><span class="PUNC">=</span><span class="NAME">m.pointOnPath</span><span class="PUNC">(</span><span class="NAME">k</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.pointOnLine</span><span class="PUNC">(</span><span class="NAME">p</span><span class="PUNC">,</span><span class="NAME">w</span><span class="PUNC">,</span><span class="NAME">e.length</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e.loc</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">p</span><span class="PUNC">=</span><span class="NAME">m.pointOnPath</span><span class="PUNC">(</span><span class="NAME">e.loc</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">w</span><span class="PUNC">=</span><span class="NAME">m.pointAlongPathFrom</span><span class="PUNC">(</span><span class="NAME">e.loc</span><span class="PUNC">,</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.pointOnLine</span><span class="PUNC">(</span><span class="NAME">p</span><span class="PUNC">,</span><span class="NAME">w</span><span class="PUNC">,</span><span class="NAME">e.length</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e.loc</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">m.pointOnPath</span><span class="PUNC">(</span><span class="NAME">e.loc</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">w</span><span class="PUNC">=</span><span class="NAME">m.pointAlongPathFrom</span><span class="PUNC">(</span><span class="NAME">e.loc</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">p</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.pointOnLine</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">w</span><span class="PUNC">,</span><span class="NAME">e.length</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">p</span><span class="PUNC">=</span><span class="NAME">m.pointAlongPathFrom</span><span class="PUNC">(</span><span class="NAME">e.loc</span><span class="PUNC">,</span><span class="NAME">g</span><span class="PUNC">*</span><span class="NAME">e.length</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">w</span><span class="PUNC">=</span><span class="NAME">m.pointOnPath</span><span class="PUNC">(</span><span class="NAME">e.loc</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.pointOnLine</span><span class="PUNC">(</span><span class="NAME">p</span><span class="PUNC">,</span><span class="NAME">w</span><span class="PUNC">,</span><span class="NAME">e.length</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="NAME">q</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.perpendicularLineTo</span><span class="PUNC">(</span><span class="NAME">p</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">e.width</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.pointOnLine</span><span class="PUNC">(</span><span class="NAME">p</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">*</span><span class="NAME">e.length</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">z</span><span class="PUNC">=</span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">p.x</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">x</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">p.x</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">x</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">=</span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">p.y</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">y</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">y</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">p.y</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">y</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">y</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">hxy</span><span class="PUNC">:</span><span class="NAME">p</span><span class="PUNC">,</span><span class="NAME">tail</span><span class="PUNC">:</span><span class="NAME">q</span><span class="PUNC">,</span><span class="NAME">cxy</span><span class="PUNC">:</span><span class="NAME">o</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">f.strokeStyle</span><span class="PUNC">||</span><span class="NAME">A.strokeStyle</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">=</span><span class="NAME">f.fillStyle</span><span class="PUNC">||</span><span class="NAME">A.strokeStyle</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">f.lineWidth</span><span class="PUNC">||</span><span class="NAME">A.lineWidth</span><span class="PUNC">;</span><span class="NAME">e.paint</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="NAME">z</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Overlays.PlainArrow</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">d</span><span class="PUNC">=</span><span class="NAME">jsPlumb.extend</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">foldback</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Overlays.Arrow.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.type</span><span class="PUNC">=</span><span class="STRN">"PlainArrow"</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Overlays.Diamond</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">f</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">f</span><span class="PUNC">=</span><span class="NAME">f</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">d</span><span class="PUNC">=</span><span class="NAME">f.length</span><span class="PUNC">||</span><span class="NUMB">40</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">jsPlumb.extend</span><span class="PUNC">(</span><span class="NAME">f</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">length</span><span class="PUNC">:</span><span class="NAME">d</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="NAME">foldback</span><span class="PUNC">:</span><span class="NUMB">2</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Overlays.Arrow.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.type</span><span class="PUNC">=</span><span class="STRN">"Diamond"</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">a</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">jsPlumb.DOMElementComponent.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">c.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">d</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.id</span><span class="PUNC">=</span><span class="NAME">i.id</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">l</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">h</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">i.create</span><span class="PUNC">(</span><span class="NAME">i.component</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">jsPlumb.CurrentLibrary.getDOMElement</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">l.style.position</span><span class="PUNC">=</span><span class="STRN">"absolute"</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">m</span><span class="PUNC">=</span><span class="NAME">i._jsPlumb.overlayClass</span><span class="PUNC">+</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">d.cssClass</span><span class="PUNC">?</span><span class="NAME">d.cssClass</span><span class="PUNC">:</span><span class="NAME">i.cssClass</span><span class="PUNC">?</span><span class="NAME">i.cssClass</span><span class="PUNC">:</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">l.className</span><span class="PUNC">=</span><span class="NAME">m</span><span class="PUNC">;</span><span class="NAME">jsPlumb.appendElement</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">,</span><span class="NAME">i.component.parent</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">i._jsPlumb.getId</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">d.attachListeners</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">d.canvas</span><span class="PUNC">=</span><span class="NAME">l</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getElement</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">h</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">l</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getDimensions</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">jsPlumb.CurrentLibrary.getSize</span><span class="PUNC">(</span><span class="NAME">jsPlumb.CurrentLibrary.getElementObject</span><span class="PUNC">(</span><span class="NAME">d.getElement</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">f</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">k</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">f</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">f</span><span class="PUNC">=</span><span class="NAME">d.getDimensions</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">f</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.clearCachedDimensions</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">f</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.computeMaxSize</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">m</span><span class="PUNC">=</span><span class="NAME">k</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">m</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">g</span><span class="PUNC">=</span><span class="NAME">d.setVisible</span><span class="PUNC">;</span><span class="NAME">d.setVisible</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">g</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">l.style.display</span><span class="PUNC">=</span><span class="NAME">m</span><span class="PUNC">?</span><span class="STRN">"block"</span><span class="PUNC">:</span><span class="STRN">"none"</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.cleanup</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">jsPlumb.CurrentLibrary.removeElement</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.paint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">d.getElement</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">m.appendDisplayElement</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">d.attachListeners</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">,</span><span class="NAME">m</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">}</span><span class="NAME">l.style.left</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="NAME">o.minx</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">;</span><span class="NAME">l.style.top</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="NAME">o.miny</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.draw</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">,</span><span class="NAME">p</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">k</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">&&</span><span class="NAME">t.length</span><span class="PUNC">==</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">q</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">n.pointOnPath</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">d.loc</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">jsPlumbUtil.isString</span><span class="PUNC">(</span><span class="NAME">d.loc</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NAME">d.loc</span><span class="PUNC">&lt;</span><span class="NUMB">0</span><span class="PUNC">||</span><span class="NAME">d.loc</span><span class="PUNC">></span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">d.loc</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">s</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">}</span><span class="NAME">q</span><span class="PUNC">=</span><span class="NAME">n.pointOnPath</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">m</span><span class="PUNC">=</span><span class="NAME">d.loc.constructor</span><span class="PUNC">==</span><span class="NAME">Array</span><span class="PUNC">?</span><span class="NAME">d.loc</span><span class="PUNC">:</span><span class="NAME">d.endpointLoc</span><span class="PUNC">;</span><span class="NAME">q</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">:</span><span class="NAME">m</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">*</span><span class="NAME">p</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">:</span><span class="NAME">m</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">*</span><span class="NAME">p</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="NAME">minx</span><span class="PUNC">=</span><span class="NAME">q.x</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">miny</span><span class="PUNC">=</span><span class="NAME">q.y</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">d.paint</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">minx</span><span class="PUNC">:</span><span class="NAME">minx</span><span class="PUNC">,</span><span class="NAME">miny</span><span class="PUNC">:</span><span class="NAME">miny</span><span class="PUNC">,</span><span class="NAME">td</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">cxy</span><span class="PUNC">:</span><span class="NAME">q</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">p</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="NAME">minx</span><span class="PUNC">,</span><span class="NAME">minx</span><span class="PUNC">+</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">miny</span><span class="PUNC">,</span><span class="NAME">miny</span><span class="PUNC">+</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.reattachListeners</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">d.reattachListenersForElement</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">,</span><span class="NAME">m</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Overlays.Custom</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.type</span><span class="PUNC">=</span><span class="STRN">"Custom"</span><span class="PUNC">;</span><span class="NAME">a.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Overlays.Label</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">d</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">;</span><span class="NAME">this.labelStyle</span><span class="PUNC">=</span><span class="NAME">h.labelStyle</span><span class="PUNC">||</span><span class="NAME">jsPlumb.Defaults.LabelStyle</span><span class="PUNC">;</span><span class="NAME">this.cssClass</span><span class="PUNC">=</span><span class="NAME">this.labelStyle</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">?</span><span class="NAME">this.labelStyle.cssClass</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="NAME">h.create</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Overlays.Custom.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.type</span><span class="PUNC">=</span><span class="STRN">"Label"</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">f</span><span class="PUNC">=</span><span class="NAME">h.label</span><span class="PUNC">||</span><span class="STRN">""</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">g</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="NAME">this.setLabel</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">k</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">f</span><span class="PUNC">=</span><span class="NAME">k</span><span class="PUNC">;</span><span class="NAME">g</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="NAME">d.clearCachedDimensions</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">d.component.repaint</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">f</span><span class="PUNC">==</span><span class="STRN">"function"</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">k</span><span class="PUNC">=</span><span class="NAME">f</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">d.getElement</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">innerHTML</span><span class="PUNC">=</span><span class="NAME">k.replace</span><span class="PUNC">(</span><span class="REGX">/\r\n/g</span><span class="PUNC">,</span><span class="STRN">"&lt;br/>"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">g</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">g</span><span class="PUNC">=</span><span class="NAME">f</span><span class="PUNC">;</span><span class="NAME">d.getElement</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">innerHTML</span><span class="PUNC">=</span><span class="NAME">g.replace</span><span class="PUNC">(</span><span class="REGX">/\r\n/g</span><span class="PUNC">,</span><span class="STRN">"&lt;br/>"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.getLabel</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">f</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">this.getDimensions</span><span class="PUNC">;</span><span class="NAME">this.getDimensions</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">e</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">c</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">g</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.m</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">f</span><span class="PUNC">-</span><span class="NAME">g</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">-</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.b</span><span class="PUNC">=</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">*</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">this.m</span><span class="PUNC">*</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">g</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.rectIntersect</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">q</span><span class="PUNC">,</span><span class="NAME">p</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">k</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">p</span><span class="PUNC">-</span><span class="NAME">this.b</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">this.m</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">k</span><span class="PUNC">>=</span><span class="NAME">q</span><span class="PUNC">&&</span><span class="NAME">k</span><span class="PUNC">&lt;=</span><span class="PUNC">(</span><span class="NAME">q</span><span class="PUNC">+</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">n.push</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">k</span><span class="PUNC">,</span><span class="PUNC">(</span><span class="NAME">this.m</span><span class="PUNC">*</span><span class="NAME">k</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">this.b</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">this.m</span><span class="PUNC">*</span><span class="PUNC">(</span><span class="NAME">q</span><span class="PUNC">+</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">this.b</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">>=</span><span class="NAME">p</span><span class="PUNC">&&</span><span class="NAME">t</span><span class="PUNC">&lt;=</span><span class="PUNC">(</span><span class="NAME">p</span><span class="PUNC">+</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">n.push</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">-</span><span class="NAME">this.b</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">this.m</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">k</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">p</span><span class="PUNC">+</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">this.b</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">this.m</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">k</span><span class="PUNC">>=</span><span class="NAME">q</span><span class="PUNC">&&</span><span class="NAME">k</span><span class="PUNC">&lt;=</span><span class="PUNC">(</span><span class="NAME">q</span><span class="PUNC">+</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">n.push</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">k</span><span class="PUNC">,</span><span class="PUNC">(</span><span class="NAME">this.m</span><span class="PUNC">*</span><span class="NAME">k</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">this.b</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">this.m</span><span class="PUNC">*</span><span class="NAME">q</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">this.b</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">>=</span><span class="NAME">p</span><span class="PUNC">&&</span><span class="NAME">t</span><span class="PUNC">&lt;=</span><span class="PUNC">(</span><span class="NAME">p</span><span class="PUNC">+</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">n.push</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">-</span><span class="NAME">this.b</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">this.m</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">n.length</span><span class="PUNC">==</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">m</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="NAME">n</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="NAME">n</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">;</span><span class="NAME">n.push</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">m</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">m</span><span class="PUNC">&lt;=</span><span class="NAME">q</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">l</span><span class="PUNC">&lt;=</span><span class="NAME">p</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NAME">n.push</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">g</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">&lt;=</span><span class="NAME">d</span><span class="PUNC">&&</span><span class="NAME">f</span><span class="PUNC">&lt;=</span><span class="NAME">g</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">&lt;=</span><span class="NAME">d</span><span class="PUNC">&&</span><span class="NAME">g</span><span class="PUNC">&lt;=</span><span class="NAME">f</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">&lt;=</span><span class="NAME">e</span><span class="PUNC">&&</span><span class="NAME">f</span><span class="PUNC">>=</span><span class="NAME">g</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NUMB">3</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NUMB">4</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">b</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">g</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">,</span><span class="NAME">m</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">,</span><span class="NAME">k</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">&lt;=</span><span class="NAME">k</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="NAME">g</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">&lt;=</span><span class="NUMB">0</span><span class="PUNC">&&</span><span class="NAME">h</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">>=</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="NAME">g</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">&lt;</span><span class="NUMB">0.5</span><span class="PUNC">?</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">*</span><span class="NAME">m</span><span class="PUNC">:</span><span class="NAME">m</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">>=</span><span class="NUMB">1</span><span class="PUNC">&&</span><span class="NAME">h</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">&lt;=</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="NAME">g</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">&lt;</span><span class="NUMB">0.5</span><span class="PUNC">?</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">*</span><span class="NAME">l</span><span class="PUNC">:</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="NAME">g</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">*</span><span class="NAME">m</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">*</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">==</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">>=</span><span class="NUMB">1</span><span class="PUNC">&&</span><span class="NAME">h</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">&lt;=</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="NAME">g</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">&lt;</span><span class="NUMB">0.5</span><span class="PUNC">?</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">*</span><span class="NAME">m</span><span class="PUNC">:</span><span class="NAME">m</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">>=</span><span class="NUMB">1</span><span class="PUNC">&&</span><span class="NAME">h</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">&lt;=</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="NAME">g</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">&lt;</span><span class="NUMB">0.5</span><span class="PUNC">?</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">*</span><span class="NAME">l</span><span class="PUNC">:</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="NAME">g</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">*</span><span class="NAME">m</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">*</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">==</span><span class="NUMB">3</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">>=</span><span class="NUMB">1</span><span class="PUNC">&&</span><span class="NAME">h</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">&lt;=</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="NAME">g</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">&lt;</span><span class="NUMB">0.5</span><span class="PUNC">?</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">*</span><span class="NAME">m</span><span class="PUNC">:</span><span class="NAME">m</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">&lt;=</span><span class="NUMB">0</span><span class="PUNC">&&</span><span class="NAME">h</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">>=</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="NAME">g</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">&lt;</span><span class="NUMB">0.5</span><span class="PUNC">?</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">*</span><span class="NAME">l</span><span class="PUNC">:</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="NAME">g</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">*</span><span class="NAME">m</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">*</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">==</span><span class="NUMB">4</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">&lt;=</span><span class="NUMB">0</span><span class="PUNC">&&</span><span class="NAME">h</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">>=</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="NAME">g</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">&lt;</span><span class="NUMB">0.5</span><span class="PUNC">?</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">*</span><span class="NAME">m</span><span class="PUNC">:</span><span class="NAME">m</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">&lt;=</span><span class="NUMB">0</span><span class="PUNC">&&</span><span class="NAME">h</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">>=</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="NAME">g</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">&lt;</span><span class="NUMB">0.5</span><span class="PUNC">?</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">*</span><span class="NAME">l</span><span class="PUNC">:</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="NAME">g</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">*</span><span class="NAME">m</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">*</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Connectors.StateMachine</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">u</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">,</span><span class="NAME">m</span><span class="PUNC">,</span><span class="NAME">g</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">p</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">=</span><span class="NAME">l.curviness</span><span class="PUNC">||</span><span class="NUMB">10</span><span class="PUNC">,</span><span class="NAME">k</span><span class="PUNC">=</span><span class="NAME">l.margin</span><span class="PUNC">||</span><span class="NUMB">5</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">=</span><span class="NAME">l.proximityLimit</span><span class="PUNC">||</span><span class="NUMB">80</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">=</span><span class="NAME">l.orientation</span><span class="PUNC">&&</span><span class="NAME">l.orientation</span><span class="PUNC">==</span><span class="STRN">"clockwise"</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">l.loopbackRadius</span><span class="PUNC">||</span><span class="NUMB">25</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">l.showLoopback</span><span class="PUNC">!==</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="NAME">this.type</span><span class="PUNC">=</span><span class="STRN">"StateMachine"</span><span class="PUNC">;</span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">l</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.compute</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">ad</span><span class="PUNC">,</span><span class="NAME">H</span><span class="PUNC">,</span><span class="NAME">W</span><span class="PUNC">,</span><span class="NAME">I</span><span class="PUNC">,</span><span class="NAME">ac</span><span class="PUNC">,</span><span class="NAME">z</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">,</span><span class="NAME">U</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">Q</span><span class="PUNC">=</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">ad</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">H</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">Y</span><span class="PUNC">=</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">ad</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">H</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">S</span><span class="PUNC">=</span><span class="NUMB">0.45</span><span class="PUNC">*</span><span class="NAME">Q</span><span class="PUNC">,</span><span class="NAME">ab</span><span class="PUNC">=</span><span class="NUMB">0.45</span><span class="PUNC">*</span><span class="NAME">Y</span><span class="PUNC">;</span><span class="NAME">Q</span><span class="PUNC">*</span><span class="PUNC">=</span><span class="NUMB">1.9</span><span class="PUNC">;</span><span class="NAME">Y</span><span class="PUNC">*</span><span class="PUNC">=</span><span class="NUMB">1.9</span><span class="PUNC">;</span><span class="NAME">v</span><span class="PUNC">=</span><span class="NAME">v</span><span class="PUNC">||</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">O</span><span class="PUNC">=</span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">ad</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">H</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">S</span><span class="PUNC">,</span><span class="NAME">M</span><span class="PUNC">=</span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">ad</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">H</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">ab</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">t</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">W.elementId</span><span class="PUNC">!=</span><span class="NAME">I.elementId</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">h</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">ad</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">&lt;</span><span class="NAME">H</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">?</span><span class="NAME">S</span><span class="PUNC">:</span><span class="NAME">Q</span><span class="PUNC">-</span><span class="NAME">S</span><span class="PUNC">;</span><span class="NAME">m</span><span class="PUNC">=</span><span class="NAME">ad</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">&lt;</span><span class="NAME">H</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">?</span><span class="NAME">ab</span><span class="PUNC">:</span><span class="NAME">Y</span><span class="PUNC">-</span><span class="NAME">ab</span><span class="PUNC">;</span><span class="NAME">g</span><span class="PUNC">=</span><span class="NAME">ad</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">&lt;</span><span class="NAME">H</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">?</span><span class="NAME">Q</span><span class="PUNC">-</span><span class="NAME">S</span><span class="PUNC">:</span><span class="NAME">S</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">ad</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">&lt;</span><span class="NAME">H</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">?</span><span class="NAME">Y</span><span class="PUNC">-</span><span class="NAME">ab</span><span class="PUNC">:</span><span class="NAME">ab</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">ad</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o</span><span class="PUNC">-</span><span class="PUNC">=</span><span class="NAME">k</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">ad</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="NAME">k</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">ad</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">m</span><span class="PUNC">-</span><span class="PUNC">=</span><span class="NAME">k</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">ad</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">m</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="NAME">k</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">H</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">g</span><span class="PUNC">-</span><span class="PUNC">=</span><span class="NAME">k</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">H</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">g</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="NAME">k</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">H</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">e</span><span class="PUNC">-</span><span class="PUNC">=</span><span class="NAME">k</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">H</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">e</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="NAME">k</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">N</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">+</span><span class="NAME">g</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="NAME">L</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="NAME">A</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">*</span><span class="NAME">N</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">L</span><span class="PUNC">,</span><span class="NAME">V</span><span class="PUNC">=</span><span class="NAME">Math.atan</span><span class="PUNC">(</span><span class="NAME">A</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">P</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">A</span><span class="PUNC">==</span><span class="NAME">Infinity</span><span class="PUNC">||</span><span class="NAME">A</span><span class="PUNC">==</span><span class="PUNC">-</span><span class="NAME">Infinity</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NUMB">0</span><span class="PUNC">:</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">Math.sin</span><span class="PUNC">(</span><span class="NAME">V</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">R</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">A</span><span class="PUNC">==</span><span class="NAME">Infinity</span><span class="PUNC">||</span><span class="NAME">A</span><span class="PUNC">==</span><span class="PUNC">-</span><span class="NAME">Infinity</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="NUMB">0</span><span class="PUNC">:</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">d</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">Math.cos</span><span class="PUNC">(</span><span class="NAME">V</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">B</span><span class="PUNC">=</span><span class="NAME">a</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">,</span><span class="NAME">m</span><span class="PUNC">,</span><span class="NAME">g</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">J</span><span class="PUNC">=</span><span class="NAME">Math.sqrt</span><span class="PUNC">(</span><span class="NAME">Math.pow</span><span class="PUNC">(</span><span class="NAME">g</span><span class="PUNC">-</span><span class="NAME">o</span><span class="PUNC">,</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">Math.pow</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">-</span><span class="NAME">m</span><span class="PUNC">,</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">p</span><span class="PUNC">=</span><span class="NAME">b</span><span class="PUNC">(</span><span class="NAME">N</span><span class="PUNC">,</span><span class="NAME">L</span><span class="PUNC">,</span><span class="NAME">B</span><span class="PUNC">,</span><span class="NAME">ad</span><span class="PUNC">,</span><span class="NAME">H</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">,</span><span class="NAME">J</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">G</span><span class="PUNC">=</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">p</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NUMB">3</span><span class="PUNC">,</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">p</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">g</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NUMB">3</span><span class="PUNC">,</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">g</span><span class="PUNC">-</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">v</span><span class="PUNC">,</span><span class="NAME">U</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">K</span><span class="PUNC">=</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">p</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">m</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NUMB">3</span><span class="PUNC">,</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">p</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NUMB">3</span><span class="PUNC">,</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">-</span><span class="NAME">m</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">v</span><span class="PUNC">,</span><span class="NAME">U</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">Q</span><span class="PUNC">&lt;</span><span class="NAME">G</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">T</span><span class="PUNC">=</span><span class="NAME">G</span><span class="PUNC">-</span><span class="NAME">Q</span><span class="PUNC">;</span><span class="NAME">O</span><span class="PUNC">-</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">T</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">o</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">T</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">g</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">T</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">Q</span><span class="PUNC">=</span><span class="NAME">G</span><span class="PUNC">;</span><span class="NAME">p</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">T</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">Y</span><span class="PUNC">&lt;</span><span class="NAME">K</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">aa</span><span class="PUNC">=</span><span class="NAME">K</span><span class="PUNC">-</span><span class="NAME">Y</span><span class="PUNC">;</span><span class="NAME">M</span><span class="PUNC">-</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">aa</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">m</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">aa</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">aa</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">Y</span><span class="PUNC">=</span><span class="NAME">K</span><span class="PUNC">;</span><span class="NAME">p</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">aa</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">n</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="NAME">O</span><span class="PUNC">,</span><span class="NAME">M</span><span class="PUNC">,</span><span class="NAME">Q</span><span class="PUNC">,</span><span class="NAME">Y</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">,</span><span class="NAME">m</span><span class="PUNC">,</span><span class="NAME">g</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">,</span><span class="NAME">p</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">p</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">h</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">Z</span><span class="PUNC">=</span><span class="NAME">ad</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">X</span><span class="PUNC">=</span><span class="NAME">ad</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">F</span><span class="PUNC">=</span><span class="NAME">ad</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">k</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">=</span><span class="NAME">ad</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">k</span><span class="PUNC">,</span><span class="NAME">E</span><span class="PUNC">=</span><span class="NAME">Z</span><span class="PUNC">,</span><span class="NAME">C</span><span class="PUNC">=</span><span class="NAME">F</span><span class="PUNC">-</span><span class="NAME">i</span><span class="PUNC">;</span><span class="NAME">Q</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NUMB">4</span><span class="PUNC">*</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">Y</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NUMB">4</span><span class="PUNC">*</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">O</span><span class="PUNC">=</span><span class="NAME">E</span><span class="PUNC">-</span><span class="NAME">i</span><span class="PUNC">-</span><span class="NAME">v</span><span class="PUNC">-</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">M</span><span class="PUNC">=</span><span class="NAME">C</span><span class="PUNC">-</span><span class="NAME">i</span><span class="PUNC">-</span><span class="NAME">v</span><span class="PUNC">-</span><span class="NAME">i</span><span class="PUNC">;</span><span class="NAME">n</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="NAME">O</span><span class="PUNC">,</span><span class="NAME">M</span><span class="PUNC">,</span><span class="NAME">Q</span><span class="PUNC">,</span><span class="NAME">Y</span><span class="PUNC">,</span><span class="NAME">E</span><span class="PUNC">-</span><span class="NAME">O</span><span class="PUNC">,</span><span class="NAME">C</span><span class="PUNC">-</span><span class="NAME">M</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">,</span><span class="NAME">Z</span><span class="PUNC">-</span><span class="NAME">O</span><span class="PUNC">,</span><span class="NAME">F</span><span class="PUNC">-</span><span class="NAME">M</span><span class="PUNC">,</span><span class="NAME">X</span><span class="PUNC">-</span><span class="NAME">O</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">-</span><span class="NAME">M</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">:</span><span class="NAME">g</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">:</span><span class="NAME">e</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">:</span><span class="NAME">p</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">:</span><span class="NAME">p</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">:</span><span class="NAME">p</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">:</span><span class="NAME">p</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="NUMB">1</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">:</span><span class="NAME">o</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">:</span><span class="NAME">m</span><span class="PUNC">}</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">w</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">v</span><span class="PUNC">=</span><span class="NAME">jsBezier.locationAlongCurveFrom</span><span class="PUNC">(</span><span class="NAME">w</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">?</span><span class="NUMB">0</span><span class="PUNC">:</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">v</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.pointOnPath</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">B</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">B</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">y</span><span class="PUNC">=</span><span class="NAME">Math.PI</span><span class="PUNC">*</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">i</span><span class="PUNC">;</span><span class="NAME">x</span><span class="PUNC">=</span><span class="NAME">x</span><span class="PUNC">/</span><span class="NAME">y</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">&&</span><span class="NAME">x</span><span class="PUNC">&lt;</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">-</span><span class="NAME">x</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">z</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">*</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">Math.PI</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">Math.PI</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">w</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">[</span><span class="NUMB">6</span><span class="PUNC">]</span><span class="PUNC">*</span><span class="NAME">Math.cos</span><span class="PUNC">(</span><span class="NAME">z</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">[</span><span class="NUMB">5</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">[</span><span class="NUMB">6</span><span class="PUNC">]</span><span class="PUNC">*</span><span class="NAME">Math.sin</span><span class="PUNC">(</span><span class="NAME">z</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">:</span><span class="NAME">w</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">:</span><span class="NAME">v</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">A</span><span class="PUNC">=</span><span class="NAME">r</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">x</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">(</span><span class="NAME">A</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">B</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">jsBezier.pointOnCurve</span><span class="PUNC">(</span><span class="NAME">A</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.gradientAtPoint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">y</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">w</span><span class="PUNC">=</span><span class="NAME">Math.PI</span><span class="PUNC">*</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">i</span><span class="PUNC">;</span><span class="NAME">v</span><span class="PUNC">=</span><span class="NAME">v</span><span class="PUNC">/</span><span class="NAME">w</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">Math.atan</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">*</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">Math.PI</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">x</span><span class="PUNC">=</span><span class="NAME">r</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">v</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">jsBezier.gradientAtPoint</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.pointAlongPathFrom</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">D</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">,</span><span class="NAME">C</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">B</span><span class="PUNC">=</span><span class="NAME">Math.PI</span><span class="PUNC">*</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">i</span><span class="PUNC">;</span><span class="NAME">D</span><span class="PUNC">=</span><span class="NAME">D</span><span class="PUNC">/</span><span class="NAME">B</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">D</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">&&</span><span class="NAME">D</span><span class="PUNC">&lt;</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">D</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">-</span><span class="NAME">D</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">B</span><span class="PUNC">=</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">Math.PI</span><span class="PUNC">*</span><span class="NAME">n</span><span class="PUNC">[</span><span class="NUMB">6</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">w</span><span class="PUNC">=</span><span class="NAME">v</span><span class="PUNC">/</span><span class="NAME">B</span><span class="PUNC">*</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">Math.PI</span><span class="PUNC">,</span><span class="NAME">z</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">D</span><span class="PUNC">*</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">Math.PI</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">w</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">Math.PI</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">[</span><span class="NUMB">6</span><span class="PUNC">]</span><span class="PUNC">*</span><span class="NAME">Math.cos</span><span class="PUNC">(</span><span class="NAME">z</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">[</span><span class="NUMB">5</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">[</span><span class="NUMB">6</span><span class="PUNC">]</span><span class="PUNC">*</span><span class="NAME">Math.sin</span><span class="PUNC">(</span><span class="NAME">z</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">:</span><span class="NAME">y</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">:</span><span class="NAME">x</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">A</span><span class="PUNC">=</span><span class="NAME">r</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">D</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">(</span><span class="NAME">A</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">,</span><span class="NAME">C</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">jsBezier.pointAlongCurveFrom</span><span class="PUNC">(</span><span class="NAME">A</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Connectors.canvas.StateMachine</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">f</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">f</span><span class="PUNC">=</span><span class="NAME">f</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">d</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">g</span><span class="PUNC">=</span><span class="NAME">f.drawGuideline</span><span class="PUNC">||</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">f.avoidSelector</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Connectors.StateMachine.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">jsPlumb.CanvasConnector.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._paint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">l.length</span><span class="PUNC">==</span><span class="NUMB">10</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">d.ctx.beginPath</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">d.ctx.moveTo</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">[</span><span class="NUMB">5</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">d.ctx.bezierCurveTo</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">[</span><span class="NUMB">8</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">[</span><span class="NUMB">9</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">[</span><span class="NUMB">8</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">[</span><span class="NUMB">9</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">[</span><span class="NUMB">6</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">[</span><span class="NUMB">7</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">d.ctx.stroke</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">d.ctx.save</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">d.ctx.beginPath</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">k</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">Math.PI</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">l</span><span class="PUNC">[</span><span class="NUMB">7</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">d.ctx.arc</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">[</span><span class="NUMB">5</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">[</span><span class="NUMB">6</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">d.ctx.stroke</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">d.ctx.closePath</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">d.ctx.restore</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.createGradient</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">h.createLinearGradient</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">[</span><span class="NUMB">5</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">[</span><span class="NUMB">6</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">[</span><span class="NUMB">7</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Connectors.svg.StateMachine</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">d</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Connectors.StateMachine.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">jsPlumb.SvgConnector.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.getPath</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">e.length</span><span class="PUNC">==</span><span class="NUMB">10</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="STRN">"M "</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">5</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="STRN">" C "</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">8</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">9</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">8</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">9</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">6</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">7</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="STRN">"M"</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">8</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="NUMB">4</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">9</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="STRN">" A "</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">6</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">6</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="STRN">" 0 1,0 "</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">8</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NUMB">4</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">[</span><span class="NUMB">9</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Connectors.vml.StateMachine</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">jsPlumb.Connectors.StateMachine.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">jsPlumb.VmlConnector.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">d</span><span class="PUNC">=</span><span class="NAME">jsPlumb.vml.convertValue</span><span class="PUNC">;</span><span class="NAME">this.getPath</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">k</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">k.length</span><span class="PUNC">==</span><span class="NUMB">10</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="STRN">"m"</span><span class="PUNC">+</span><span class="NAME">d</span><span class="PUNC">(</span><span class="NAME">k</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">d</span><span class="PUNC">(</span><span class="NAME">k</span><span class="PUNC">[</span><span class="NUMB">5</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">" c"</span><span class="PUNC">+</span><span class="NAME">d</span><span class="PUNC">(</span><span class="NAME">k</span><span class="PUNC">[</span><span class="NUMB">8</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">d</span><span class="PUNC">(</span><span class="NAME">k</span><span class="PUNC">[</span><span class="NUMB">9</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">d</span><span class="PUNC">(</span><span class="NAME">k</span><span class="PUNC">[</span><span class="NUMB">8</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">d</span><span class="PUNC">(</span><span class="NAME">k</span><span class="PUNC">[</span><span class="NUMB">9</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">d</span><span class="PUNC">(</span><span class="NAME">k</span><span class="PUNC">[</span><span class="NUMB">6</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">d</span><span class="PUNC">(</span><span class="NAME">k</span><span class="PUNC">[</span><span class="NUMB">7</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">" e"</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">d</span><span class="PUNC">(</span><span class="NAME">k</span><span class="PUNC">[</span><span class="NUMB">8</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">k</span><span class="PUNC">[</span><span class="NUMB">6</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">g</span><span class="PUNC">=</span><span class="NAME">d</span><span class="PUNC">(</span><span class="NAME">k</span><span class="PUNC">[</span><span class="NUMB">9</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="PUNC">(</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">k</span><span class="PUNC">[</span><span class="NUMB">6</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">=</span><span class="NAME">h</span><span class="PUNC">+</span><span class="NAME">d</span><span class="PUNC">(</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">k</span><span class="PUNC">[</span><span class="NUMB">6</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="NAME">g</span><span class="PUNC">+</span><span class="NAME">d</span><span class="PUNC">(</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">k</span><span class="PUNC">[</span><span class="NUMB">6</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">h</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">g</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">f</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">e</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="STRN">"ar "</span><span class="PUNC">+</span><span class="NAME">l</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">d</span><span class="PUNC">(</span><span class="NAME">k</span><span class="PUNC">[</span><span class="NUMB">8</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">d</span><span class="PUNC">(</span><span class="NAME">k</span><span class="PUNC">[</span><span class="NUMB">9</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">d</span><span class="PUNC">(</span><span class="NAME">k</span><span class="PUNC">[</span><span class="NUMB">8</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">d</span><span class="PUNC">(</span><span class="NAME">k</span><span class="PUNC">[</span><span class="NUMB">9</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">" e"</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">h</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="STRN">"stroke-linejoin"</span><span class="PUNC">:</span><span class="STRN">"joinstyle"</span><span class="PUNC">,</span><span class="NAME">joinstyle</span><span class="PUNC">:</span><span class="STRN">"joinstyle"</span><span class="PUNC">,</span><span class="NAME">endcap</span><span class="PUNC">:</span><span class="STRN">"endcap"</span><span class="PUNC">,</span><span class="NAME">miterlimit</span><span class="PUNC">:</span><span class="STRN">"miterlimit"</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">c</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">document.createStyleSheet</span><span class="PUNC">&&</span><span class="NAME">document.namespaces</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">m</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="STRN">".jsplumb_vml"</span><span class="PUNC">,</span><span class="STRN">"jsplumb\\:textbox"</span><span class="PUNC">,</span><span class="STRN">"jsplumb\\:oval"</span><span class="PUNC">,</span><span class="STRN">"jsplumb\\:rect"</span><span class="PUNC">,</span><span class="STRN">"jsplumb\\:stroke"</span><span class="PUNC">,</span><span class="STRN">"jsplumb\\:shape"</span><span class="PUNC">,</span><span class="STRN">"jsplumb\\:group"</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">g</span><span class="PUNC">=</span><span class="STRN">"behavior:url(#default#VML);position:absolute;"</span><span class="PUNC">;</span><span class="NAME">c</span><span class="PUNC">=</span><span class="NAME">document.createStyleSheet</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">&lt;</span><span class="NAME">m.length</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">c.addRule</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">g</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">document.namespaces.add</span><span class="PUNC">(</span><span class="STRN">"jsplumb"</span><span class="PUNC">,</span><span class="STRN">"urn:schemas-microsoft-com:vml"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">jsPlumb.vml</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NUMB">1000</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">w</span><span class="PUNC">=</span><span class="NAME">jsPlumb.getId</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">[</span><span class="NAME">w</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">v</span><span class="PUNC">=</span><span class="NAME">f</span><span class="PUNC">(</span><span class="STRN">"group"</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="STRN">"class"</span><span class="PUNC">:</span><span class="NAME">i</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">v.style.backgroundColor</span><span class="PUNC">=</span><span class="STRN">"red"</span><span class="PUNC">;</span><span class="NAME">s</span><span class="PUNC">[</span><span class="NAME">w</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">v</span><span class="PUNC">;</span><span class="NAME">jsPlumb.appendElement</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">v</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">,</span><span class="NAME">w</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">u</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">w</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">v</span><span class="PUNC">[</span><span class="NAME">u</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">w</span><span class="PUNC">[</span><span class="NAME">u</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">,</span><span class="NAME">z</span><span class="PUNC">,</span><span class="NAME">w</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">z</span><span class="PUNC">=</span><span class="NAME">z</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">x</span><span class="PUNC">=</span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"jsplumb:"</span><span class="PUNC">+</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">i.appendElement</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">w</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">jsPlumb.CurrentLibrary.appendElement</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">w</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">x.className</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">z</span><span class="PUNC">[</span><span class="STRN">"class"</span><span class="PUNC">]</span><span class="PUNC">?</span><span class="NAME">z</span><span class="PUNC">[</span><span class="STRN">"class"</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="STRN">" "</span><span class="PUNC">:</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">"jsplumb_vml"</span><span class="PUNC">;</span><span class="NAME">k</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">z</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">x</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">k</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">u.style.left</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">;</span><span class="NAME">u.style.top</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">;</span><span class="NAME">u.style.width</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">;</span><span class="NAME">u.style.height</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">;</span><span class="NAME">u.style.position</span><span class="PUNC">=</span><span class="STRN">"absolute"</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">u.style.zIndex</span><span class="PUNC">=</span><span class="NAME">v</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">p</span><span class="PUNC">=</span><span class="NAME">jsPlumb.vml.convertValue</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">Math.floor</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">*</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">b</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">w</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="STRN">"transparent"</span><span class="PUNC">===</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">i.setOpacity</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">,</span><span class="STRN">"0.0"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">i.setOpacity</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">,</span><span class="STRN">"1.0"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">y</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">,</span><span class="NAME">B</span><span class="PUNC">,</span><span class="NAME">C</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">x</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">u.strokeStyle</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">x.stroked</span><span class="PUNC">=</span><span class="STRN">"true"</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">D</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.convertStyle</span><span class="PUNC">(</span><span class="NAME">u.strokeStyle</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">x.strokecolor</span><span class="PUNC">=</span><span class="NAME">D</span><span class="PUNC">;</span><span class="NAME">b</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">,</span><span class="STRN">"stroke"</span><span class="PUNC">,</span><span class="NAME">B</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">x.strokeweight</span><span class="PUNC">=</span><span class="NAME">u.lineWidth</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">x.stroked</span><span class="PUNC">=</span><span class="STRN">"false"</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">u.fillStyle</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">x.filled</span><span class="PUNC">=</span><span class="STRN">"true"</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">v</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.convertStyle</span><span class="PUNC">(</span><span class="NAME">u.fillStyle</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">x.fillcolor</span><span class="PUNC">=</span><span class="NAME">v</span><span class="PUNC">;</span><span class="NAME">b</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">,</span><span class="STRN">"fill"</span><span class="PUNC">,</span><span class="NAME">B</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">x.filled</span><span class="PUNC">=</span><span class="STRN">"false"</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">u.dashstyle</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">B.strokeNode</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">B.strokeNode</span><span class="PUNC">=</span><span class="NAME">f</span><span class="PUNC">(</span><span class="STRN">"stroke"</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">dashstyle</span><span class="PUNC">:</span><span class="NAME">u.dashstyle</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">,</span><span class="NAME">C</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">B.strokeNode.dashstyle</span><span class="PUNC">=</span><span class="NAME">u.dashstyle</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">[</span><span class="STRN">"stroke-dasharray"</span><span class="PUNC">]</span><span class="PUNC">&&</span><span class="NAME">u.lineWidth</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">E</span><span class="PUNC">=</span><span class="NAME">u</span><span class="PUNC">[</span><span class="STRN">"stroke-dasharray"</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">indexOf</span><span class="PUNC">(</span><span class="STRN">","</span><span class="PUNC">)</span><span class="PUNC">==</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">?</span><span class="STRN">" "</span><span class="PUNC">:</span><span class="STRN">","</span><span class="PUNC">,</span><span class="NAME">z</span><span class="PUNC">=</span><span class="NAME">u</span><span class="PUNC">[</span><span class="STRN">"stroke-dasharray"</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">split</span><span class="PUNC">(</span><span class="NAME">E</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">w</span><span class="PUNC">=</span><span class="STRN">""</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">A</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">A</span><span class="PUNC">&lt;</span><span class="NAME">z.length</span><span class="PUNC">;</span><span class="NAME">A</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">w</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">Math.floor</span><span class="PUNC">(</span><span class="NAME">z</span><span class="PUNC">[</span><span class="NAME">A</span><span class="PUNC">]</span><span class="PUNC">/</span><span class="NAME">u.lineWidth</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">E</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">B.strokeNode</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">B.strokeNode</span><span class="PUNC">=</span><span class="NAME">f</span><span class="PUNC">(</span><span class="STRN">"stroke"</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">dashstyle</span><span class="PUNC">:</span><span class="NAME">w</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">,</span><span class="NAME">C</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">B.strokeNode.dashstyle</span><span class="PUNC">=</span><span class="NAME">w</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="NAME">e</span><span class="PUNC">(</span><span class="NAME">y</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">;</span><span class="NAME">jsPlumb.jsPlumbUIComponent.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.opacityNodes</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">stroke</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">fill</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.initOpacityNodes</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">i.opacityNodes.stroke</span><span class="PUNC">=</span><span class="NAME">f</span><span class="PUNC">(</span><span class="STRN">"stroke"</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">opacity</span><span class="PUNC">:</span><span class="STRN">"0.0"</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">,</span><span class="NAME">i._jsPlumb</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">i.opacityNodes.fill</span><span class="PUNC">=</span><span class="NAME">f</span><span class="PUNC">(</span><span class="STRN">"fill"</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">opacity</span><span class="PUNC">:</span><span class="STRN">"0.0"</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">,</span><span class="NAME">i._jsPlumb</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.setOpacity</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">w</span><span class="PUNC">=</span><span class="NAME">i.opacityNodes</span><span class="PUNC">[</span><span class="NAME">v</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">w</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">w.opacity</span><span class="PUNC">=</span><span class="STRN">""</span><span class="PUNC">+</span><span class="NAME">x</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">u</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">this.getDisplayElements</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">u</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.appendDisplayElement</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">w</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">i.canvas.parentNode.appendChild</span><span class="PUNC">(</span><span class="NAME">w</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">u.push</span><span class="PUNC">(</span><span class="NAME">w</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">=</span><span class="NAME">jsPlumb.VmlConnector</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">;</span><span class="NAME">i.strokeNode</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="NAME">i.canvas</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="NAME">n.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">i._jsPlumb.connectorClass</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">v.cssClass</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="NAME">v.cssClass</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.paint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">A</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">z</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">E</span><span class="PUNC">=</span><span class="NAME">i.getPath</span><span class="PUNC">(</span><span class="NAME">A</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">path</span><span class="PUNC">:</span><span class="NAME">E</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">x.outlineColor</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">C</span><span class="PUNC">=</span><span class="NAME">x.outlineWidth</span><span class="PUNC">||</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">=</span><span class="NAME">x.lineWidth</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">C</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">B</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">strokeStyle</span><span class="PUNC">:</span><span class="NAME">jsPlumbUtil.convertStyle</span><span class="PUNC">(</span><span class="NAME">x.outlineColor</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">lineWidth</span><span class="PUNC">:</span><span class="NAME">D</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">w</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">h</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">B</span><span class="PUNC">[</span><span class="NAME">w</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">x</span><span class="PUNC">[</span><span class="NAME">w</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">i.bgCanvas</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">y</span><span class="PUNC">[</span><span class="STRN">"class"</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">u</span><span class="PUNC">;</span><span class="NAME">y.coordsize</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">A</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">*</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">A</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">*</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">i.bgCanvas</span><span class="PUNC">=</span><span class="NAME">f</span><span class="PUNC">(</span><span class="STRN">"shape"</span><span class="PUNC">,</span><span class="NAME">A</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">,</span><span class="NAME">v.parent</span><span class="PUNC">,</span><span class="NAME">i._jsPlumb</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">k</span><span class="PUNC">(</span><span class="NAME">i.bgCanvas</span><span class="PUNC">,</span><span class="NAME">A</span><span class="PUNC">,</span><span class="NAME">i.getZIndex</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">i.appendDisplayElement</span><span class="PUNC">(</span><span class="NAME">i.bgCanvas</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">i.attachListeners</span><span class="PUNC">(</span><span class="NAME">i.bgCanvas</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">i.initOpacityNodes</span><span class="PUNC">(</span><span class="NAME">i.bgCanvas</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="STRN">"stroke"</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">y.coordsize</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">A</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">*</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">A</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">*</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">k</span><span class="PUNC">(</span><span class="NAME">i.bgCanvas</span><span class="PUNC">,</span><span class="NAME">A</span><span class="PUNC">,</span><span class="NAME">i.getZIndex</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">(</span><span class="NAME">i.bgCanvas</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">q</span><span class="PUNC">(</span><span class="NAME">i.bgCanvas</span><span class="PUNC">,</span><span class="NAME">B</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">i.canvas</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">y</span><span class="PUNC">[</span><span class="STRN">"class"</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">u</span><span class="PUNC">;</span><span class="NAME">y.coordsize</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">A</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">*</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">A</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">*</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">i.tooltip</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">y.label</span><span class="PUNC">=</span><span class="NAME">i.tooltip</span><span class="PUNC">}</span><span class="NAME">i.canvas</span><span class="PUNC">=</span><span class="NAME">f</span><span class="PUNC">(</span><span class="STRN">"shape"</span><span class="PUNC">,</span><span class="NAME">A</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">,</span><span class="NAME">v.parent</span><span class="PUNC">,</span><span class="NAME">i._jsPlumb</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">i.appendDisplayElement</span><span class="PUNC">(</span><span class="NAME">i.canvas</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">i.attachListeners</span><span class="PUNC">(</span><span class="NAME">i.canvas</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">i.initOpacityNodes</span><span class="PUNC">(</span><span class="NAME">i.canvas</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="STRN">"stroke"</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">y.coordsize</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">A</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">*</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">A</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">*</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">k</span><span class="PUNC">(</span><span class="NAME">i.canvas</span><span class="PUNC">,</span><span class="NAME">A</span><span class="PUNC">,</span><span class="NAME">i.getZIndex</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">(</span><span class="NAME">i.canvas</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">q</span><span class="PUNC">(</span><span class="NAME">i.canvas</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">i._jsPlumb</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.reattachListeners</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">i.canvas</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">i.reattachListenersForElement</span><span class="PUNC">(</span><span class="NAME">i.canvas</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">window.VmlEndpoint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">y</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">n.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="NAME">v.canvas</span><span class="PUNC">=</span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">v.canvas.style.position</span><span class="PUNC">=</span><span class="STRN">"absolute"</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">w</span><span class="PUNC">=</span><span class="NAME">v._jsPlumb.endpointClass</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">y.cssClass</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="NAME">y.cssClass</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">y._jsPlumb.appendElement</span><span class="PUNC">(</span><span class="NAME">v.canvas</span><span class="PUNC">,</span><span class="NAME">y.parent</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">v.tooltip</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">v.canvas.setAttribute</span><span class="PUNC">(</span><span class="STRN">"label"</span><span class="PUNC">,</span><span class="NAME">v.tooltip</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">this.paint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">,</span><span class="NAME">A</span><span class="PUNC">,</span><span class="NAME">z</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">B</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.sizeCanvas</span><span class="PUNC">(</span><span class="NAME">v.canvas</span><span class="PUNC">,</span><span class="NAME">C</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">C</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">C</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">C</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">B</span><span class="PUNC">[</span><span class="STRN">"class"</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">w</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">v.getVml</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">C</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">C</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">B</span><span class="PUNC">,</span><span class="NAME">z</span><span class="PUNC">,</span><span class="NAME">v.canvas</span><span class="PUNC">,</span><span class="NAME">v._jsPlumb</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">v.attachListeners</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">v.appendDisplayElement</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">v.appendDisplayElement</span><span class="PUNC">(</span><span class="NAME">v.canvas</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">v.initOpacityNodes</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="STRN">"fill"</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">k</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">C</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">C</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">B</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">q</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">A</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.reattachListeners</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">v.reattachListenersForElement</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Connectors.vml.Bezier</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">jsPlumb.Connectors.Bezier.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">d.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.getPath</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="STRN">"m"</span><span class="PUNC">+</span><span class="NAME">p</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">p</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">[</span><span class="NUMB">5</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">" c"</span><span class="PUNC">+</span><span class="NAME">p</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">[</span><span class="NUMB">8</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">p</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">[</span><span class="NUMB">9</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">p</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">[</span><span class="NUMB">10</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">p</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">[</span><span class="NUMB">11</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">p</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">[</span><span class="NUMB">6</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">p</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">[</span><span class="NUMB">7</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">" e"</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Connectors.vml.Straight</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">jsPlumb.Connectors.Straight.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">d.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.getPath</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="STRN">"m"</span><span class="PUNC">+</span><span class="NAME">p</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">p</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">[</span><span class="NUMB">5</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">" l"</span><span class="PUNC">+</span><span class="NAME">p</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">[</span><span class="NUMB">6</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">p</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">[</span><span class="NUMB">7</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">" e"</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Connectors.vml.Flowchart</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">jsPlumb.Connectors.Flowchart.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">d.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.getPath</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">w</span><span class="PUNC">=</span><span class="STRN">"m "</span><span class="PUNC">+</span><span class="NAME">p</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">p</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">[</span><span class="NUMB">5</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">" l"</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">u</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">u</span><span class="PUNC">&lt;</span><span class="NAME">v</span><span class="PUNC">[</span><span class="NUMB">8</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">u</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">w</span><span class="PUNC">=</span><span class="NAME">w</span><span class="PUNC">+</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="NAME">p</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">[</span><span class="NUMB">9</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">*</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">p</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">[</span><span class="NUMB">10</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">*</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">w</span><span class="PUNC">=</span><span class="NAME">w</span><span class="PUNC">+</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="NAME">p</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">[</span><span class="NUMB">6</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">p</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">[</span><span class="NUMB">7</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">" e"</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">w</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Endpoints.vml.Dot</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">jsPlumb.Endpoints.Dot.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">l.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.getVml</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">w</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">f</span><span class="PUNC">(</span><span class="STRN">"oval"</span><span class="PUNC">,</span><span class="NAME">w</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Endpoints.vml.Rectangle</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">jsPlumb.Endpoints.Rectangle.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">l.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.getVml</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">w</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">f</span><span class="PUNC">(</span><span class="STRN">"rect"</span><span class="PUNC">,</span><span class="NAME">w</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Endpoints.vml.Image</span><span class="PUNC">=</span><span class="NAME">jsPlumb.Endpoints.Image</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Endpoints.vml.Blank</span><span class="PUNC">=</span><span class="NAME">jsPlumb.Endpoints.Blank</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Overlays.vml.Label</span><span class="PUNC">=</span><span class="NAME">jsPlumb.Overlays.Label</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Overlays.vml.Custom</span><span class="PUNC">=</span><span class="NAME">jsPlumb.Overlays.Custom</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">o</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">x.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">u</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">w</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="NAME">u.canvas</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="NAME">u.isAppendedAtTopLevel</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">z</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="STRN">"m "</span><span class="PUNC">+</span><span class="NAME">p</span><span class="PUNC">(</span><span class="NAME">z.hxy.x</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">p</span><span class="PUNC">(</span><span class="NAME">z.hxy.y</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">" l "</span><span class="PUNC">+</span><span class="NAME">p</span><span class="PUNC">(</span><span class="NAME">z.tail</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">x</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">p</span><span class="PUNC">(</span><span class="NAME">z.tail</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">y</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="NAME">p</span><span class="PUNC">(</span><span class="NAME">z.cxy.x</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">p</span><span class="PUNC">(</span><span class="NAME">z.cxy.y</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="NAME">p</span><span class="PUNC">(</span><span class="NAME">z.tail</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">x</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">p</span><span class="PUNC">(</span><span class="NAME">z.tail</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">y</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">" x e"</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.paint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">B</span><span class="PUNC">,</span><span class="NAME">G</span><span class="PUNC">,</span><span class="NAME">F</span><span class="PUNC">,</span><span class="NAME">H</span><span class="PUNC">,</span><span class="NAME">L</span><span class="PUNC">,</span><span class="NAME">K</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">z</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">H</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">z.stroked</span><span class="PUNC">=</span><span class="STRN">"true"</span><span class="PUNC">;</span><span class="NAME">z.strokecolor</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.convertStyle</span><span class="PUNC">(</span><span class="NAME">H</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">F</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">z.strokeweight</span><span class="PUNC">=</span><span class="NAME">F</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">L</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">z.filled</span><span class="PUNC">=</span><span class="STRN">"true"</span><span class="PUNC">;</span><span class="NAME">z.fillcolor</span><span class="PUNC">=</span><span class="NAME">L</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">y</span><span class="PUNC">=</span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">G.hxy.x</span><span class="PUNC">,</span><span class="NAME">G.tail</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">G.tail</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">G.cxy.x</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">J</span><span class="PUNC">=</span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">G.hxy.y</span><span class="PUNC">,</span><span class="NAME">G.tail</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">y</span><span class="PUNC">,</span><span class="NAME">G.tail</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">y</span><span class="PUNC">,</span><span class="NAME">G.cxy.y</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">C</span><span class="PUNC">=</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">G.hxy.x</span><span class="PUNC">,</span><span class="NAME">G.tail</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">G.tail</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">G.cxy.x</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">A</span><span class="PUNC">=</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">G.hxy.y</span><span class="PUNC">,</span><span class="NAME">G.tail</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">y</span><span class="PUNC">,</span><span class="NAME">G.tail</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">y</span><span class="PUNC">,</span><span class="NAME">G.cxy.y</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">I</span><span class="PUNC">=</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">-</span><span class="NAME">y</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">E</span><span class="PUNC">=</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">A</span><span class="PUNC">-</span><span class="NAME">J</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="NAME">y</span><span class="PUNC">,</span><span class="NAME">J</span><span class="PUNC">,</span><span class="NAME">I</span><span class="PUNC">,</span><span class="NAME">E</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">z.path</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">(</span><span class="NAME">G</span><span class="PUNC">,</span><span class="NAME">K</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">z.coordsize</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">K</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">*</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">K</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">*</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">D</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">K</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">D</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">K</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">D</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">K</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">D</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">K</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">u.canvas</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">u.canvas</span><span class="PUNC">=</span><span class="NAME">f</span><span class="PUNC">(</span><span class="STRN">"shape"</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">,</span><span class="NAME">z</span><span class="PUNC">,</span><span class="NAME">B.canvas.parentNode</span><span class="PUNC">,</span><span class="NAME">B._jsPlumb</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">B.appendDisplayElement</span><span class="PUNC">(</span><span class="NAME">u.canvas</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">u.attachListeners</span><span class="PUNC">(</span><span class="NAME">u.canvas</span><span class="PUNC">,</span><span class="NAME">B</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">u.attachListeners</span><span class="PUNC">(</span><span class="NAME">u.canvas</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">k</span><span class="PUNC">(</span><span class="NAME">u.canvas</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">(</span><span class="NAME">u.canvas</span><span class="PUNC">,</span><span class="NAME">z</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.reattachListeners</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">u.canvas</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">u.reattachListenersForElement</span><span class="PUNC">(</span><span class="NAME">u.canvas</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.cleanup</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">u.canvas</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">jsPlumb.CurrentLibrary.removeElement</span><span class="PUNC">(</span><span class="NAME">u.canvas</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Overlays.vml.Arrow</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">jsPlumb.Overlays.Arrow</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Overlays.vml.PlainArrow</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">jsPlumb.Overlays.PlainArrow</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Overlays.vml.Diamond</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">jsPlumb.Overlays.Diamond</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">l</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">joinstyle</span><span class="PUNC">:</span><span class="STRN">"stroke-linejoin"</span><span class="PUNC">,</span><span class="STRN">"stroke-linejoin"</span><span class="PUNC">:</span><span class="STRN">"stroke-linejoin"</span><span class="PUNC">,</span><span class="STRN">"stroke-dashoffset"</span><span class="PUNC">:</span><span class="STRN">"stroke-dashoffset"</span><span class="PUNC">,</span><span class="STRN">"stroke-linecap"</span><span class="PUNC">:</span><span class="STRN">"stroke-linecap"</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">w</span><span class="PUNC">=</span><span class="STRN">"stroke-dasharray"</span><span class="PUNC">,</span><span class="NAME">A</span><span class="PUNC">=</span><span class="STRN">"dashstyle"</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="STRN">"linearGradient"</span><span class="PUNC">,</span><span class="NAME">b</span><span class="PUNC">=</span><span class="STRN">"radialGradient"</span><span class="PUNC">,</span><span class="NAME">c</span><span class="PUNC">=</span><span class="STRN">"fill"</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="STRN">"stop"</span><span class="PUNC">,</span><span class="NAME">z</span><span class="PUNC">=</span><span class="STRN">"stroke"</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">=</span><span class="STRN">"stroke-width"</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="STRN">"style"</span><span class="PUNC">,</span><span class="NAME">m</span><span class="PUNC">=</span><span class="STRN">"none"</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">=</span><span class="STRN">"jsplumb_gradient_"</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="STRN">"lineWidth"</span><span class="PUNC">,</span><span class="NAME">C</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">svg</span><span class="PUNC">:</span><span class="STRN">"http://www.w3.org/2000/svg"</span><span class="PUNC">,</span><span class="NAME">xhtml</span><span class="PUNC">:</span><span class="STRN">"http://www.w3.org/1999/xhtml"</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">g</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">F</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">E</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">F.setAttribute</span><span class="PUNC">(</span><span class="NAME">E</span><span class="PUNC">,</span><span class="STRN">""</span><span class="PUNC">+</span><span class="NAME">D</span><span class="PUNC">[</span><span class="NAME">E</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">E</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">F</span><span class="PUNC">=</span><span class="NAME">document.createElementNS</span><span class="PUNC">(</span><span class="NAME">C.svg</span><span class="PUNC">,</span><span class="NAME">E</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">D</span><span class="PUNC">=</span><span class="NAME">D</span><span class="PUNC">||</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">D.version</span><span class="PUNC">=</span><span class="STRN">"1.1"</span><span class="PUNC">;</span><span class="NAME">D.xmlns</span><span class="PUNC">=</span><span class="NAME">C.xhtml</span><span class="PUNC">;</span><span class="NAME">g</span><span class="PUNC">(</span><span class="NAME">F</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">F</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="STRN">"position:absolute;left:"</span><span class="PUNC">+</span><span class="NAME">D</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="STRN">"px;top:"</span><span class="PUNC">+</span><span class="NAME">D</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="STRN">"px"</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">E</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">D</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">D</span><span class="PUNC">&lt;</span><span class="NAME">E.childNodes.length</span><span class="PUNC">;</span><span class="NAME">D</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">E.childNodes</span><span class="PUNC">[</span><span class="NAME">D</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">tagName</span><span class="PUNC">==</span><span class="NAME">e</span><span class="PUNC">||</span><span class="NAME">E.childNodes</span><span class="PUNC">[</span><span class="NAME">D</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">tagName</span><span class="PUNC">==</span><span class="NAME">b</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">E.removeChild</span><span class="PUNC">(</span><span class="NAME">E.childNodes</span><span class="PUNC">[</span><span class="NAME">D</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">N</span><span class="PUNC">,</span><span class="NAME">I</span><span class="PUNC">,</span><span class="NAME">F</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">,</span><span class="NAME">J</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">G</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">+</span><span class="NAME">J._jsPlumb.idstamp</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">i</span><span class="PUNC">(</span><span class="NAME">N</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">F.gradient.offset</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">L</span><span class="PUNC">=</span><span class="NAME">f</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">id</span><span class="PUNC">:</span><span class="NAME">G</span><span class="PUNC">,</span><span class="NAME">gradientUnits</span><span class="PUNC">:</span><span class="STRN">"userSpaceOnUse"</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">N.appendChild</span><span class="PUNC">(</span><span class="NAME">L</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">L</span><span class="PUNC">=</span><span class="NAME">f</span><span class="PUNC">(</span><span class="NAME">b</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">id</span><span class="PUNC">:</span><span class="NAME">G</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">N.appendChild</span><span class="PUNC">(</span><span class="NAME">L</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">K</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">K</span><span class="PUNC">&lt;</span><span class="NAME">F.gradient.stops.length</span><span class="PUNC">;</span><span class="NAME">K</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">H</span><span class="PUNC">=</span><span class="NAME">K</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">D.length</span><span class="PUNC">==</span><span class="NUMB">8</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">H</span><span class="PUNC">=</span><span class="NAME">D</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">&lt;</span><span class="NAME">D</span><span class="PUNC">[</span><span class="NUMB">6</span><span class="PUNC">]</span><span class="PUNC">?</span><span class="NAME">K</span><span class="PUNC">:</span><span class="NAME">F.gradient.stops.length</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">-</span><span class="NAME">K</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">H</span><span class="PUNC">=</span><span class="NAME">D</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">&lt;</span><span class="NAME">D</span><span class="PUNC">[</span><span class="NUMB">6</span><span class="PUNC">]</span><span class="PUNC">?</span><span class="NAME">F.gradient.stops.length</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">-</span><span class="NAME">K</span><span class="PUNC">:</span><span class="NAME">K</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">M</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.convertStyle</span><span class="PUNC">(</span><span class="NAME">F.gradient.stops</span><span class="PUNC">[</span><span class="NAME">H</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">O</span><span class="PUNC">=</span><span class="NAME">f</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">offset</span><span class="PUNC">:</span><span class="NAME">Math.floor</span><span class="PUNC">(</span><span class="NAME">F.gradient.stops</span><span class="PUNC">[</span><span class="NAME">K</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">*</span><span class="NUMB">100</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">"%"</span><span class="PUNC">,</span><span class="STRN">"stop-color"</span><span class="PUNC">:</span><span class="NAME">M</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">L.appendChild</span><span class="PUNC">(</span><span class="NAME">O</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">E</span><span class="PUNC">=</span><span class="NAME">F.strokeStyle</span><span class="PUNC">?</span><span class="NAME">z</span><span class="PUNC">:</span><span class="NAME">c</span><span class="PUNC">;</span><span class="NAME">I.setAttribute</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">,</span><span class="NAME">E</span><span class="PUNC">+</span><span class="STRN">":url(#"</span><span class="PUNC">+</span><span class="NAME">G</span><span class="PUNC">+</span><span class="STRN">")"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">K</span><span class="PUNC">,</span><span class="NAME">G</span><span class="PUNC">,</span><span class="NAME">E</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">,</span><span class="NAME">H</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">E.gradient</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">v</span><span class="PUNC">(</span><span class="NAME">K</span><span class="PUNC">,</span><span class="NAME">G</span><span class="PUNC">,</span><span class="NAME">E</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">,</span><span class="NAME">H</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">i</span><span class="PUNC">(</span><span class="NAME">K</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">G.setAttribute</span><span class="PUNC">(</span><span class="NAME">h</span><span class="PUNC">,</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">G.setAttribute</span><span class="PUNC">(</span><span class="NAME">c</span><span class="PUNC">,</span><span class="NAME">E.fillStyle</span><span class="PUNC">?</span><span class="NAME">jsPlumbUtil.convertStyle</span><span class="PUNC">(</span><span class="NAME">E.fillStyle</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">m</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">G.setAttribute</span><span class="PUNC">(</span><span class="NAME">z</span><span class="PUNC">,</span><span class="NAME">E.strokeStyle</span><span class="PUNC">?</span><span class="NAME">jsPlumbUtil.convertStyle</span><span class="PUNC">(</span><span class="NAME">E.strokeStyle</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">m</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">E.lineWidth</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">G.setAttribute</span><span class="PUNC">(</span><span class="NAME">q</span><span class="PUNC">,</span><span class="NAME">E.lineWidth</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">E</span><span class="PUNC">[</span><span class="NAME">A</span><span class="PUNC">]</span><span class="PUNC">&&</span><span class="NAME">E</span><span class="PUNC">[</span><span class="NAME">o</span><span class="PUNC">]</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">E</span><span class="PUNC">[</span><span class="NAME">w</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">L</span><span class="PUNC">=</span><span class="NAME">E</span><span class="PUNC">[</span><span class="NAME">A</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">indexOf</span><span class="PUNC">(</span><span class="STRN">","</span><span class="PUNC">)</span><span class="PUNC">==</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">?</span><span class="STRN">" "</span><span class="PUNC">:</span><span class="STRN">","</span><span class="PUNC">,</span><span class="NAME">I</span><span class="PUNC">=</span><span class="NAME">E</span><span class="PUNC">[</span><span class="NAME">A</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">split</span><span class="PUNC">(</span><span class="NAME">L</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">F</span><span class="PUNC">=</span><span class="STRN">""</span><span class="PUNC">;</span><span class="NAME">I.forEach</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">M</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">F</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">Math.floor</span><span class="PUNC">(</span><span class="NAME">M</span><span class="PUNC">*</span><span class="NAME">E.lineWidth</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">L</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">G.setAttribute</span><span class="PUNC">(</span><span class="NAME">w</span><span class="PUNC">,</span><span class="NAME">F</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">E</span><span class="PUNC">[</span><span class="NAME">w</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">G.setAttribute</span><span class="PUNC">(</span><span class="NAME">w</span><span class="PUNC">,</span><span class="NAME">E</span><span class="PUNC">[</span><span class="NAME">w</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">J</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">E</span><span class="PUNC">[</span><span class="NAME">J</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">G.setAttribute</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">[</span><span class="NAME">J</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">E</span><span class="PUNC">[</span><span class="NAME">J</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">B</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">F</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">D</span><span class="PUNC">=</span><span class="REGX">/([0-9].)(p[xt])\s(.*)/</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">E</span><span class="PUNC">=</span><span class="NAME">F.match</span><span class="PUNC">(</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">{</span><span class="NAME">size</span><span class="PUNC">:</span><span class="NAME">E</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="NAME">E</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">font</span><span class="PUNC">:</span><span class="NAME">E</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">,</span><span class="NAME">J</span><span class="PUNC">,</span><span class="NAME">E</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">K</span><span class="PUNC">=</span><span class="NAME">E.split</span><span class="PUNC">(</span><span class="STRN">" "</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">H</span><span class="PUNC">=</span><span class="NAME">I.className</span><span class="PUNC">,</span><span class="NAME">G</span><span class="PUNC">=</span><span class="NAME">H.baseVal.split</span><span class="PUNC">(</span><span class="STRN">" "</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">F</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">F</span><span class="PUNC">&lt;</span><span class="NAME">K.length</span><span class="PUNC">;</span><span class="NAME">F</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">J</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">G.indexOf</span><span class="PUNC">(</span><span class="NAME">K</span><span class="PUNC">[</span><span class="NAME">F</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">==</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">G.push</span><span class="PUNC">(</span><span class="NAME">K</span><span class="PUNC">[</span><span class="NAME">F</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">D</span><span class="PUNC">=</span><span class="NAME">G.indexOf</span><span class="PUNC">(</span><span class="NAME">K</span><span class="PUNC">[</span><span class="NAME">F</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">D</span><span class="PUNC">!=</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">G.splice</span><span class="PUNC">(</span><span class="NAME">D</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="NAME">I.className.baseVal</span><span class="PUNC">=</span><span class="NAME">G.join</span><span class="PUNC">(</span><span class="STRN">" "</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">E</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">r</span><span class="PUNC">(</span><span class="NAME">E</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">k</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">E</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">r</span><span class="PUNC">(</span><span class="NAME">E</span><span class="PUNC">,</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumbUtil.svg</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">addClass</span><span class="PUNC">:</span><span class="NAME">u</span><span class="PUNC">,</span><span class="NAME">removeClass</span><span class="PUNC">:</span><span class="NAME">k</span><span class="PUNC">,</span><span class="NAME">node</span><span class="PUNC">:</span><span class="NAME">f</span><span class="PUNC">,</span><span class="NAME">attr</span><span class="PUNC">:</span><span class="NAME">g</span><span class="PUNC">,</span><span class="NAME">pos</span><span class="PUNC">:</span><span class="NAME">n</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">H</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">D</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">G</span><span class="PUNC">=</span><span class="NAME">H.pointerEventsSpec</span><span class="PUNC">||</span><span class="STRN">"all"</span><span class="PUNC">;</span><span class="NAME">jsPlumb.jsPlumbUIComponent.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">H.originalArgs</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">D.canvas</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">D.path</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">D.svg</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">F</span><span class="PUNC">=</span><span class="NAME">H.cssClass</span><span class="PUNC">+</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">H.originalArgs</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">cssClass</span><span class="PUNC">||</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">I</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">style</span><span class="PUNC">:</span><span class="STRN">""</span><span class="PUNC">,</span><span class="NAME">width</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">height</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="STRN">"pointer-events"</span><span class="PUNC">:</span><span class="NAME">G</span><span class="PUNC">,</span><span class="NAME">position</span><span class="PUNC">:</span><span class="STRN">"absolute"</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">D.tooltip</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">I.title</span><span class="PUNC">=</span><span class="NAME">D.tooltip</span><span class="PUNC">}</span><span class="NAME">D.svg</span><span class="PUNC">=</span><span class="NAME">f</span><span class="PUNC">(</span><span class="STRN">"svg"</span><span class="PUNC">,</span><span class="NAME">I</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">H.useDivWrapper</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">D.canvas</span><span class="PUNC">=</span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">D.canvas.style.position</span><span class="PUNC">=</span><span class="STRN">"absolute"</span><span class="PUNC">;</span><span class="NAME">jsPlumb.sizeCanvas</span><span class="PUNC">(</span><span class="NAME">D.canvas</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">D.canvas.className</span><span class="PUNC">=</span><span class="NAME">F</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">D.tooltip</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">D.canvas.setAttribute</span><span class="PUNC">(</span><span class="STRN">"title"</span><span class="PUNC">,</span><span class="NAME">D.tooltip</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">g</span><span class="PUNC">(</span><span class="NAME">D.svg</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="STRN">"class"</span><span class="PUNC">:</span><span class="NAME">F</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">D.canvas</span><span class="PUNC">=</span><span class="NAME">D.svg</span><span class="PUNC">}</span><span class="NAME">H._jsPlumb.appendElement</span><span class="PUNC">(</span><span class="NAME">D.canvas</span><span class="PUNC">,</span><span class="NAME">H.originalArgs</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="STRN">"parent"</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">H.useDivWrapper</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">D.canvas.appendChild</span><span class="PUNC">(</span><span class="NAME">D.svg</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">E</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="NAME">D.canvas</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">this.getDisplayElements</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">E</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.appendDisplayElement</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">J</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">E.push</span><span class="PUNC">(</span><span class="NAME">J</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.paint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">N</span><span class="PUNC">,</span><span class="NAME">L</span><span class="PUNC">,</span><span class="NAME">K</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">L</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">J</span><span class="PUNC">=</span><span class="NAME">N</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">O</span><span class="PUNC">=</span><span class="NAME">N</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">H.useDivWrapper</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">jsPlumb.sizeCanvas</span><span class="PUNC">(</span><span class="NAME">D.canvas</span><span class="PUNC">,</span><span class="NAME">N</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">N</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">N</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">N</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">J</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">O</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">M</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">J</span><span class="PUNC">,</span><span class="NAME">O</span><span class="PUNC">,</span><span class="NAME">N</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">N</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">D.getZIndex</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">M</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="STRN">";z-index:"</span><span class="PUNC">+</span><span class="NAME">D.getZIndex</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">";"</span><span class="PUNC">}</span><span class="NAME">g</span><span class="PUNC">(</span><span class="NAME">D.svg</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">style</span><span class="PUNC">:</span><span class="NAME">M</span><span class="PUNC">,</span><span class="NAME">width</span><span class="PUNC">:</span><span class="NAME">N</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">height</span><span class="PUNC">:</span><span class="NAME">N</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">D._paint.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">d</span><span class="PUNC">=</span><span class="NAME">jsPlumb.SvgConnector</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">E</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">D</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">;</span><span class="NAME">s.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="PUNC">{</span><span class="NAME">cssClass</span><span class="PUNC">:</span><span class="NAME">E._jsPlumb.connectorClass</span><span class="PUNC">,</span><span class="NAME">originalArgs</span><span class="PUNC">:</span><span class="NAME">arguments</span><span class="PUNC">,</span><span class="NAME">pointerEventsSpec</span><span class="PUNC">:</span><span class="STRN">"none"</span><span class="PUNC">,</span><span class="NAME">tooltip</span><span class="PUNC">:</span><span class="NAME">E.tooltip</span><span class="PUNC">,</span><span class="NAME">_jsPlumb</span><span class="PUNC">:</span><span class="NAME">E._jsPlumb</span><span class="PUNC">}</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._paint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">L</span><span class="PUNC">,</span><span class="NAME">H</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">K</span><span class="PUNC">=</span><span class="NAME">D.getPath</span><span class="PUNC">(</span><span class="NAME">L</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">F</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">d</span><span class="PUNC">:</span><span class="NAME">K</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">J</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="NAME">F</span><span class="PUNC">[</span><span class="STRN">"pointer-events"</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="STRN">"all"</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">H.outlineColor</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">I</span><span class="PUNC">=</span><span class="NAME">H.outlineWidth</span><span class="PUNC">||</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">G</span><span class="PUNC">=</span><span class="NAME">H.lineWidth</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">I</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">J</span><span class="PUNC">=</span><span class="NAME">jsPlumb.CurrentLibrary.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">H</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">J.strokeStyle</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.convertStyle</span><span class="PUNC">(</span><span class="NAME">H.outlineColor</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">J.lineWidth</span><span class="PUNC">=</span><span class="NAME">G</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">D.bgPath</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">D.bgPath</span><span class="PUNC">=</span><span class="NAME">f</span><span class="PUNC">(</span><span class="STRN">"path"</span><span class="PUNC">,</span><span class="NAME">F</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">D.svg.appendChild</span><span class="PUNC">(</span><span class="NAME">D.bgPath</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">D.attachListeners</span><span class="PUNC">(</span><span class="NAME">D.bgPath</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">g</span><span class="PUNC">(</span><span class="NAME">D.bgPath</span><span class="PUNC">,</span><span class="NAME">F</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">x</span><span class="PUNC">(</span><span class="NAME">D.svg</span><span class="PUNC">,</span><span class="NAME">D.bgPath</span><span class="PUNC">,</span><span class="NAME">J</span><span class="PUNC">,</span><span class="NAME">L</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">D.path</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">D.path</span><span class="PUNC">=</span><span class="NAME">f</span><span class="PUNC">(</span><span class="STRN">"path"</span><span class="PUNC">,</span><span class="NAME">F</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">D.svg.appendChild</span><span class="PUNC">(</span><span class="NAME">D.path</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">D.attachListeners</span><span class="PUNC">(</span><span class="NAME">D.path</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">g</span><span class="PUNC">(</span><span class="NAME">D.path</span><span class="PUNC">,</span><span class="NAME">F</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">x</span><span class="PUNC">(</span><span class="NAME">D.svg</span><span class="PUNC">,</span><span class="NAME">D.path</span><span class="PUNC">,</span><span class="NAME">H</span><span class="PUNC">,</span><span class="NAME">L</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.reattachListeners</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">D.bgPath</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">D.reattachListenersForElement</span><span class="PUNC">(</span><span class="NAME">D.bgPath</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">D.path</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">D.reattachListenersForElement</span><span class="PUNC">(</span><span class="NAME">D.path</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Connectors.svg.Bezier</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">jsPlumb.Connectors.Bezier.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">d.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.getPath</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">F</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">E</span><span class="PUNC">=</span><span class="STRN">"M "</span><span class="PUNC">+</span><span class="NAME">F</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="NAME">F</span><span class="PUNC">[</span><span class="NUMB">5</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">E</span><span class="PUNC">+</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="STRN">" C "</span><span class="PUNC">+</span><span class="NAME">F</span><span class="PUNC">[</span><span class="NUMB">8</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="NAME">F</span><span class="PUNC">[</span><span class="NUMB">9</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="NAME">F</span><span class="PUNC">[</span><span class="NUMB">10</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="NAME">F</span><span class="PUNC">[</span><span class="NUMB">11</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="NAME">F</span><span class="PUNC">[</span><span class="NUMB">6</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="NAME">F</span><span class="PUNC">[</span><span class="NUMB">7</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">E</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Connectors.svg.Straight</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">jsPlumb.Connectors.Straight.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">d.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.getPath</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">E</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="STRN">"M "</span><span class="PUNC">+</span><span class="NAME">E</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="NAME">E</span><span class="PUNC">[</span><span class="NUMB">5</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="STRN">" L "</span><span class="PUNC">+</span><span class="NAME">E</span><span class="PUNC">[</span><span class="NUMB">6</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="NAME">E</span><span class="PUNC">[</span><span class="NUMB">7</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Connectors.svg.Flowchart</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">D</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Connectors.Flowchart.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">d.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.getPath</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">E</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">G</span><span class="PUNC">=</span><span class="STRN">"M "</span><span class="PUNC">+</span><span class="NAME">E</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">E</span><span class="PUNC">[</span><span class="NUMB">5</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">J</span><span class="PUNC">=</span><span class="NAME">E</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">I</span><span class="PUNC">=</span><span class="NAME">E</span><span class="PUNC">[</span><span class="NUMB">5</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">M</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">M</span><span class="PUNC">&lt;</span><span class="NAME">E</span><span class="PUNC">[</span><span class="NUMB">8</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">M</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">H</span><span class="PUNC">=</span><span class="NAME">E</span><span class="PUNC">[</span><span class="NUMB">9</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">M</span><span class="PUNC">*</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">Q</span><span class="PUNC">=</span><span class="NAME">E</span><span class="PUNC">[</span><span class="NUMB">10</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">M</span><span class="PUNC">*</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">F</span><span class="PUNC">=</span><span class="NAME">E</span><span class="PUNC">[</span><span class="NUMB">9</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">M</span><span class="PUNC">+</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">P</span><span class="PUNC">=</span><span class="NAME">E</span><span class="PUNC">[</span><span class="NUMB">10</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">M</span><span class="PUNC">+</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">R</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">H</span><span class="PUNC">!=</span><span class="NAME">J</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">Q</span><span class="PUNC">==</span><span class="NAME">I</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">N</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">H</span><span class="PUNC">==</span><span class="NAME">J</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">Q</span><span class="PUNC">!=</span><span class="NAME">I</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">L</span><span class="PUNC">=</span><span class="NAME">R</span><span class="PUNC">?</span><span class="NAME">H</span><span class="PUNC">></span><span class="NAME">F</span><span class="PUNC">?</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">K</span><span class="PUNC">=</span><span class="NAME">N</span><span class="PUNC">?</span><span class="NAME">Q</span><span class="PUNC">></span><span class="NAME">P</span><span class="PUNC">?</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">O</span><span class="PUNC">=</span><span class="NAME">D.lineWidth</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">;</span><span class="NAME">G</span><span class="PUNC">=</span><span class="NAME">G</span><span class="PUNC">+</span><span class="STRN">" L "</span><span class="PUNC">+</span><span class="NAME">H</span><span class="PUNC">+</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="NAME">Q</span><span class="PUNC">;</span><span class="NAME">G</span><span class="PUNC">=</span><span class="NAME">G</span><span class="PUNC">+</span><span class="STRN">" L "</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">H</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">L</span><span class="PUNC">*</span><span class="NAME">O</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">Q</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">K</span><span class="PUNC">*</span><span class="NAME">O</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">J</span><span class="PUNC">=</span><span class="NAME">H</span><span class="PUNC">;</span><span class="NAME">I</span><span class="PUNC">=</span><span class="NAME">Q</span><span class="PUNC">;</span><span class="NAME">G</span><span class="PUNC">=</span><span class="NAME">G</span><span class="PUNC">+</span><span class="STRN">" M "</span><span class="PUNC">+</span><span class="NAME">H</span><span class="PUNC">+</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="NAME">Q</span><span class="PUNC">}</span><span class="NAME">G</span><span class="PUNC">=</span><span class="NAME">G</span><span class="PUNC">+</span><span class="STRN">" L "</span><span class="PUNC">+</span><span class="NAME">E</span><span class="PUNC">[</span><span class="NUMB">6</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">E</span><span class="PUNC">[</span><span class="NUMB">7</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">G</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">y</span><span class="PUNC">=</span><span class="NAME">window.SvgEndpoint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">E</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">D</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">;</span><span class="NAME">s.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="PUNC">{</span><span class="NAME">cssClass</span><span class="PUNC">:</span><span class="NAME">E._jsPlumb.endpointClass</span><span class="PUNC">,</span><span class="NAME">originalArgs</span><span class="PUNC">:</span><span class="NAME">arguments</span><span class="PUNC">,</span><span class="NAME">pointerEventsSpec</span><span class="PUNC">:</span><span class="STRN">"all"</span><span class="PUNC">,</span><span class="NAME">useDivWrapper</span><span class="PUNC">:</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="NAME">_jsPlumb</span><span class="PUNC">:</span><span class="NAME">E._jsPlumb</span><span class="PUNC">}</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._paint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">H</span><span class="PUNC">,</span><span class="NAME">G</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">F</span><span class="PUNC">=</span><span class="NAME">jsPlumb.extend</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">G</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">F.outlineColor</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">F.strokeWidth</span><span class="PUNC">=</span><span class="NAME">F.outlineWidth</span><span class="PUNC">;</span><span class="NAME">F.strokeStyle</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.convertStyle</span><span class="PUNC">(</span><span class="NAME">F.outlineColor</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">D.node</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">D.node</span><span class="PUNC">=</span><span class="NAME">D.makeNode</span><span class="PUNC">(</span><span class="NAME">H</span><span class="PUNC">,</span><span class="NAME">F</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">D.svg.appendChild</span><span class="PUNC">(</span><span class="NAME">D.node</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">D.attachListeners</span><span class="PUNC">(</span><span class="NAME">D.node</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">x</span><span class="PUNC">(</span><span class="NAME">D.svg</span><span class="PUNC">,</span><span class="NAME">D.node</span><span class="PUNC">,</span><span class="NAME">F</span><span class="PUNC">,</span><span class="NAME">H</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n</span><span class="PUNC">(</span><span class="NAME">D.node</span><span class="PUNC">,</span><span class="NAME">H</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.reattachListeners</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">D.node</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">D.reattachListenersForElement</span><span class="PUNC">(</span><span class="NAME">D.node</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Endpoints.svg.Dot</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">jsPlumb.Endpoints.Dot.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">y.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.makeNode</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">E</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">f</span><span class="PUNC">(</span><span class="STRN">"circle"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">cx</span><span class="PUNC">:</span><span class="NAME">E</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="NAME">cy</span><span class="PUNC">:</span><span class="NAME">E</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">:</span><span class="NAME">E</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Endpoints.svg.Rectangle</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">jsPlumb.Endpoints.Rectangle.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">y.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.makeNode</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">E</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">f</span><span class="PUNC">(</span><span class="STRN">"rect"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">width</span><span class="PUNC">:</span><span class="NAME">E</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">height</span><span class="PUNC">:</span><span class="NAME">E</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Endpoints.svg.Image</span><span class="PUNC">=</span><span class="NAME">jsPlumb.Endpoints.Image</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Endpoints.svg.Blank</span><span class="PUNC">=</span><span class="NAME">jsPlumb.Endpoints.Blank</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Overlays.svg.Label</span><span class="PUNC">=</span><span class="NAME">jsPlumb.Overlays.Label</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Overlays.svg.Custom</span><span class="PUNC">=</span><span class="NAME">jsPlumb.Overlays.Custom</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">p</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">H</span><span class="PUNC">,</span><span class="NAME">F</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">H.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">F</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">jsPlumb.jsPlumbUIComponent.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">F</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.isAppendedAtTopLevel</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">D</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">G</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="NAME">this.paint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">J</span><span class="PUNC">,</span><span class="NAME">M</span><span class="PUNC">,</span><span class="NAME">I</span><span class="PUNC">,</span><span class="NAME">N</span><span class="PUNC">,</span><span class="NAME">K</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">G</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">G</span><span class="PUNC">=</span><span class="NAME">f</span><span class="PUNC">(</span><span class="STRN">"path"</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="STRN">"pointer-events"</span><span class="PUNC">:</span><span class="STRN">"all"</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">J.svg.appendChild</span><span class="PUNC">(</span><span class="NAME">G</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">D.attachListeners</span><span class="PUNC">(</span><span class="NAME">G</span><span class="PUNC">,</span><span class="NAME">J</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">D.attachListeners</span><span class="PUNC">(</span><span class="NAME">G</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">L</span><span class="PUNC">=</span><span class="NAME">F</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">F.length</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">?</span><span class="PUNC">(</span><span class="NAME">F</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">cssClass</span><span class="PUNC">||</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="STRN">""</span><span class="PUNC">;</span><span class="NAME">g</span><span class="PUNC">(</span><span class="NAME">G</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">d</span><span class="PUNC">:</span><span class="NAME">E</span><span class="PUNC">(</span><span class="NAME">M</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="STRN">"class"</span><span class="PUNC">:</span><span class="NAME">L</span><span class="PUNC">,</span><span class="NAME">stroke</span><span class="PUNC">:</span><span class="NAME">N</span><span class="PUNC">?</span><span class="NAME">N</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">fill</span><span class="PUNC">:</span><span class="NAME">K</span><span class="PUNC">?</span><span class="NAME">K</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">E</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="STRN">"M"</span><span class="PUNC">+</span><span class="NAME">I.hxy.x</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">I.hxy.y</span><span class="PUNC">+</span><span class="STRN">" L"</span><span class="PUNC">+</span><span class="NAME">I.tail</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">x</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">I.tail</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">y</span><span class="PUNC">+</span><span class="STRN">" L"</span><span class="PUNC">+</span><span class="NAME">I.cxy.x</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">I.cxy.y</span><span class="PUNC">+</span><span class="STRN">" L"</span><span class="PUNC">+</span><span class="NAME">I.tail</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">x</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">I.tail</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">y</span><span class="PUNC">+</span><span class="STRN">" L"</span><span class="PUNC">+</span><span class="NAME">I.hxy.x</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">I.hxy.y</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.reattachListeners</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">G</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">D.reattachListenersForElement</span><span class="PUNC">(</span><span class="NAME">G</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.cleanup</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">G</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">jsPlumb.CurrentLibrary.removeElement</span><span class="PUNC">(</span><span class="NAME">G</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Overlays.svg.Arrow</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">p.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">jsPlumb.Overlays.Arrow</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Overlays.svg.PlainArrow</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">p.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">jsPlumb.Overlays.PlainArrow</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Overlays.svg.Diamond</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">p.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">jsPlumb.Overlays.Diamond</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Overlays.svg.GuideLines</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">I</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">H</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">G</span><span class="PUNC">,</span><span class="NAME">F</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Overlays.GuideLines.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.paint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">K</span><span class="PUNC">,</span><span class="NAME">M</span><span class="PUNC">,</span><span class="NAME">J</span><span class="PUNC">,</span><span class="NAME">N</span><span class="PUNC">,</span><span class="NAME">L</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">I</span><span class="PUNC">=</span><span class="NAME">f</span><span class="PUNC">(</span><span class="STRN">"path"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">K.svg.appendChild</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">D.attachListeners</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">,</span><span class="NAME">K</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">D.attachListeners</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">G</span><span class="PUNC">=</span><span class="NAME">f</span><span class="PUNC">(</span><span class="STRN">"path"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">K.svg.appendChild</span><span class="PUNC">(</span><span class="NAME">G</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">D.attachListeners</span><span class="PUNC">(</span><span class="NAME">G</span><span class="PUNC">,</span><span class="NAME">K</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">D.attachListeners</span><span class="PUNC">(</span><span class="NAME">G</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">F</span><span class="PUNC">=</span><span class="NAME">f</span><span class="PUNC">(</span><span class="STRN">"path"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">K.svg.appendChild</span><span class="PUNC">(</span><span class="NAME">F</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">D.attachListeners</span><span class="PUNC">(</span><span class="NAME">F</span><span class="PUNC">,</span><span class="NAME">K</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">D.attachListeners</span><span class="PUNC">(</span><span class="NAME">F</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">g</span><span class="PUNC">(</span><span class="NAME">I</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">d</span><span class="PUNC">:</span><span class="NAME">E</span><span class="PUNC">(</span><span class="NAME">M</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">M</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">stroke</span><span class="PUNC">:</span><span class="STRN">"red"</span><span class="PUNC">,</span><span class="NAME">fill</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">g</span><span class="PUNC">(</span><span class="NAME">G</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">d</span><span class="PUNC">:</span><span class="NAME">E</span><span class="PUNC">(</span><span class="NAME">M</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">M</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">stroke</span><span class="PUNC">:</span><span class="STRN">"blue"</span><span class="PUNC">,</span><span class="NAME">fill</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">g</span><span class="PUNC">(</span><span class="NAME">F</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">d</span><span class="PUNC">:</span><span class="NAME">E</span><span class="PUNC">(</span><span class="NAME">M</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">M</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">stroke</span><span class="PUNC">:</span><span class="STRN">"green"</span><span class="PUNC">,</span><span class="NAME">fill</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">E</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">K</span><span class="PUNC">,</span><span class="NAME">J</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="STRN">"M "</span><span class="PUNC">+</span><span class="NAME">K.x</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">K.y</span><span class="PUNC">+</span><span class="STRN">" L"</span><span class="PUNC">+</span><span class="NAME">J.x</span><span class="PUNC">+</span><span class="STRN">","</span><span class="PUNC">+</span><span class="NAME">J.y</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">d</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">p</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">jsPlumb.CurrentLibrary.hasClass</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">(</span><span class="NAME">p</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">jsPlumb.CurrentLibrary.getElementObject</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">m</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">jsPlumb.CurrentLibrary.getOffset</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">jsPlumb.CurrentLibrary.getPageXY</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">jsPlumb.CurrentLibrary.getClientXY</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">k</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">q</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">;</span><span class="NAME">q.overlayPlacements</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">jsPlumb.jsPlumbUIComponent.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">jsPlumbUtil.EventGenerator.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._over</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">z</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">B</span><span class="PUNC">=</span><span class="NAME">m</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">(</span><span class="NAME">q.canvas</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">(</span><span class="NAME">z</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">D</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">B.left</span><span class="PUNC">,</span><span class="NAME">C</span><span class="PUNC">=</span><span class="NAME">D</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">B.top</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">&&</span><span class="NAME">C</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">&&</span><span class="NAME">u</span><span class="PUNC">&lt;</span><span class="NAME">q.canvas.width</span><span class="PUNC">&&</span><span class="NAME">C</span><span class="PUNC">&lt;</span><span class="NAME">q.canvas.height</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">v</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">v</span><span class="PUNC">&lt;</span><span class="NAME">q.overlayPlacements.length</span><span class="PUNC">;</span><span class="NAME">v</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">w</span><span class="PUNC">=</span><span class="NAME">q.overlayPlacements</span><span class="PUNC">[</span><span class="NAME">v</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">w</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">w</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">&lt;=</span><span class="NAME">u</span><span class="PUNC">&&</span><span class="NAME">w</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">>=</span><span class="NAME">u</span><span class="PUNC">&&</span><span class="NAME">w</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">&lt;=</span><span class="NAME">C</span><span class="PUNC">&&</span><span class="NAME">w</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">>=</span><span class="NAME">C</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">A</span><span class="PUNC">=</span><span class="NAME">q.canvas.getContext</span><span class="PUNC">(</span><span class="STRN">"2d"</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getImageData</span><span class="PUNC">(</span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">A.data</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">!=</span><span class="NUMB">0</span><span class="PUNC">||</span><span class="NAME">A.data</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">!=</span><span class="NUMB">0</span><span class="PUNC">||</span><span class="NAME">A.data</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">!=</span><span class="NUMB">0</span><span class="PUNC">||</span><span class="NAME">A.data</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">!=</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">p</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">v</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">&&</span><span class="NAME">i</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.mousemove</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">z</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">w</span><span class="PUNC">=</span><span class="NAME">f</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">=</span><span class="NAME">document.elementFromPoint</span><span class="PUNC">(</span><span class="NAME">w</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">w</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">=</span><span class="NAME">r</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">,</span><span class="STRN">"_jsPlumb_overlay"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">d</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">,</span><span class="STRN">"_jsPlumb_endpoint"</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="NAME">r</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">,</span><span class="STRN">"_jsPlumb_connector"</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">p</span><span class="PUNC">&&</span><span class="NAME">u</span><span class="PUNC">&&</span><span class="NAME">q._over</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">p</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="NAME">q.fire</span><span class="PUNC">(</span><span class="STRN">"mouseenter"</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">p</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">q._over</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">)</span><span class="PUNC">||</span><span class="PUNC">!</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">y</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">p</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="NAME">q.fire</span><span class="PUNC">(</span><span class="STRN">"mouseexit"</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="NAME">q.fire</span><span class="PUNC">(</span><span class="STRN">"mousemove"</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.click</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">p</span><span class="PUNC">&&</span><span class="NAME">q._over</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">q.fire</span><span class="PUNC">(</span><span class="STRN">"click"</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">s</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.dblclick</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">p</span><span class="PUNC">&&</span><span class="NAME">q._over</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">q.fire</span><span class="PUNC">(</span><span class="STRN">"dblclick"</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">s</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.mousedown</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">q._over</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o</span><span class="PUNC">=</span><span class="KEYW">true</span><span class="PUNC">;</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">m</span><span class="PUNC">(</span><span class="NAME">a</span><span class="PUNC">(</span><span class="NAME">q.canvas</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">q.fire</span><span class="PUNC">(</span><span class="STRN">"mousedown"</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.mouseup</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">;</span><span class="NAME">q.fire</span><span class="PUNC">(</span><span class="STRN">"mouseup"</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.contextmenu</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">p</span><span class="PUNC">&&</span><span class="NAME">q._over</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">&&</span><span class="PUNC">!</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">q.fire</span><span class="PUNC">(</span><span class="STRN">"contextmenu"</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">s</span><span class="PUNC">=</span><span class="KEYW">false</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">c</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">p</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"canvas"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">p._jsPlumb.appendElement</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">,</span><span class="NAME">p.parent</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">o.style.position</span><span class="PUNC">=</span><span class="STRN">"absolute"</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">p</span><span class="PUNC">[</span><span class="STRN">"class"</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.className</span><span class="PUNC">=</span><span class="NAME">p</span><span class="PUNC">[</span><span class="STRN">"class"</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="NAME">p._jsPlumb.getId</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">,</span><span class="NAME">p.uuid</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">p.tooltip</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.setAttribute</span><span class="PUNC">(</span><span class="STRN">"title"</span><span class="PUNC">,</span><span class="NAME">p.tooltip</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">l</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">p</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">k.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">o</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">this.getDisplayElements</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.appendDisplayElement</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">q</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.push</span><span class="PUNC">(</span><span class="NAME">q</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">h</span><span class="PUNC">=</span><span class="NAME">jsPlumb.CanvasConnector</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">l.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">o</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">p.ctx.save</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">jsPlumb.extend</span><span class="PUNC">(</span><span class="NAME">p.ctx</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t.gradient</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">p.createGradient</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">,</span><span class="NAME">p.ctx</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">s</span><span class="PUNC">&lt;</span><span class="NAME">t.gradient.stops.length</span><span class="PUNC">;</span><span class="NAME">s</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">u.addColorStop</span><span class="PUNC">(</span><span class="NAME">t.gradient.stops</span><span class="PUNC">[</span><span class="NAME">s</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">t.gradient.stops</span><span class="PUNC">[</span><span class="NAME">s</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">p.ctx.strokeStyle</span><span class="PUNC">=</span><span class="NAME">u</span><span class="PUNC">}</span><span class="NAME">p._paint</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">p.ctx.restore</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">p</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">=</span><span class="NAME">p._jsPlumb.connectorClass</span><span class="PUNC">+</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">r.cssClass</span><span class="PUNC">||</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">p.canvas</span><span class="PUNC">=</span><span class="NAME">c</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="STRN">"class"</span><span class="PUNC">:</span><span class="NAME">q</span><span class="PUNC">,</span><span class="NAME">_jsPlumb</span><span class="PUNC">:</span><span class="NAME">p._jsPlumb</span><span class="PUNC">,</span><span class="NAME">parent</span><span class="PUNC">:</span><span class="NAME">r.parent</span><span class="PUNC">,</span><span class="NAME">tooltip</span><span class="PUNC">:</span><span class="NAME">r.tooltip</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">p.ctx</span><span class="PUNC">=</span><span class="NAME">p.canvas.getContext</span><span class="PUNC">(</span><span class="STRN">"2d"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">p.appendDisplayElement</span><span class="PUNC">(</span><span class="NAME">p.canvas</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">p.paint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">w</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">jsPlumb.sizeCanvas</span><span class="PUNC">(</span><span class="NAME">p.canvas</span><span class="PUNC">,</span><span class="NAME">w</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">w</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">w</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">w</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">p.getZIndex</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">p.canvas.style.zIndex</span><span class="PUNC">=</span><span class="NAME">p.getZIndex</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t.outlineColor</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">v</span><span class="PUNC">=</span><span class="NAME">t.outlineWidth</span><span class="PUNC">||</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">t.lineWidth</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">strokeStyle</span><span class="PUNC">:</span><span class="NAME">t.outlineColor</span><span class="PUNC">,</span><span class="NAME">lineWidth</span><span class="PUNC">:</span><span class="NAME">s</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">o</span><span class="PUNC">(</span><span class="NAME">w</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">o</span><span class="PUNC">(</span><span class="NAME">w</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">b</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">p</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">;</span><span class="NAME">l.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">q</span><span class="PUNC">=</span><span class="NAME">p._jsPlumb.endpointClass</span><span class="PUNC">+</span><span class="STRN">" "</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">r.cssClass</span><span class="PUNC">||</span><span class="STRN">""</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="STRN">"class"</span><span class="PUNC">:</span><span class="NAME">q</span><span class="PUNC">,</span><span class="NAME">_jsPlumb</span><span class="PUNC">:</span><span class="NAME">p._jsPlumb</span><span class="PUNC">,</span><span class="NAME">parent</span><span class="PUNC">:</span><span class="NAME">r.parent</span><span class="PUNC">,</span><span class="NAME">tooltip</span><span class="PUNC">:</span><span class="NAME">p.tooltip</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">p.canvas</span><span class="PUNC">=</span><span class="NAME">c</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">p.ctx</span><span class="PUNC">=</span><span class="NAME">p.canvas.getContext</span><span class="PUNC">(</span><span class="STRN">"2d"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">p.appendDisplayElement</span><span class="PUNC">(</span><span class="NAME">p.canvas</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.paint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">jsPlumb.sizeCanvas</span><span class="PUNC">(</span><span class="NAME">p.canvas</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">u.outlineColor</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">w</span><span class="PUNC">=</span><span class="NAME">u.outlineWidth</span><span class="PUNC">||</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">u.lineWidth</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">w</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">v</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">strokeStyle</span><span class="PUNC">:</span><span class="NAME">u.outlineColor</span><span class="PUNC">,</span><span class="NAME">lineWidth</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="NAME">p._paint.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Endpoints.canvas.Dot</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">jsPlumb.Endpoints.Dot.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">b.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">q</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">p</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">try</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">catch</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">s.substring</span><span class="PUNC">(</span><span class="NAME">s.length</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">==</span><span class="STRN">"%"</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">s.substring</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">q.defaultOffset</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">q.defaultInnerRadius</span><span class="PUNC">;</span><span class="NAME">u.offset</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">p</span><span class="PUNC">(</span><span class="NAME">u.offset</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">u.innerRadius</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">p</span><span class="PUNC">(</span><span class="NAME">u.innerRadius</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this._paint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">A</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">B</span><span class="PUNC">=</span><span class="NAME">q.canvas.getContext</span><span class="PUNC">(</span><span class="STRN">"2d"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">x.getOrientation</span><span class="PUNC">(</span><span class="NAME">q</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">jsPlumb.extend</span><span class="PUNC">(</span><span class="NAME">B</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t.gradient</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">v</span><span class="PUNC">=</span><span class="NAME">o</span><span class="PUNC">(</span><span class="NAME">t.gradient</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">=</span><span class="NAME">u</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">?</span><span class="NAME">v</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">*</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="NAME">v</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">u</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">?</span><span class="NAME">v</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">*</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="NAME">v</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">z</span><span class="PUNC">=</span><span class="NAME">B.createRadialGradient</span><span class="PUNC">(</span><span class="NAME">A</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">A</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">A</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">A</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">A</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="NAME">y</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">w</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">w</span><span class="PUNC">&lt;</span><span class="NAME">t.gradient.stops.length</span><span class="PUNC">;</span><span class="NAME">w</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">z.addColorStop</span><span class="PUNC">(</span><span class="NAME">t.gradient.stops</span><span class="PUNC">[</span><span class="NAME">w</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">t.gradient.stops</span><span class="PUNC">[</span><span class="NAME">w</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">B.fillStyle</span><span class="PUNC">=</span><span class="NAME">z</span><span class="PUNC">}</span><span class="NAME">B.beginPath</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">B.arc</span><span class="PUNC">(</span><span class="NAME">A</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">A</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">A</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">Math.PI</span><span class="PUNC">*</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">B.closePath</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t.fillStyle</span><span class="PUNC">||</span><span class="NAME">t.gradient</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">B.fill</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t.strokeStyle</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">B.stroke</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Endpoints.canvas.Rectangle</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">p</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">o</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Endpoints.Rectangle.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">b.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._paint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">A</span><span class="PUNC">=</span><span class="NAME">o.canvas.getContext</span><span class="PUNC">(</span><span class="STRN">"2d"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">v.getOrientation</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">jsPlumb.extend</span><span class="PUNC">(</span><span class="NAME">A</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">r.gradient</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">z</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">?</span><span class="NAME">x</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">?</span><span class="NAME">x</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">y</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">?</span><span class="NAME">x</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">?</span><span class="NAME">x</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">?</span><span class="NAME">x</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">?</span><span class="NAME">x</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">q</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">?</span><span class="NAME">x</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">?</span><span class="NAME">x</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">w</span><span class="PUNC">=</span><span class="NAME">A.createLinearGradient</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">z</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">u</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">u</span><span class="PUNC">&lt;</span><span class="NAME">r.gradient.stops.length</span><span class="PUNC">;</span><span class="NAME">u</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">w.addColorStop</span><span class="PUNC">(</span><span class="NAME">r.gradient.stops</span><span class="PUNC">[</span><span class="NAME">u</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">r.gradient.stops</span><span class="PUNC">[</span><span class="NAME">u</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">A.fillStyle</span><span class="PUNC">=</span><span class="NAME">w</span><span class="PUNC">}</span><span class="NAME">A.beginPath</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">A.rect</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">A.closePath</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">r.fillStyle</span><span class="PUNC">||</span><span class="NAME">r.gradient</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">A.fill</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">r.strokeStyle</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">A.stroke</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Endpoints.canvas.Triangle</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">p</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">o</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Endpoints.Triangle.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">b.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._paint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">z</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">z</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">C</span><span class="PUNC">=</span><span class="NAME">z</span><span class="PUNC">[</span><span class="NUMB">3</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">B</span><span class="PUNC">=</span><span class="NAME">z</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">A</span><span class="PUNC">=</span><span class="NAME">z</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">=</span><span class="NAME">o.canvas.getContext</span><span class="PUNC">(</span><span class="STRN">"2d"</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">w</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">v.getOrientation</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">w</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">;</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">C</span><span class="PUNC">;</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NUMB">180</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">w</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">;</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NUMB">90</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">C</span><span class="PUNC">;</span><span class="NAME">t</span><span class="PUNC">=</span><span class="PUNC">-</span><span class="NUMB">90</span><span class="PUNC">}</span><span class="NAME">D.fillStyle</span><span class="PUNC">=</span><span class="NAME">q.fillStyle</span><span class="PUNC">;</span><span class="NAME">D.translate</span><span class="PUNC">(</span><span class="NAME">w</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">D.rotate</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">*</span><span class="NAME">Math.PI</span><span class="PUNC">/</span><span class="NUMB">180</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">D.beginPath</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">D.moveTo</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">D.lineTo</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="NAME">C</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">D.lineTo</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">C</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">D.closePath</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">q.fillStyle</span><span class="PUNC">||</span><span class="NAME">q.gradient</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">D.fill</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">q.strokeStyle</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">D.stroke</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Endpoints.canvas.Image</span><span class="PUNC">=</span><span class="NAME">jsPlumb.Endpoints.Image</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Endpoints.canvas.Blank</span><span class="PUNC">=</span><span class="NAME">jsPlumb.Endpoints.Blank</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Connectors.canvas.Bezier</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">o</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Connectors.Bezier.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">h.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._paint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">q</span><span class="PUNC">,</span><span class="NAME">p</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.ctx.beginPath</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">o.ctx.moveTo</span><span class="PUNC">(</span><span class="NAME">q</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">[</span><span class="NUMB">5</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">o.ctx.bezierCurveTo</span><span class="PUNC">(</span><span class="NAME">q</span><span class="PUNC">[</span><span class="NUMB">8</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">[</span><span class="NUMB">9</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">[</span><span class="NUMB">10</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">[</span><span class="NUMB">11</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">[</span><span class="NUMB">6</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">[</span><span class="NUMB">7</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">o.ctx.stroke</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.createGradient</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">p</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o.ctx.createLinearGradient</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">6</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">7</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">5</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Connectors.canvas.Straight</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">p</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Connectors.Straight.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">h.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._paint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">p.ctx.beginPath</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t.dashstyle</span><span class="PUNC">&&</span><span class="NAME">t.dashstyle.split</span><span class="PUNC">(</span><span class="STRN">" "</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">length</span><span class="PUNC">==</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">v</span><span class="PUNC">=</span><span class="NAME">t.dashstyle.split</span><span class="PUNC">(</span><span class="STRN">" "</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">v.length</span><span class="PUNC">!=</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">v</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="NUMB">2</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">C</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="NAME">v</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">*</span><span class="NAME">t.lineWidth</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">*</span><span class="NAME">t.lineWidth</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">6</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">7</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">5</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">G</span><span class="PUNC">=</span><span class="NAME">jsPlumbUtil.segment</span><span class="PUNC">(</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">5</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">6</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">7</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">=</span><span class="NAME">o</span><span class="PUNC">[</span><span class="NAME">G</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">Math.atan</span><span class="PUNC">(</span><span class="NAME">y</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">z</span><span class="PUNC">=</span><span class="NAME">Math.sqrt</span><span class="PUNC">(</span><span class="NAME">Math.pow</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">6</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">Math.pow</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">7</span><span class="PUNC">]</span><span class="PUNC">-</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">5</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">B</span><span class="PUNC">=</span><span class="NAME">Math.floor</span><span class="PUNC">(</span><span class="NAME">z</span><span class="PUNC">/</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="NAME">C</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">w</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">5</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">A</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">A</span><span class="PUNC">&lt;</span><span class="NAME">B</span><span class="PUNC">;</span><span class="NAME">A</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">p.ctx.moveTo</span><span class="PUNC">(</span><span class="NAME">w</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">w</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">q</span><span class="PUNC">=</span><span class="NAME">w</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">Math.sin</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">C</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">x</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">F</span><span class="PUNC">=</span><span class="NAME">w</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">Math.cos</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">C</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">x</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">E</span><span class="PUNC">=</span><span class="NAME">w</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">Math.sin</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="NAME">C</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">x</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">=</span><span class="NAME">w</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">Math.cos</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">+</span><span class="NAME">C</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">x</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">p.ctx.lineTo</span><span class="PUNC">(</span><span class="NAME">q</span><span class="PUNC">,</span><span class="NAME">F</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">w</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="NAME">E</span><span class="PUNC">,</span><span class="NAME">D</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="NAME">p.ctx.moveTo</span><span class="PUNC">(</span><span class="NAME">w</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">w</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">p.ctx.lineTo</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">6</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">7</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">p.ctx.moveTo</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">5</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">p.ctx.lineTo</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">6</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">7</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">p.ctx.stroke</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.createGradient</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">q.createLinearGradient</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">5</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">6</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">7</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Connectors.canvas.Flowchart</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">o</span><span class="PUNC">=</span><span class="KEYW">this</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Connectors.Flowchart.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">h.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this._paint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.ctx.beginPath</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">o.ctx.moveTo</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">5</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">p</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">p</span><span class="PUNC">&lt;</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">8</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">p</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o.ctx.lineTo</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">9</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">p</span><span class="PUNC">*</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">10</span><span class="PUNC">+</span><span class="PUNC">(</span><span class="NAME">p</span><span class="PUNC">*</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">o.ctx.lineTo</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">6</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">[</span><span class="NUMB">7</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">o.ctx.stroke</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">this.createGradient</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">q</span><span class="PUNC">,</span><span class="NAME">p</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">p.createLinearGradient</span><span class="PUNC">(</span><span class="NAME">q</span><span class="PUNC">[</span><span class="NUMB">4</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">[</span><span class="NUMB">5</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">[</span><span class="NUMB">6</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">[</span><span class="NUMB">7</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Overlays.canvas.Label</span><span class="PUNC">=</span><span class="NAME">jsPlumb.Overlays.Label</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Overlays.canvas.Custom</span><span class="PUNC">=</span><span class="NAME">jsPlumb.Overlays.Custom</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">g</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">jsPlumb.jsPlumbUIComponent.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">p</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">p.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">g.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">this.paint</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">s.ctx</span><span class="PUNC">;</span><span class="NAME">r.lineWidth</span><span class="PUNC">=</span><span class="NAME">q</span><span class="PUNC">;</span><span class="NAME">r.beginPath</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">r.moveTo</span><span class="PUNC">(</span><span class="NAME">u.hxy.x</span><span class="PUNC">,</span><span class="NAME">u.hxy.y</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">r.lineTo</span><span class="PUNC">(</span><span class="NAME">u.tail</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">u.tail</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">y</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">r.lineTo</span><span class="PUNC">(</span><span class="NAME">u.cxy.x</span><span class="PUNC">,</span><span class="NAME">u.cxy.y</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">r.lineTo</span><span class="PUNC">(</span><span class="NAME">u.tail</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">u.tail</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">y</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">r.lineTo</span><span class="PUNC">(</span><span class="NAME">u.hxy.x</span><span class="PUNC">,</span><span class="NAME">u.hxy.y</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">r.closePath</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">r.strokeStyle</span><span class="PUNC">=</span><span class="NAME">v</span><span class="PUNC">;</span><span class="NAME">r.stroke</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">r.fillStyle</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">;</span><span class="NAME">r.fill</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Overlays.canvas.Arrow</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">e.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">jsPlumb.Overlays.Arrow</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Overlays.canvas.PlainArrow</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">e.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">jsPlumb.Overlays.PlainArrow</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.Overlays.canvas.Diamond</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">e.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NAME">jsPlumb.Overlays.Diamond</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">Array.prototype.indexOf</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">Array.prototype.indexOf</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">w</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">x</span><span class="PUNC">=</span><span class="PUNC">+</span><span class="NAME">t</span><span class="PUNC">||</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">this.length</span><span class="PUNC">;</span><span class="NAME">x</span><span class="PUNC">&lt;</span><span class="NAME">u</span><span class="PUNC">;</span><span class="NAME">x</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">[</span><span class="NAME">x</span><span class="PUNC">]</span><span class="PUNC">===</span><span class="NAME">w</span><span class="PUNC">||</span><span class="NAME">y</span><span class="PUNC">&&</span><span class="KEYW">this</span><span class="PUNC">[</span><span class="NAME">x</span><span class="PUNC">]</span><span class="PUNC">==</span><span class="NAME">w</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">x</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">c</span><span class="PUNC">;</span><span class="NAME">YUI</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">use</span><span class="PUNC">(</span><span class="STRN">"node"</span><span class="PUNC">,</span><span class="STRN">"dd"</span><span class="PUNC">,</span><span class="STRN">"anim"</span><span class="PUNC">,</span><span class="STRN">"node-event-simulate"</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">c</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">;</span><span class="NAME">c.on</span><span class="PUNC">(</span><span class="STRN">"domready"</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">jsPlumb.init</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">v</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">s</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="NAME">v</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">}</span><span class="NAME">s.push</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">g</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="STRN">"drag:mouseDown"</span><span class="PUNC">,</span><span class="STRN">"drag:afterMouseDown"</span><span class="PUNC">,</span><span class="STRN">"drag:mouseup"</span><span class="PUNC">,</span><span class="STRN">"drag:align"</span><span class="PUNC">,</span><span class="STRN">"drag:removeHandle"</span><span class="PUNC">,</span><span class="STRN">"drag:addHandle"</span><span class="PUNC">,</span><span class="STRN">"drag:removeInvalid"</span><span class="PUNC">,</span><span class="STRN">"drag:addInvalid"</span><span class="PUNC">,</span><span class="STRN">"drag:start"</span><span class="PUNC">,</span><span class="STRN">"drag:end"</span><span class="PUNC">,</span><span class="STRN">"drag:drag"</span><span class="PUNC">,</span><span class="STRN">"drag:over"</span><span class="PUNC">,</span><span class="STRN">"drag:enter"</span><span class="PUNC">,</span><span class="STRN">"drag:exit"</span><span class="PUNC">,</span><span class="STRN">"drag:drophit"</span><span class="PUNC">,</span><span class="STRN">"drag:dropmiss"</span><span class="PUNC">,</span><span class="STRN">"drop:over"</span><span class="PUNC">,</span><span class="STRN">"drop:enter"</span><span class="PUNC">,</span><span class="STRN">"drop:exit"</span><span class="PUNC">,</span><span class="STRN">"drop:hit"</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">m</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="STRN">"tween"</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">try</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">s.apply</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">arguments</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">catch</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">u</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">g.indexOf</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">==</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">u</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">u</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">v</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">x.indexOf</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">!=</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">r</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">[</span><span class="NAME">v</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">s.on</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">d</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">p</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">k</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">t.get</span><span class="PUNC">(</span><span class="STRN">"id"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">p</span><span class="PUNC">[</span><span class="NAME">u</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">s.hoverClass</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">t.addClass</span><span class="PUNC">(</span><span class="NAME">s.hoverClass</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="NAME">t.removeClass</span><span class="PUNC">(</span><span class="NAME">s.hoverClass</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="NAME">b</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">u</span><span class="PUNC">[</span><span class="NAME">s</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">s</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">u</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">s.getAttribute</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="NAME">s</span><span class="PUNC">=</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">==</span><span class="STRN">"string"</span><span class="PUNC">?</span><span class="NAME">c.one</span><span class="PUNC">(</span><span class="STRN">"#"</span><span class="PUNC">+</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="NAME">t._node</span><span class="PUNC">?</span><span class="NAME">t</span><span class="PUNC">:</span><span class="NAME">c.one</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">jsPlumb.CurrentLibrary</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">addClass</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">jsPlumb.CurrentLibrary.getElementObject</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">addClass</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">animate</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">w</span><span class="PUNC">=</span><span class="NAME">b</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="NAME">node</span><span class="PUNC">:</span><span class="NAME">v</span><span class="PUNC">,</span><span class="NAME">to</span><span class="PUNC">:</span><span class="NAME">u</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">=</span><span class="NAME">o</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">,</span><span class="STRN">"id"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">w.tween</span><span class="PUNC">=</span><span class="NAME">jsPlumb.wrap</span><span class="PUNC">(</span><span class="NAME">u.tween</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">jsPlumb.repaint</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">c.Anim</span><span class="PUNC">(</span><span class="NAME">w</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">w</span><span class="PUNC">,</span><span class="NAME">m</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">s.run</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">appendElement</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">a</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">append</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">bind</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">a</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">on</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">dragEvents</span><span class="PUNC">:</span><span class="PUNC">{</span><span class="NAME">start</span><span class="PUNC">:</span><span class="STRN">"drag:start"</span><span class="PUNC">,</span><span class="NAME">stop</span><span class="PUNC">:</span><span class="STRN">"drag:end"</span><span class="PUNC">,</span><span class="NAME">drag</span><span class="PUNC">:</span><span class="STRN">"drag:drag"</span><span class="PUNC">,</span><span class="NAME">step</span><span class="PUNC">:</span><span class="STRN">"step"</span><span class="PUNC">,</span><span class="NAME">over</span><span class="PUNC">:</span><span class="STRN">"drop:enter"</span><span class="PUNC">,</span><span class="NAME">out</span><span class="PUNC">:</span><span class="STRN">"drop:exit"</span><span class="PUNC">,</span><span class="NAME">drop</span><span class="PUNC">:</span><span class="STRN">"drop:hit"</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">extend</span><span class="PUNC">:</span><span class="NAME">b</span><span class="PUNC">,</span><span class="NAME">getAttribute</span><span class="PUNC">:</span><span class="NAME">o</span><span class="PUNC">,</span><span class="NAME">getClientXY</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="NAME">s.clientX</span><span class="PUNC">,</span><span class="NAME">s.clientY</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getDragObject</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">drag</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">i</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">drag.el</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getDragScope</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">jsPlumb.getId</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">q</span><span class="PUNC">[</span><span class="NAME">u</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">s.scope</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getDropEvent</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getDropScope</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">jsPlumb.getId</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">h</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getDOMElement</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">==</span><span class="STRN">"String"</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">document.getElementById</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">s._node</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">s._node</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getElementObject</span><span class="PUNC">:</span><span class="NAME">a</span><span class="PUNC">,</span><span class="NAME">getOffset</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">c.DOM.getXY</span><span class="PUNC">(</span><span class="NAME">s._node</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">{</span><span class="NAME">left</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">top</span><span class="PUNC">:</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getOriginalEvent</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">s._event</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getPageXY</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="NAME">s.pageX</span><span class="PUNC">,</span><span class="NAME">s.pageY</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getParent</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">jsPlumb.CurrentLibrary.getElementObject</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">get</span><span class="PUNC">(</span><span class="STRN">"parentNode"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getScrollLeft</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getScrollTop</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getSelector</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">c.all</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">u</span><span class="PUNC">&&</span><span class="NAME">u._nodes</span><span class="PUNC">?</span><span class="NAME">u._nodes</span><span class="PUNC">:</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getSize</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="NAME">s._node.offsetWidth</span><span class="PUNC">,</span><span class="NAME">s._node.offsetHeight</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getTagName</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">jsPlumb.CurrentLibrary.getElementObject</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">&&</span><span class="NAME">t._node</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">?</span><span class="NAME">t._node.tagName</span><span class="PUNC">:</span><span class="KEYW">null</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">getUIPosition</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">||</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">v</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">currentTarget.el._node</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">c.DOM.getXY</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">{</span><span class="NAME">left</span><span class="PUNC">:</span><span class="NAME">u</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">/</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">top</span><span class="PUNC">:</span><span class="NAME">u</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">/</span><span class="NAME">t</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">hasClass</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">t.hasClass</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">initDraggable</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">w</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">f</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">=</span><span class="NAME">jsPlumb.getId</span><span class="PUNC">(</span><span class="NAME">w</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">u.node</span><span class="PUNC">=</span><span class="STRN">"#"</span><span class="PUNC">+</span><span class="NAME">y</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">c.DD.Drag</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">s.el</span><span class="PUNC">=</span><span class="NAME">w</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">v</span><span class="PUNC">=</span><span class="NAME">t.scope</span><span class="PUNC">||</span><span class="NAME">jsPlumb.Defaults.Scope</span><span class="PUNC">;</span><span class="NAME">s.scope</span><span class="PUNC">=</span><span class="NAME">v</span><span class="PUNC">;</span><span class="NAME">e</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">q</span><span class="PUNC">[</span><span class="NAME">y</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">;</span><span class="NAME">n</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">g</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">initDroppable</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">w</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">f</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">=</span><span class="NAME">jsPlumb.getId</span><span class="PUNC">(</span><span class="NAME">w</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">u.node</span><span class="PUNC">=</span><span class="STRN">"#"</span><span class="PUNC">+</span><span class="NAME">x</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">=</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">c.DD.Drop</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">p</span><span class="PUNC">[</span><span class="NAME">x</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">;</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">b</span><span class="PUNC">(</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">v</span><span class="PUNC">=</span><span class="NAME">t.scope</span><span class="PUNC">||</span><span class="NAME">jsPlumb.Defaults.Scope</span><span class="PUNC">;</span><span class="NAME">h</span><span class="PUNC">[</span><span class="NAME">x</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">v</span><span class="PUNC">;</span><span class="NAME">t</span><span class="PUNC">[</span><span class="STRN">"drop:enter"</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">jsPlumb.wrap</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">[</span><span class="STRN">"drop:enter"</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">y</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">y.drag.scope</span><span class="PUNC">!==</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">}</span><span class="NAME">k</span><span class="PUNC">(</span><span class="NAME">w</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">t</span><span class="PUNC">[</span><span class="STRN">"drop:exit"</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">jsPlumb.wrap</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">[</span><span class="STRN">"drop:exit"</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">y</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">k</span><span class="PUNC">(</span><span class="NAME">w</span><span class="PUNC">,</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">t</span><span class="PUNC">[</span><span class="STRN">"drop:hit"</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">jsPlumb.wrap</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">[</span><span class="STRN">"drop:hit"</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">y</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">y.drag.scope</span><span class="PUNC">!==</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">}</span><span class="NAME">k</span><span class="PUNC">(</span><span class="NAME">w</span><span class="PUNC">,</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">g</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">isAlreadyDraggable</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">a</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">s.hasClass</span><span class="PUNC">(</span><span class="STRN">"yui3-dd-draggable"</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">isDragSupported</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">isDropSupported</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">removeClass</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">jsPlumb.CurrentLibrary.getElementObject</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">removeClass</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">removeElement</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">a</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">remove</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setAttribute</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">u.setAttribute</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setDraggable</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">v</span><span class="PUNC">=</span><span class="NAME">jsPlumb.getId</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">q</span><span class="PUNC">[</span><span class="NAME">v</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">s.set</span><span class="PUNC">(</span><span class="STRN">"lock"</span><span class="PUNC">,</span><span class="PUNC">!</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setDragScope</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">v</span><span class="PUNC">=</span><span class="NAME">jsPlumb.getId</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">q</span><span class="PUNC">[</span><span class="NAME">v</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">s.scope</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">setOffset</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">a</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">s.set</span><span class="PUNC">(</span><span class="STRN">"top"</span><span class="PUNC">,</span><span class="NAME">t.top</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">s.set</span><span class="PUNC">(</span><span class="STRN">"left"</span><span class="PUNC">,</span><span class="NAME">t.left</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">stopDrag</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">c.DD.DDM.stopDrag</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">trigger</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">s.stopPropagation</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">a</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">simulate</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">pageX</span><span class="PUNC">:</span><span class="NAME">s.pageX</span><span class="PUNC">,</span><span class="NAME">pageY</span><span class="PUNC">:</span><span class="NAME">s.pageY</span><span class="PUNC">,</span><span class="NAME">clientX</span><span class="PUNC">:</span><span class="NAME">s.clientX</span><span class="PUNC">,</span><span class="NAME">clientY</span><span class="PUNC">:</span><span class="NAME">s.clientY</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">unbind</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">a</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">detach</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="STRN">"undefined"</span><span class="PUNC">==</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">Math.sgn</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">Math.sgn</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">==</span><span class="NAME">l</span><span class="PUNC">?</span><span class="NUMB">0</span><span class="PUNC">:</span><span class="NUMB">0</span><span class="PUNC">&lt;</span><span class="NAME">l</span><span class="PUNC">?</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">d</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">subtract</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">:</span><span class="NAME">m.x</span><span class="PUNC">-</span><span class="NAME">l.x</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">:</span><span class="NAME">m.y</span><span class="PUNC">-</span><span class="NAME">l.y</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">dotProduct</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">m.x</span><span class="PUNC">*</span><span class="NAME">l.x</span><span class="PUNC">+</span><span class="NAME">m.y</span><span class="PUNC">*</span><span class="NAME">l.y</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">square</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">Math.sqrt</span><span class="PUNC">(</span><span class="NAME">l.x</span><span class="PUNC">*</span><span class="NAME">l.x</span><span class="PUNC">+</span><span class="NAME">l.y</span><span class="PUNC">*</span><span class="NAME">l.y</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">scale</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">:</span><span class="NAME">m.x</span><span class="PUNC">*</span><span class="NAME">l</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">:</span><span class="NAME">m.y</span><span class="PUNC">*</span><span class="NAME">l</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">f</span><span class="PUNC">=</span><span class="NAME">Math.pow</span><span class="PUNC">(</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="PUNC">-</span><span class="NUMB">65</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">h</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">y</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">t</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">=</span><span class="NAME">x.length</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">v</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">w</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">p</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NUMB">0.6</span><span class="PUNC">,</span><span class="NUMB">0.3</span><span class="PUNC">,</span><span class="NUMB">0.1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NUMB">0.4</span><span class="PUNC">,</span><span class="NUMB">0.6</span><span class="PUNC">,</span><span class="NUMB">0.6</span><span class="PUNC">,</span><span class="NUMB">0.4</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="PUNC">[</span><span class="NUMB">0.1</span><span class="PUNC">,</span><span class="NUMB">0.3</span><span class="PUNC">,</span><span class="NUMB">0.6</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">u</span><span class="PUNC">&lt;=</span><span class="NAME">v</span><span class="PUNC">;</span><span class="NAME">u</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">s</span><span class="PUNC">[</span><span class="NAME">u</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">d.subtract</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">[</span><span class="NAME">u</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">u</span><span class="PUNC">&lt;=</span><span class="NAME">v</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NAME">u</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">w</span><span class="PUNC">[</span><span class="NAME">u</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">d.subtract</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">[</span><span class="NAME">u</span><span class="PUNC">+</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">[</span><span class="NAME">u</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">w</span><span class="PUNC">[</span><span class="NAME">u</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">d.scale</span><span class="PUNC">(</span><span class="NAME">w</span><span class="PUNC">[</span><span class="NAME">u</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NUMB">3</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">u</span><span class="PUNC">&lt;=</span><span class="NAME">v</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NAME">u</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">m</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">m</span><span class="PUNC">&lt;=</span><span class="NAME">v</span><span class="PUNC">;</span><span class="NAME">m</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">p</span><span class="PUNC">[</span><span class="NAME">u</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">p</span><span class="PUNC">[</span><span class="NAME">u</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">p</span><span class="PUNC">[</span><span class="NAME">u</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">m</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">d.dotProduct</span><span class="PUNC">(</span><span class="NAME">w</span><span class="PUNC">[</span><span class="NAME">u</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">[</span><span class="NAME">m</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">u</span><span class="PUNC">&lt;=</span><span class="NAME">r</span><span class="PUNC">;</span><span class="NAME">u</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">q</span><span class="PUNC">[</span><span class="NAME">u</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">q</span><span class="PUNC">[</span><span class="NAME">u</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">q</span><span class="PUNC">[</span><span class="NAME">u</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">y</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">q</span><span class="PUNC">[</span><span class="NAME">u</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">x</span><span class="PUNC">=</span><span class="NAME">parseFloat</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NAME">r</span><span class="PUNC">}</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">v</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">s</span><span class="PUNC">&lt;=</span><span class="NAME">v</span><span class="PUNC">+</span><span class="NAME">r</span><span class="PUNC">;</span><span class="NAME">s</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">-</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">w</span><span class="PUNC">=</span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">u</span><span class="PUNC">&lt;=</span><span class="NAME">w</span><span class="PUNC">;</span><span class="NAME">u</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">j</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">-</span><span class="NAME">u</span><span class="PUNC">;</span><span class="NAME">q</span><span class="PUNC">[</span><span class="NAME">u</span><span class="PUNC">+</span><span class="NAME">j</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">y</span><span class="PUNC">=</span><span class="NAME">q</span><span class="PUNC">[</span><span class="NAME">u</span><span class="PUNC">+</span><span class="NAME">j</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">y</span><span class="PUNC">+</span><span class="NAME">p</span><span class="PUNC">[</span><span class="NAME">j</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">u</span><span class="PUNC">]</span><span class="PUNC">*</span><span class="NAME">o</span><span class="PUNC">[</span><span class="NAME">j</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">u</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="NAME">v</span><span class="PUNC">=</span><span class="NAME">x.length</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NAME">q</span><span class="PUNC">=</span><span class="NAME">a</span><span class="PUNC">(</span><span class="NAME">q</span><span class="PUNC">,</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">v</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">d.subtract</span><span class="PUNC">(</span><span class="NAME">y</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">p</span><span class="PUNC">=</span><span class="NAME">d.square</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">u</span><span class="PUNC">&lt;</span><span class="NAME">q</span><span class="PUNC">;</span><span class="NAME">u</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">d.subtract</span><span class="PUNC">(</span><span class="NAME">y</span><span class="PUNC">,</span><span class="NAME">k</span><span class="PUNC">(</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">u</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">d.square</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">&lt;</span><span class="NAME">p</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">p</span><span class="PUNC">=</span><span class="NAME">r</span><span class="PUNC">;</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">u</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">d.subtract</span><span class="PUNC">(</span><span class="NAME">y</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">[</span><span class="NAME">v</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">d.square</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">&lt;</span><span class="NAME">p</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">p</span><span class="PUNC">=</span><span class="NAME">r</span><span class="PUNC">;</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="PUNC">{</span><span class="NAME">location</span><span class="PUNC">:</span><span class="NAME">o</span><span class="PUNC">,</span><span class="NAME">distance</span><span class="PUNC">:</span><span class="NAME">p</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">a</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">,</span><span class="NAME">B</span><span class="PUNC">,</span><span class="NAME">x</span><span class="PUNC">,</span><span class="NAME">z</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">v</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">w</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">A</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">;</span><span class="NAME">y</span><span class="PUNC">=</span><span class="NAME">Math.sgn</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">y</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">q</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NAME">q</span><span class="PUNC">&lt;=</span><span class="NAME">B</span><span class="PUNC">;</span><span class="NAME">q</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">Math.sgn</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">[</span><span class="NAME">q</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">y</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">s</span><span class="PUNC">!=</span><span class="NAME">y</span><span class="PUNC">&&</span><span class="NAME">u</span><span class="PUNC">++</span><span class="PUNC">;</span><span class="NAME">y</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">}</span><span class="KEYW">switch</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">:</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">:</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">z</span><span class="PUNC">>=</span><span class="NUMB">64</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">x</span><span class="PUNC">+</span><span class="NAME">C</span><span class="PUNC">[</span><span class="NAME">B</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">x</span><span class="PUNC">)</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">}</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">p</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">=</span><span class="NAME">C</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">y</span><span class="PUNC">-</span><span class="NAME">C</span><span class="PUNC">[</span><span class="NAME">B</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">y</span><span class="PUNC">;</span><span class="NAME">y</span><span class="PUNC">=</span><span class="NAME">C</span><span class="PUNC">[</span><span class="NAME">B</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">x</span><span class="PUNC">-</span><span class="NAME">C</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">x</span><span class="PUNC">;</span><span class="NAME">q</span><span class="PUNC">=</span><span class="NAME">C</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">x</span><span class="PUNC">*</span><span class="NAME">C</span><span class="PUNC">[</span><span class="NAME">B</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">y</span><span class="PUNC">-</span><span class="NAME">C</span><span class="PUNC">[</span><span class="NAME">B</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">x</span><span class="PUNC">*</span><span class="NAME">C</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">y</span><span class="PUNC">;</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">max_distance_below</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">p</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NAME">p</span><span class="PUNC">&lt;</span><span class="NAME">B</span><span class="PUNC">;</span><span class="NAME">p</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">u</span><span class="PUNC">*</span><span class="NAME">C</span><span class="PUNC">[</span><span class="NAME">p</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">x</span><span class="PUNC">+</span><span class="NAME">y</span><span class="PUNC">*</span><span class="NAME">C</span><span class="PUNC">[</span><span class="NAME">p</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">y</span><span class="PUNC">+</span><span class="NAME">q</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">></span><span class="NAME">s</span><span class="PUNC">?</span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">r</span><span class="PUNC">:</span><span class="NAME">r</span><span class="PUNC">&lt;</span><span class="NAME">max_distance_below</span><span class="PUNC">&&</span><span class="PUNC">(</span><span class="NAME">max_distance_below</span><span class="PUNC">=</span><span class="NAME">r</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">p</span><span class="PUNC">=</span><span class="NAME">y</span><span class="PUNC">;</span><span class="NAME">s</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">*</span><span class="PUNC">(</span><span class="NAME">q</span><span class="PUNC">-</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">p</span><span class="PUNC">*</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">/</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">*</span><span class="NAME">p</span><span class="PUNC">-</span><span class="NAME">u</span><span class="PUNC">*</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">p</span><span class="PUNC">=</span><span class="NAME">y</span><span class="PUNC">;</span><span class="NAME">y</span><span class="PUNC">=</span><span class="NAME">q</span><span class="PUNC">-</span><span class="NAME">max_distance_below</span><span class="PUNC">;</span><span class="NAME">u</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">*</span><span class="NAME">y</span><span class="PUNC">-</span><span class="NAME">p</span><span class="PUNC">*</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">/</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">*</span><span class="NAME">p</span><span class="PUNC">-</span><span class="NAME">u</span><span class="PUNC">*</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">y</span><span class="PUNC">=</span><span class="NAME">Math.min</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">Math.max</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">,</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">y</span><span class="PUNC">&lt;</span><span class="NAME">f</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">A</span><span class="PUNC">=</span><span class="NAME">C</span><span class="PUNC">[</span><span class="NAME">B</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">x</span><span class="PUNC">-</span><span class="NAME">C</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">x</span><span class="PUNC">;</span><span class="NAME">t</span><span class="PUNC">=</span><span class="NAME">C</span><span class="PUNC">[</span><span class="NAME">B</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">y</span><span class="PUNC">-</span><span class="NAME">C</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">y</span><span class="PUNC">;</span><span class="NAME">x</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">+</span><span class="NUMB">1</span><span class="PUNC">*</span><span class="PUNC">(</span><span class="NAME">A</span><span class="PUNC">*</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">y</span><span class="PUNC">-</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">-</span><span class="NAME">t</span><span class="PUNC">*</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">x</span><span class="PUNC">-</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">/</span><span class="PUNC">(</span><span class="NAME">A</span><span class="PUNC">*</span><span class="NUMB">0</span><span class="PUNC">-</span><span class="NAME">t</span><span class="PUNC">*</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="NAME">k</span><span class="PUNC">(</span><span class="NAME">C</span><span class="PUNC">,</span><span class="NAME">B</span><span class="PUNC">,</span><span class="NUMB">0.5</span><span class="PUNC">,</span><span class="NAME">v</span><span class="PUNC">,</span><span class="NAME">w</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">C</span><span class="PUNC">=</span><span class="NAME">a</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">,</span><span class="NAME">B</span><span class="PUNC">,</span><span class="NAME">A</span><span class="PUNC">,</span><span class="NAME">z</span><span class="PUNC">+</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">B</span><span class="PUNC">=</span><span class="NAME">a</span><span class="PUNC">(</span><span class="NAME">w</span><span class="PUNC">,</span><span class="NAME">B</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">,</span><span class="NAME">z</span><span class="PUNC">+</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">z</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">z</span><span class="PUNC">&lt;</span><span class="NAME">C</span><span class="PUNC">;</span><span class="NAME">z</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">[</span><span class="NAME">z</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">A</span><span class="PUNC">[</span><span class="NAME">z</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">z</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">z</span><span class="PUNC">&lt;</span><span class="NAME">B</span><span class="PUNC">;</span><span class="NAME">z</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">[</span><span class="NAME">z</span><span class="PUNC">+</span><span class="NAME">C</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">t</span><span class="PUNC">[</span><span class="NAME">z</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">C</span><span class="PUNC">+</span><span class="NAME">B</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">k</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">,</span><span class="NAME">p</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">o</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">&lt;=</span><span class="NAME">l</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">m</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NAME">m</span><span class="PUNC">&lt;=</span><span class="NAME">l</span><span class="PUNC">;</span><span class="NAME">m</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">&lt;=</span><span class="NAME">l</span><span class="PUNC">-</span><span class="NAME">m</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">o</span><span class="PUNC">[</span><span class="NAME">m</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">[</span><span class="NAME">m</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">o</span><span class="PUNC">[</span><span class="NAME">m</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">]</span><span class="PUNC">||</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">[</span><span class="NAME">m</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">o</span><span class="PUNC">[</span><span class="NAME">m</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">x</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">-</span><span class="NAME">p</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">o</span><span class="PUNC">[</span><span class="NAME">m</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">x</span><span class="PUNC">+</span><span class="NAME">p</span><span class="PUNC">*</span><span class="NAME">o</span><span class="PUNC">[</span><span class="NAME">m</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">+</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">x</span><span class="PUNC">;</span><span class="NAME">o</span><span class="PUNC">[</span><span class="NAME">m</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">y</span><span class="PUNC">=</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">-</span><span class="NAME">p</span><span class="PUNC">)</span><span class="PUNC">*</span><span class="NAME">o</span><span class="PUNC">[</span><span class="NAME">m</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">y</span><span class="PUNC">+</span><span class="NAME">p</span><span class="PUNC">*</span><span class="NAME">o</span><span class="PUNC">[</span><span class="NAME">m</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">+</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">y</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">q</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">&lt;=</span><span class="NAME">l</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">q</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">o</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">!=</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">&lt;=</span><span class="NAME">l</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">n</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">o</span><span class="PUNC">[</span><span class="NAME">l</span><span class="PUNC">-</span><span class="NAME">r</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NAME">r</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">o</span><span class="PUNC">[</span><span class="NAME">l</span><span class="PUNC">]</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">g</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">e</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">=</span><span class="NAME">g</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">s</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">p</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">u</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">u</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">-</span><span class="NAME">u</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">x</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">w</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">w</span><span class="PUNC">&lt;</span><span class="NAME">u.length</span><span class="PUNC">;</span><span class="NAME">w</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">=</span><span class="NAME">x</span><span class="PUNC">*</span><span class="NAME">u</span><span class="PUNC">[</span><span class="NAME">w</span><span class="PUNC">]</span><span class="PUNC">(</span><span class="NAME">v</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">x</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">s.push</span><span class="PUNC">(</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">Math.pow</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">r</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">&lt;</span><span class="NAME">t</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">l</span><span class="PUNC">=</span><span class="PUNC">[</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">p</span><span class="PUNC">(</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="NAME">m</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">m</span><span class="PUNC">&lt;</span><span class="NAME">t</span><span class="PUNC">-</span><span class="NAME">r</span><span class="PUNC">;</span><span class="NAME">m</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">l.push</span><span class="PUNC">(</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">q</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">m</span><span class="PUNC">&lt;</span><span class="NAME">r</span><span class="PUNC">;</span><span class="NAME">m</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">l.push</span><span class="PUNC">(</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">s.push</span><span class="PUNC">(</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">o</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="NAME">s.push</span><span class="PUNC">(</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">u</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">Math.pow</span><span class="PUNC">(</span><span class="NUMB">1</span><span class="PUNC">-</span><span class="NAME">u</span><span class="PUNC">,</span><span class="NAME">t</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">g</span><span class="PUNC">[</span><span class="NAME">t</span><span class="PUNC">]</span><span class="PUNC">=</span><span class="NAME">s</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">s</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">c</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">p</span><span class="PUNC">=</span><span class="NAME">e</span><span class="PUNC">(</span><span class="NAME">m.length</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">q</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="NAME">o</span><span class="PUNC">&lt;</span><span class="NAME">m.length</span><span class="PUNC">;</span><span class="NAME">o</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">q</span><span class="PUNC">=</span><span class="NAME">q</span><span class="PUNC">+</span><span class="NAME">m</span><span class="PUNC">[</span><span class="NAME">o</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">x</span><span class="PUNC">*</span><span class="NAME">p</span><span class="PUNC">[</span><span class="NAME">o</span><span class="PUNC">]</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">+</span><span class="NAME">m</span><span class="PUNC">[</span><span class="NAME">o</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">y</span><span class="PUNC">*</span><span class="NAME">p</span><span class="PUNC">[</span><span class="NAME">o</span><span class="PUNC">]</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">:</span><span class="NAME">q</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">:</span><span class="NAME">n</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">b</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">,</span><span class="NAME">p</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">q</span><span class="PUNC">=</span><span class="NAME">c</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">p</span><span class="PUNC">></span><span class="NUMB">0</span><span class="PUNC">?</span><span class="NUMB">1</span><span class="PUNC">:</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">r</span><span class="PUNC">=</span><span class="KEYW">null</span><span class="PUNC">;</span><span class="NAME">n</span><span class="PUNC">&lt;</span><span class="NAME">Math.abs</span><span class="PUNC">(</span><span class="NAME">p</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">l</span><span class="PUNC">+</span><span class="NUMB">0.005</span><span class="PUNC">*</span><span class="NAME">o</span><span class="PUNC">;</span><span class="NAME">r</span><span class="PUNC">=</span><span class="NAME">c</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">+</span><span class="NAME">Math.sqrt</span><span class="PUNC">(</span><span class="NAME">Math.pow</span><span class="PUNC">(</span><span class="NAME">r.x</span><span class="PUNC">-</span><span class="NAME">q.x</span><span class="PUNC">,</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="NAME">Math.pow</span><span class="PUNC">(</span><span class="NAME">r.y</span><span class="PUNC">-</span><span class="NAME">q.y</span><span class="PUNC">,</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">q</span><span class="PUNC">=</span><span class="NAME">r</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="PUNC">{</span><span class="NAME">point</span><span class="PUNC">:</span><span class="NAME">r</span><span class="PUNC">,</span><span class="NAME">location</span><span class="PUNC">:</span><span class="NAME">l</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">=</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">c</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">p</span><span class="PUNC">=</span><span class="NAME">c</span><span class="PUNC">(</span><span class="NAME">m.slice</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NAME">m.length</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">p.y</span><span class="PUNC">-</span><span class="NAME">o.y</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">p.x</span><span class="PUNC">-</span><span class="NAME">o.x</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">?</span><span class="NAME">Infinity</span><span class="PUNC">:</span><span class="NAME">Math.atan</span><span class="PUNC">(</span><span class="NAME">n</span><span class="PUNC">/</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="NAME">window.jsBezier</span><span class="PUNC">=</span><span class="PUNC">{</span><span class="NAME">distanceFromCurve</span><span class="PUNC">:</span><span class="NAME">h</span><span class="PUNC">,</span><span class="NAME">gradientAtPoint</span><span class="PUNC">:</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">gradientAtPointAlongCurveFrom</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">b</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">l.location</span><span class="PUNC">></span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">l.location</span><span class="PUNC">=</span><span class="NUMB">1</span><span class="PUNC">}</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">l.location</span><span class="PUNC">&lt;</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">l.location</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">}</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">,</span><span class="NAME">l.location</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">nearestPointOnCurve</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">h</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">{</span><span class="NAME">point</span><span class="PUNC">:</span><span class="NAME">k</span><span class="PUNC">(</span><span class="NAME">l</span><span class="PUNC">,</span><span class="NAME">l.length</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="NAME">n.location</span><span class="PUNC">,</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">location</span><span class="PUNC">:</span><span class="NAME">n.location</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">pointOnCurve</span><span class="PUNC">:</span><span class="NAME">c</span><span class="PUNC">,</span><span class="NAME">pointAlongCurveFrom</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">b</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">point</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">perpendicularToCurveAt</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">l</span><span class="PUNC">=</span><span class="NAME">b</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">,</span><span class="NAME">o</span><span class="PUNC">==</span><span class="KEYW">null</span><span class="PUNC">?</span><span class="NUMB">0</span><span class="PUNC">:</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">m</span><span class="PUNC">=</span><span class="NAME">i</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">,</span><span class="NAME">l.location</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">o</span><span class="PUNC">=</span><span class="NAME">Math.atan</span><span class="PUNC">(</span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">/</span><span class="NAME">m</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">m</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">Math.sin</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="NAME">n</span><span class="PUNC">=</span><span class="NAME">n</span><span class="PUNC">/</span><span class="NUMB">2</span><span class="PUNC">*</span><span class="NAME">Math.cos</span><span class="PUNC">(</span><span class="NAME">o</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="KEYW">return</span><span class="PUNC">[</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">:</span><span class="NAME">l.point.x</span><span class="PUNC">+</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">:</span><span class="NAME">l.point.y</span><span class="PUNC">+</span><span class="NAME">m</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="PUNC">{</span><span class="NAME">x</span><span class="PUNC">:</span><span class="NAME">l.point.x</span><span class="PUNC">-</span><span class="NAME">n</span><span class="PUNC">,</span><span class="NAME">y</span><span class="PUNC">:</span><span class="NAME">l.point.y</span><span class="PUNC">-</span><span class="NAME">m</span><span class="PUNC">}</span><span class="PUNC">]</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="NAME">locationAlongCurveFrom</span><span class="PUNC">:</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">b</span><span class="PUNC">(</span><span class="NAME">m</span><span class="PUNC">,</span><span class="NAME">l</span><span class="PUNC">,</span><span class="NAME">n</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">location</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span></pre></body></html>
#!/bin/sh
sudo apt-get -y install git
git clone git://github.com/Heigvd/Wegas.git Wegas
cd Wegas
git submodule init
#failing here
#Invalid username or password... why?
git submodule update
cd ..

sudo apt-get -y install openjdk-8-jdk
sudo update-alternatives --config java
#choose openjdk1.8
sudo apt-get -y install maven


sudo wget https://s3-eu-west-1.amazonaws.com/payara.fish/Payara+Downloads/5.192/payara-5.192.zip
sudo unzip payara-5.192.zip
cd payara5/bin/
sudo ./asadmin start-domain
ru
sudo apt-get -y install postgresql postgresql-contrib
sudo -u postgres psql
CREATE USER "user" WITH PASSWORD '1234' SUPERUSER;
CREATE DATABASE "wegas_dev";
CREATE DATABASE "wegas_test";
\q

#install yarn
sudo apt-get install -y nodejs npm
sudo npm install yarn -g

#in case of error 1 (yarn)
sudo apt-get remove cmdtest
sudo apt-get -y install curl 
curl -sL https://deb.nodesource.com/setup_10.x | sudo -E bash -
sudo apt-get -y install nodejs-legacy


sudo apt-get -y install docker.io
sudo docker pull mongo
sudo docker run -p 27017:27017 --name mongo -d mongo
sudo docker start mongo
